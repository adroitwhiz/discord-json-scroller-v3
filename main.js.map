{"version":3,"sources":["webpack:///../node_modules/discord-markdown/index.js","webpack:///./constants.js","webpack:///./options.js","webpack:///./create-element.js","webpack:///./component.js","webpack:///./create-context.js","webpack:///./util.js","webpack:///./diff/children.js","webpack:///./diff/props.js","webpack:///./diff/index.js","webpack:///./render.js","webpack:///./clone-element.js","webpack:///./diff/catch-error.js","webpack:///../node_modules/simple-markdown/simple-markdown.js","webpack:///../node_modules/twemoji-parser/dist/index.js","webpack:///../node_modules/twemoji-parser/dist/lib/regex.js","webpack:///src/util.js","webpack:///src/integrations/preact.js","webpack:///../node_modules/unzipit/dist/unzipit.module.js","webpack:///./components/App/style.scss?5b2f","webpack:///./deserialization/primitives.js","webpack:///./deserialization/deserialize-archivebot-archive.js","webpack:///./deserialization/deserialize-archivebot-server.js","webpack:///./deserialization/deserialize-toonmemebot-server.js","webpack:///./deserialization/deserialize-toonmemebot-channel.js","webpack:///./deserialization/deserialization.js","webpack:///./components/ChannelList/style.scss?e881","webpack:///./util/should-split-messages.js","webpack:///./util/fixup-message-boundaries.js","webpack:///./actions/set-current-channel.js","webpack:///./util/class-names.js","webpack:///./components/ChannelList/ChannelList.jsx","webpack:///./components/ChannelView/style.scss?75a8","webpack:///./components/Header/style.scss?1693","webpack:///./components/JumpableMessage/style.scss?afbc","webpack:///./components/MessageList/style.scss?5973","webpack:///./index.js","webpack:///./PureComponent.js","webpack:///./memo.js","webpack:///./forwardRef.js","webpack:///./Children.js","webpack:///./suspense.js","webpack:///./suspense-list.js","webpack:///./scheduler.js","webpack:///./components/Attachment/style.scss?f952","webpack:///./components/Attachment/Attachment.jsx","webpack:///./components/Avatar/style.scss?b12e","webpack:///./components/Avatar/Avatar.jsx","webpack:///./components/Emoji/style.scss?2268","webpack:///./components/Tooltip/style.scss?a1db","webpack:///./components/Tooltip/Tooltip.jsx","webpack:///./components/Emoji/Emoji.jsx","webpack:///./util/get-emoji-name.js","webpack:///./components/Markdown/style.scss?a307","webpack:///./actions/set-user-info-id.js","webpack:///./util/get-member-name.js","webpack:///./components/Markdown/Markdown.jsx","webpack:///./actions/set-channel-scroll-state.js","webpack:///./components/JumpableMessage/JumpableMessageHOC.jsx","webpack:///./actions/set-reaction-info.js","webpack:///./util/member-role-color.js","webpack:///./util/format-timestamp.js","webpack:///./components/MessageList/MessageList.jsx","webpack:///./components/JumpableMessage/JumpableMessage.jsx","webpack:///./components/Header/Header.jsx","webpack:///./actions/toggle-sidebar.js","webpack:///./components/MessageView/style.scss?df78","webpack:///./components/MessageView/MessageViewScrollbar.jsx","webpack:///./components/MessageView/MessageView.jsx","webpack:///./components/ChannelView/ChannelView.jsx","webpack:///./components/Sidebar/style.scss?262a","webpack:///./components/Sidebar/FindPanel/style.scss?3cbf","webpack:///./components/Toggle/style.scss?4bea","webpack:///./components/Toggle/Toggle.jsx","webpack:///./components/Sidebar/FindPanel/FindPanel.jsx","webpack:///./components/Sidebar/UsersPanel/style.scss?c1b7","webpack:///./components/Sidebar/UsersPanel/UsersPanel.jsx","webpack:///./components/Sidebar/Sidebar.jsx","webpack:///./components/Modal/style.scss?a855","webpack:///./components/Modal/Modal.jsx","webpack:///./components/UserInfo/style.scss?1489","webpack:///./components/UserInfo/UserInfo.jsx","webpack:///./components/ReactionInfo/style.scss?b08c","webpack:///./components/ReactionInfo/ReactionInfo.jsx","webpack:///./actions/set-reaction-info-index.js","webpack:///./components/ErrorBoundary/style.scss?b360","webpack:///./components/ErrorBoundary/ErrorBoundary.jsx","webpack:///./components/App/App.jsx","webpack:///./actions/set-archive.js","webpack:///webpack/bootstrap","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/harmony module decorator","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///webpack/startup"],"names":["markdown","require","highlight","htmlTag","tagName","content","attributes","isClosed","state","class","cssModuleNames","split","map","cl","join","attributeString","attr","Object","prototype","hasOwnProperty","call","sanitizeText","unclosedTag","rules","blockQuote","assign","defaultRules","match","source","prevSource","test","inQuote","exec","parse","capture","all","removeSyntaxRegex","Boolean","replace","type","codeBlock","inlineRegex","lang","trim","html","node","output","code","getLanguage","value","str","m","language","newline","escape","autolink","target","href","sanitizeUrl","url","em","parsed","inEmphasis","strong","u","strike","del","inlineCode","regex","text","escapeHTML","emoticon","order","br","anyScopeRegex","spoiler","discordCallbackDefaults","user","id","channel","role","everyone","here","rulesDiscord","discordUser","discordCallback","discordChannel","discordRole","discordEmoji","animated","name","src","alt","discordEveryone","discordHere","rulesDiscordOnly","rulesEmbed","link","parser","parserFor","htmlOutput","outputFor","parserDiscord","htmlOutputDiscord","parserEmbed","htmlOutputEmbed","module","exports","inline","toHTML","options","customParser","customHtmlOutput","Error","embed","discordOnly","_parser","_htmlOutput","markdownEngine","isValidElement","rerenderQueue","defer","prevDebounce","i","EMPTY_OBJ","EMPTY_ARR","IS_NON_DIMENSIONAL","obj","props","removeNode","parentNode","removeChild","createElement","children","key","ref","normalizedProps","arguments","length","push","defaultProps","createVNode","original","vnode","undefined","constructor","createRef","current","Fragment","Component","context","getDomSibling","childIndex","indexOf","sibling","updateParentDomPointers","child","base","enqueueRender","c","process","debounceRendering","queue","sort","a","b","some","component","commitQueue","oldVNode","oldDom","parentDom","diff","ownerSVGElement","commitRoot","diffChildren","renderResult","newParentVNode","oldParentVNode","globalContext","isSvg","excessDomChildren","isHydrating","j","childVNode","newDom","firstChildDom","refs","oldChildren","oldChildrenLength","Array","isArray","reorderChildren","placeChild","unmount","applyRef","tmp","toChildArray","out","nextDom","sibDom","outer","appendChild","nextSibling","insertBefore","setStyle","style","setProperty","dom","oldValue","useCapture","o","cssText","toLowerCase","slice","_listeners","addEventListener","eventProxyCapture","eventProxy","removeEventListener","e","setAttribute","removeAttribute","event","newVNode","isNew","oldProps","oldState","snapshot","clearProcessingException","newProps","provider","componentContext","newType","contextType","render","doRender","sub","getDerivedStateFromProps","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","forEach","componentWillUpdate","componentDidUpdate","getChildContext","getSnapshotBeforeUpdate","diffElementNodes","diffed","root","cb","oldHtml","newHtml","nodeType","localName","document","createTextNode","createElementNS","is","data","childNodes","dangerouslySetInnerHTML","innerHTML","hydrate","diffProps","firstChild","checked","parentVNode","skipRemove","r","componentWillUnmount","this","replaceNode","cloneElement","createContext","defaultValue","contextId","Consumer","contextValue","Provider","subs","ctx","_props","old","splice","error","ctor","handled","getDerivedStateFromError","setState","componentDidCatch","update","callback","s","forceUpdate","Promise","then","bind","resolve","setTimeout","TABLE_ROW_SEPARATOR_TRIM","TABLE_CELL_END_TRIM","TABLE_RIGHT_ALIGN","TABLE_CENTER_ALIGN","TABLE_LEFT_ALIGN","parseTableAlignCapture","parseTableAlign","parseTableRow","parseTableCells","parseTable","CR_NEWLINE_R","TAB_R","FORMFEED_R","preprocess","populateInitialState","givenState","defaultState","prop","latestState","ruleList","keys","filter","rule","isFinite","console","warn","String","typeA","typeB","ruleA","ruleB","orderA","orderB","secondaryOrderA","quality","secondaryOrderB","nestedParse","result","ruleType","NaN","currRuleType","currRule","currOrder","prevCaptureStr","prevCapture","currCapture","currQuality","index","apply","substring","disableAutoBlockNewlines","blockRegex","TYPE_SYMBOL","Symbol","for","reactElement","$$typeof","_owner","attribute","EMPTY_PROPS","prot","decodeURIComponent","SANITIZE_TEXT_R","SANITIZE_TEXT_CODES","chr","UNESCAPE_URL_R","unescapeUrl","rawUrlString","parseInline","isCurrentlyInline","parseBlock","parseCaptureInline","ignoreCapture","LIST_BULLET","LIST_ITEM_PREFIX","LIST_ITEM_PREFIX_R","RegExp","LIST_ITEM_R","BLOCK_END_R","INLINE_CODE_ESCAPE_BACKTICKS_R","LIST_BLOCK_END_R","LIST_ITEM_END_R","LIST_R","LIST_LOOKBEHIND_R","TABLES","alignCapture","trimEndSeparators","prevInTable","inTable","tableRow","cells","rowText","header","align","parseNpTable","TABLE_REGEX","NPTABLE_REGEX","LINK_INSIDE","LINK_HREF_AND_TITLE","AUTOLINK_MAILTO_CHECK_R","parseRef","refNode","_defs","def","title","_refs","react","arr","oldKey","heading","level","nptable","lheading","hr","className","fence","list","isStartOfLineCapture","isListBlock","_list","bullet","ordered","start","items","lastItemWasAParagraph","item","prefixCapture","space","spaceRegex","isLastItem","thisItemIsAParagraph","adjustedContent","oldStateInline","oldStateList","ListWrapper","listItems","listTag","table","getStyle","colIndex","textAlign","headers","scope","rows","row","cols","thead","tbody","paragraph","tableSeparator","mailto","address","image","reflink","refimage","ruleOutput","property","ast","outputFunc","reactFor","nestedOutput","lastResult","nodeOut","htmlFor","arrayRuleCheck","arrayRuleOutput","defaultRawParse","defaultBlockParse","defaultInlineParse","defaultImplicitParse","isBlock","defaultReactOutput","defaultHtmlOutput","markdownToReact","ReactMarkdown","divProps","markdownToHtml","defaultParse","defaultOutput","factory","toCodePoints","_regex","_regex2","__esModule","default","TypeName","vs16RegExp","zeroWidthJoiner","fromCharCode","removeVS16s","rawEmoji","unicodeSurrogates","points","char","previous","charCodeAt","toString","defineProperty","let","store","mapStateToProps","actions","properties","selected","Child","Wrapper","getState","boundActions","mapped","action","p","subscribe","unsubscribe","h","readBlobAsArrayBuffer","blob","arrayBuffer","reject","reader","FileReader","readAsArrayBuffer","async","readBlobAsUint8Array","Uint8Array","isBlob","v","Blob","isSharedArrayBuffer","SharedArrayBuffer","isNode","versions","electron","ArrayBufferReader","arrayBufferOrView","typedArray","ArrayBuffer","buffer","byteOffset","byteLength","offset","BlobReader","size","_check","buf","len","bl","nbuf","Math","max","set","_decodeTiny","lmap","LL","pos","tree","bitsE","_bitsE","get17","_get17","lit","ll","n","ni","_copyOut","off","mx","tl","makeCodes","MAX_BITS","bits","max_code","bl_count","U","next_code","codes2map","r15","rev15","val","rest","i0","i1","revCodes","imb","dt","_bitsF","u16","Uint16Array","u32","Uint32Array","ordr","of0","exb","ldef","df0","dxb","ddef","flmap","fltree","fdmap","fdtree","ltree","ttree","dmap","dtree","imap","itree","lhst","dhst","ihst","lits","strt","prev","x","pushV","tgt","sv","crc","tab","k","l","inflateRaw","file","u8","bitsF","decodeTiny","noBuf","BFINAL","BTYPE","HLIT","HDIST","HCLEN","ML","MD","mx0","mx1","end","ebs","dcode","dlit","dbs","dst","p8","inflate","config","numWorkers","workerURL","useWorkers","nextId","canUseWorkers","workers","availableWorkers","waitingForWorkerQueue","currentlyProcessingIdToRequestMap","Map","handleResult","makeWorkerAvailable","request","get","delete","startWorker","worker","Worker","onmessage","onerror","workerHelper","fn","on","terminate","req","fetch","mode","ok","URL","createObjectURL","btoa","processWaitingForWorkerQueue","inflateRawLocal","uncompressedSize","createWorker","pop","getAvailableWorker","shift","transferables","postMessage","inflateRawAsync","ZipEntry","rawEntry","date","time","_reader","_rawEntry","nameBytes","compressedSize","comment","commentBytes","compressionMethod","lastModDate","lastModFileDate","lastModFileTime","Date","isDirectory","endsWith","encrypted","generalPurposeBitFlag","decompress","fileDataStart","readEntryDataHeader","typedArrayOrBlob","readAsBlobOrTypedArray","readEntryDataAsBlob","dataView","readAs","readEntryDataAsArrayBuffer","decodeBuffer","JSON","read","sliceAsBlob","crc$1","unsigned","getUint16LE","uint8View","getUint32LE","getUint64LE","utf8Decoder","TextDecoder","isUTF8","decode","readZip64CentralDirectory","zip64EocdlOffset","eocdl","zip64EocdrOffset","zip64Eocdr","entryCount","centralDirectorySize","readEntries","centralDirectoryOffset","rawEntryCount","readEntryCursor","allEntriesBuffer","rawEntries","subarray","signature","versionMadeBy","versionNeededToExtract","crc32","fileNameLength","extraFieldLength","fileCommentLength","internalFileAttributes","externalFileAttributes","relativeOffsetOfLocalHeader","fileCommentStart","extraFieldBuffer","extraFields","headerId","dataStart","dataEnd","zip64ExtraField","find","zip64EiefBuffer","nameField","fileName","expectedCompressedSize","zip","entries","totalLength","getLength","localFileHeaderEnd","fileDataEnd","unzipRaw","status","statusText","Number","MAX_SAFE_INTEGER","min","EOCDR_WITHOUT_COMMENT_SIZE","readStart","eocdr","diskNumber","commentLength","expectedCommentLength","findEndOfCentralDirector","unzip","fromEntries","Archive","users","emojis","channels","avatars","emojiURLs","dispose","avatar","values","revokeObjectURL","Server","iconURL","members","roles","Set","owner","Channel","parentID","messages","nsfw","topic","position","pinnedMessages","recipients","Message","authorID","createdTimestamp","editedTimestamp","attachments","reactions","referencedMessage","MessageReaction","count","emoji","emojiIsCustom","Member","nickname","joinedTimestamp","User","avatarURL","username","discriminator","Role","color","permissions","hoist","Attachment","width","height","CustomEmoji","guild","identifier","deserializeChannel","parsedChannel","Prims","pinnedMessageIDs","hasPinnedMessages","pinnedMessageID","add","channelMessages","message","parsedMessage","author","attachment","parsedAttachment","reaction","parsedReaction","has","json","archiveVersion","version","parseInt","archive","window","archiveType","parsedUser","parsedEmoji","server","parsedServer","serverRoles","parsedRole","serverMembers","member","parsedMember","roleID","serverEmojis","emojiID","serverChannels","deserializeServer","archiveData","filePromises","path","pathMatch","__","leadingFolder","filePath","entry","blobURL","freeze","archiveUsers","parseAndAddUser","tag","everyoneRole","fakeMember","archiveEmojis","parseEmoji","filename","filesize","reverse","jsonMessage","dv","DataView","jsonText","zipData","getInt8","files","deserializeArchiveBotServer","deserializeArchiveBotArchive","deserializeToonMemeBotServer","deserializeToonMemeBotChannel","first","second","fixupMessageStart","fixed","shouldSplitMessages","fixupMessageEnd","currentChannel","newState","channelScrollState","classNames","activeClasses","crawlHierarchy","parent","childChannels","chanAPosition","chanBPosition","_ChannelItem","super","collapsed","toggleCollapse","selectChannel","setCurrentChannel","onClick","ChannelSublist","ChannelItem","connect","currentComponent","prevRaf","afterPaintEffects","oldBeforeDiff","oldBeforeRender","oldAfterDiff","oldCommit","oldBeforeUnmount","flushAfterPaintEffects","invokeCleanup","invokeEffect","hooks","raf","done","clearTimeout","timeout","HAS_RAF","cancelAnimationFrame","requestAnimationFrame","hook","comp","shallowDiffers","PureComponent","memo","comparer","shouldUpdate","nextProps","updateRef","Memoed","displayName","isReactComponent","isPureReactComponent","oldDiffHook","Forwarded","mapFn","oldCatchError","oldUnmount","Suspense","_suspenders","suspended","SuspenseList","_next","_map","promise","suspendingVNode","suspendingComponent","resolved","onResolved","onSuspensionComplete","suspendedVNode","removeOriginal","detachedParent","originalParent","wasHydrating","detachedComponent","detachedClone","effect","fallback","revealOrder","delegated","wrappedUnsuspend","unsuspend","_this","REACT_ELEMENT_TYPE","CAMEL_PROPS","onChangeInputType","configurable","writable","oldEventHook","empty","isPropagationStopped","cancelBubble","isDefaultPrevented","defaultPrevented","persist","nativeEvent","classNameDescriptor","oldVNodeHook","multiple","enumerable","performance","now","MAX_IMAGE_SIZE","sizeImageAttachment","largestDimension","scaleFactor","metaAvatarRegistry","WeakMap","Avatar","handledError","getUserID","handleError","getAvatarURL","getDefaultAvatar","getAvatarRegistry","userID","svg","luma","codePointAt","defaultAvatar","encodeURIComponent","registry","hasAvatar","loadResultKnown","knownUnsuccessful","onError","Tooltip","side","useEmoji","emojiName","emojiURL","ReactionEmoji","draggable","_TooltipEmoji","hover","onPointerEnter","onPointerOut","TooltipEmoji","newID","showInfoOfUserID","memberID","prefixWithAt","prefix","Spoiler","spoiled","toggleSpoiled","UserMention","setUserInfoID","getMemberName","ChannelMention","hasChannel","RoleMention","styleString","roleColorInt","roleColorR","roleColorG","roleColorB","makeLink","toTwemoji","emojiRegex","nodes","lastLastIndex","emojiText","reactRules","reactify","nodeArray","nodeHasContent","channelID","WrappedComponent","setChannelScrollState","jumpToMessage","messageID","messageChannel","messageIndex","findIndex","idx","reactionsToShow","showReactionIndex","highestRolePosition","highestRoleColor","timestamp","toISOString","Edited","stayOpen","toggleStayOpen","prevState","formatTimestamp","setReactionInfo","reactionIndex","MessageContents","RepliedContent","JumpableMessageHOC","hasAttachments","RepliedMessage","getMemberColor","messageComponents","firstMessage","Header","showPinnedMessages","toggleShowPinnedMessages","toggleSidebar","showSidebar","BetterTextInput","handleKeyPress","onChange","onBlur","onKeyPress","MessageViewScrollbar","rangeElem","handleSetStart","handleSetEnd","numVal","isInteger","setNewStart","setNewEnd","totalMessages","MessageView","viewElem","loadMoreFromTop","loadMoreFromBottom","handleScroll","currentView","atBottom","scrollHeight","clientHeight","scrollTop","preventDefault","prevProps","atStart","atEnd","chunks","currentChunkStart","onScroll","ChannelView","makeCheckboxSetter","makeInputSetter","FindPanel","filterByUser","filterByText","filterByChannel","filterUser","filterText","filterChannel","foundMessages","foundMessageChannels","pageNumber","numPages","toggleFindPanel","searchMessages","setFilterByText","setFilterText","setFilterByUser","setFilterUser","setFilterByChannel","setFilterChannel","prevPage","nextPage","allMessages","messageChannels","matchText","includes","userFilter","memberUser","ceil","listID","random","userTagOptions","archiveChannelOptions","UserListing","isOwner","UsersPanel","panelInner","roleGroups","roleMap","highestRole","reduce","prevRole","curRole","nonMembers","roleGroupsElems","Sidebar","activeTab","getActivePanel","setUsersTab","setActiveTab","setFindTab","Modal","onClose","setReactionInfoIndex","ErrorBoundary","hasError","stack","listeners","listener","overwrite","currentListeners","createStore","_App","handleUpload","hideUserInfo","hideReactionInfo","deserializeArchiveFile","setArchive","next","app","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","loaded","__webpack_modules__","d","definition","hmd","create","toStringTag"],"mappings":"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","file":"main.js","sourcesContent":["const markdown = require('simple-markdown');\r\nconst highlight = require('highlight.js');\r\n\r\nfunction htmlTag(tagName, content, attributes, isClosed = true, state = { }) {\r\n\tif (typeof isClosed === 'object') {\r\n\t\tstate = isClosed;\r\n\t\tisClosed = true;\r\n\t}\r\n\r\n\tif (!attributes)\r\n\t\tattributes = { };\r\n\r\n\tif (attributes.class && state.cssModuleNames)\r\n\t\tattributes.class = attributes.class.split(' ').map(cl => state.cssModuleNames[cl] || cl).join(' ');\r\n\r\n\tlet attributeString = '';\r\n\tfor (let attr in attributes) {\r\n\t\t// Removes falsy attributes\r\n\t\tif (Object.prototype.hasOwnProperty.call(attributes, attr) && attributes[attr])\r\n\t\t\tattributeString += ` ${markdown.sanitizeText(attr)}=\"${markdown.sanitizeText(attributes[attr])}\"`;\r\n\t}\r\n\r\n\tlet unclosedTag = `<${tagName}${attributeString}>`;\r\n\r\n\tif (isClosed)\r\n\t\treturn unclosedTag + content + `</${tagName}>`;\r\n\treturn unclosedTag;\r\n}\r\nmarkdown.htmlTag = htmlTag;\r\n\r\nconst rules = {\r\n\tblockQuote: Object.assign({ }, markdown.defaultRules.blockQuote, {\r\n\t\tmatch: function(source, state, prevSource) {\r\n\t\t\treturn !/^$|\\n *$/.test(prevSource) || state.inQuote ? null : /^( *>>> ([\\s\\S]*))|^( *> [^\\n]*(\\n *> [^\\n]*)*\\n?)/.exec(source);\r\n\t\t},\r\n\t\tparse: function(capture, parse, state) {\r\n\t\t\tconst all = capture[0];\r\n\t\t\tconst isBlock = Boolean(/^ *>>> ?/.exec(all));\r\n\t\t\tconst removeSyntaxRegex = isBlock ? /^ *>>> ?/ : /^ *> ?/gm;\r\n\t\t\tconst content = all.replace(removeSyntaxRegex, '');\r\n\r\n\t\t\treturn {\r\n\t\t\t\tcontent: parse(content, Object.assign({ }, state, { inQuote: true })),\r\n\t\t\t\ttype: 'blockQuote'\r\n\t\t\t}\r\n\t\t}\r\n\t}),\r\n\tcodeBlock: Object.assign({ }, markdown.defaultRules.codeBlock, {\r\n\t\tmatch: markdown.inlineRegex(/^```(([a-z0-9-]+?)\\n+)?\\n*([^]+?)\\n*```/i),\r\n\t\tparse: function(capture, parse, state) {\r\n\t\t\treturn {\r\n\t\t\t\tlang: (capture[2] || '').trim(),\r\n\t\t\t\tcontent: capture[3] || '',\r\n\t\t\t\tinQuote: state.inQuote || false\r\n\t\t\t};\r\n\t\t},\r\n\t\thtml: (node, output, state) => {\r\n\t\t\tlet code;\r\n\t\t\tif (node.lang && highlight.getLanguage(node.lang))\r\n\t\t\t\tcode = highlight.highlight(node.lang, node.content, true); // Discord seems to set ignoreIllegals: true\r\n\r\n\t\t\tif (code && state.cssModuleNames) // Replace classes in hljs output\r\n\t\t\t\tcode.value = code.value.replace(/<span class=\"([a-z0-9-_ ]+)\">/gi, (str, m) =>\r\n\t\t\t\t\tstr.replace(m, m.split(' ').map(cl => state.cssModuleNames[cl] || cl).join(' ')));\r\n\r\n\t\t\treturn htmlTag('pre', htmlTag(\r\n\t\t\t\t'code', code ? code.value : markdown.sanitizeText(node.content), { class: `hljs${code ? ' ' + code.language : ''}` }, state\r\n\t\t\t), null, state);\r\n\t\t}\r\n\t}),\r\n\tnewline: markdown.defaultRules.newline,\r\n\tescape: markdown.defaultRules.escape,\r\n\tautolink: Object.assign({ }, markdown.defaultRules.autolink, {\r\n\t\tparse: capture => {\r\n\t\t\treturn {\r\n\t\t\t\tcontent: [{\r\n\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\tcontent: capture[1]\r\n\t\t\t\t}],\r\n\t\t\t\ttarget: capture[1]\r\n\t\t\t};\r\n\t\t},\r\n\t\thtml: (node, output, state) => {\r\n\t\t\treturn htmlTag('a', output(node.content, state), { href: markdown.sanitizeUrl(node.target) }, state);\r\n\t\t}\r\n\t}),\r\n\turl: Object.assign({ }, markdown.defaultRules.url, {\r\n\t\tparse: capture => {\r\n\t\t\treturn {\r\n\t\t\t\tcontent: [{\r\n\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\tcontent: capture[1]\r\n\t\t\t\t}],\r\n\t\t\t\ttarget: capture[1]\r\n\t\t\t}\r\n\t\t},\r\n\t\thtml: (node, output, state) => {\r\n\t\t\treturn htmlTag('a', output(node.content, state), { href: markdown.sanitizeUrl(node.target) }, state);\r\n\t\t}\r\n\t}),\r\n\tem: Object.assign({ }, markdown.defaultRules.em, {\r\n\t\tparse: function(capture, parse, state) {\r\n\t\t\tconst parsed = markdown.defaultRules.em.parse(capture, parse, Object.assign({ }, state, { inEmphasis: true }));\r\n\t\t\treturn state.inEmphasis ? parsed.content : parsed;\r\n\t\t},\r\n\t}),\r\n\tstrong: markdown.defaultRules.strong,\r\n\tu: markdown.defaultRules.u,\r\n\tstrike: Object.assign({ }, markdown.defaultRules.del, {\r\n\t\tmatch: markdown.inlineRegex(/^~~([\\s\\S]+?)~~(?!_)/),\r\n\t}),\r\n\tinlineCode: Object.assign({ }, markdown.defaultRules.inlineCode, {\r\n\t\tmatch: source => markdown.defaultRules.inlineCode.match.regex.exec(source),\r\n\t\thtml: function(node, output, state) {\r\n\t\t\treturn htmlTag('code', markdown.sanitizeText(node.content.trim()), null, state);\r\n\t\t}\r\n\t}),\r\n\ttext: Object.assign({ }, markdown.defaultRules.text, {\r\n\t\tmatch: source => /^[\\s\\S]+?(?=[^0-9A-Za-z\\s\\u00c0-\\uffff-]|\\n\\n|\\n|\\w+:\\S|$)/.exec(source),\r\n\t\thtml: function(node, output, state) {\r\n\t\t\tif (state.escapeHTML)\r\n\t\t\t\treturn markdown.sanitizeText(node.content);\r\n\r\n\t\t\treturn node.content;\r\n\t\t}\r\n\t}),\r\n\temoticon: {\r\n\t\torder: markdown.defaultRules.text.order,\r\n\t\tmatch: source => /^(¯\\\\_\\(ツ\\)_\\/¯)/.exec(source),\r\n\t\tparse: function(capture) {\r\n\t\t\treturn {\r\n\t\t\t\ttype: 'text',\r\n\t\t\t\tcontent: capture[1]\r\n\t\t\t};\r\n\t\t},\r\n\t\thtml: function(node, output, state) {\r\n\t\t\treturn output(node.content, state);\r\n\t\t},\r\n\t},\r\n\tbr: Object.assign({ }, markdown.defaultRules.br, {\r\n\t\tmatch: markdown.anyScopeRegex(/^\\n/),\r\n\t}),\r\n\tspoiler: {\r\n\t\torder: 0,\r\n\t\tmatch: source => /^\\|\\|([\\s\\S]+?)\\|\\|/.exec(source),\r\n\t\tparse: function(capture, parse, state) {\r\n\t\t\treturn {\r\n\t\t\t\tcontent: parse(capture[1], state)\r\n\t\t\t};\r\n\t\t},\r\n\t\thtml: function(node, output, state) {\r\n\t\t\treturn htmlTag('span', output(node.content, state), { class: 'd-spoiler' }, state);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nconst discordCallbackDefaults = {\r\n\tuser: node => '@' + markdown.sanitizeText(node.id),\r\n\tchannel: node => '#' + markdown.sanitizeText(node.id),\r\n\trole: node => '&' + markdown.sanitizeText(node.id),\r\n\teveryone: () => '@everyone',\r\n\there: () => '@here'\r\n};\r\n\r\nconst rulesDiscord = {\r\n\tdiscordUser: {\r\n\t\torder: markdown.defaultRules.strong.order,\r\n\t\tmatch: source => /^<@!?([0-9]*)>/.exec(source),\r\n\t\tparse: function(capture) {\r\n\t\t\treturn {\r\n\t\t\t\tid: capture[1]\r\n\t\t\t};\r\n\t\t},\r\n\t\thtml: function(node, output, state) {\r\n\t\t\treturn htmlTag('span', state.discordCallback.user(node), { class: 'd-mention d-user' }, state);\r\n\t\t}\r\n\t},\r\n\tdiscordChannel: {\r\n\t\torder: markdown.defaultRules.strong.order,\r\n\t\tmatch: source => /^<#?([0-9]*)>/.exec(source),\r\n\t\tparse: function(capture) {\r\n\t\t\treturn {\r\n\t\t\t\tid: capture[1]\r\n\t\t\t};\r\n\t\t},\r\n\t\thtml: function(node, output, state) {\r\n\t\t\treturn htmlTag('span', state.discordCallback.channel(node), { class: 'd-mention d-channel' }, state);\r\n\t\t}\r\n\t},\r\n\tdiscordRole: {\r\n\t\torder: markdown.defaultRules.strong.order,\r\n\t\tmatch: source => /^<@&([0-9]*)>/.exec(source),\r\n\t\tparse: function(capture) {\r\n\t\t\treturn {\r\n\t\t\t\tid: capture[1]\r\n\t\t\t};\r\n\t\t},\r\n\t\thtml: function(node, output, state) {\r\n\t\t\treturn htmlTag('span', state.discordCallback.role(node), { class: 'd-mention d-role' }, state);\r\n\t\t}\r\n\t},\r\n\tdiscordEmoji: {\r\n\t\torder: markdown.defaultRules.strong.order,\r\n\t\tmatch: source => /^<(a?):(\\w+):(\\d+)>/.exec(source),\r\n\t\tparse: function(capture) {\r\n\t\t\treturn {\r\n\t\t\t\tanimated: capture[1] === \"a\",\r\n\t\t\t\tname: capture[2],\r\n\t\t\t\tid: capture[3],\r\n\t\t\t};\r\n\t\t},\r\n\t\thtml: function(node, output, state) {\r\n\t\t\treturn htmlTag('img', '', {\r\n\t\t\t\tclass: `d-emoji${node.animated ? ' d-emoji-animated' : ''}`,\r\n\t\t\t\tsrc: `https://cdn.discordapp.com/emojis/${node.id}.${node.animated ? 'gif' : 'png'}`,\r\n\t\t\t\talt: `:${node.name}:`\r\n\t\t\t}, false, state);\r\n\t\t}\r\n\t},\r\n\tdiscordEveryone: {\r\n\t\torder: markdown.defaultRules.strong.order,\r\n\t\tmatch: source => /^@everyone/.exec(source),\r\n\t\tparse: function() {\r\n\t\t\treturn { };\r\n\t\t},\r\n\t\thtml: function(node, output, state) {\r\n\t\t\treturn htmlTag('span', state.discordCallback.everyone(node), { class: 'd-mention d-user' }, state);\r\n\t\t}\r\n\t},\r\n\tdiscordHere: {\r\n\t\torder: markdown.defaultRules.strong.order,\r\n\t\tmatch: source => /^@here/.exec(source),\r\n\t\tparse: function() {\r\n\t\t\treturn { };\r\n\t\t},\r\n\t\thtml: function(node, output, state) {\r\n\t\t\treturn htmlTag('span', state.discordCallback.here(node), { class: 'd-mention d-user' }, state);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nObject.assign(rules, rulesDiscord);\r\n\r\nconst rulesDiscordOnly = Object.assign({ }, rulesDiscord, {\r\n\ttext: Object.assign({ }, markdown.defaultRules.text, {\r\n\t\tmatch: source => /^[\\s\\S]+?(?=[^0-9A-Za-z\\s\\u00c0-\\uffff-]|\\n\\n|\\n|\\w+:\\S|$)/.exec(source),\r\n\t\thtml: function(node, output, state) {\r\n\t\t\tif (state.escapeHTML)\r\n\t\t\t\treturn markdown.sanitizeText(node.content);\r\n\r\n\t\t\treturn node.content;\r\n\t\t}\r\n\t})\r\n});\r\n\r\nconst rulesEmbed = Object.assign({ }, rules, {\r\n\tlink: markdown.defaultRules.link\r\n});\r\n\r\nconst parser = markdown.parserFor(rules);\r\nconst htmlOutput = markdown.outputFor(rules, 'html');\r\nconst parserDiscord = markdown.parserFor(rulesDiscordOnly);\r\nconst htmlOutputDiscord = markdown.outputFor(rulesDiscordOnly, 'html');\r\nconst parserEmbed = markdown.parserFor(rulesEmbed);\r\nconst htmlOutputEmbed = markdown.outputFor(rulesEmbed, 'html');\r\n\r\n/**\r\n * Parse markdown and return the HTML output\r\n * @param {String} source Source markdown content\r\n * @param {Object} [options] Options for the parser\r\n * @param {Boolean} [options.embed=false] Parse as embed content\r\n * @param {Boolean} [options.escapeHTML=true] Escape HTML in the output\r\n * @param {Boolean} [options.discordOnly=false] Only parse Discord-specific stuff (such as mentions)\r\n * @param {Object} [options.discordCallback] Provide custom handling for mentions and emojis\r\n * @param {Object} [options.cssModuleNames] An object mapping css classes to css module classes\r\n */\r\nfunction toHTML(source, options, customParser, customHtmlOutput) {\r\n\tif ((customParser || customHtmlOutput) && (!customParser || !customHtmlOutput))\r\n\t\tthrow new Error('You must pass both a custom parser and custom htmlOutput function, not just one');\r\n\r\n\toptions = Object.assign({\r\n\t\tembed: false,\r\n\t\tescapeHTML: true,\r\n\t\tdiscordOnly: false,\r\n\t\tdiscordCallback: { }\r\n\t}, options || { });\r\n\r\n\tlet _parser = parser;\r\n\tlet _htmlOutput = htmlOutput;\r\n\tif (customParser) {\r\n\t\t_parser = customParser;\r\n\t\t_htmlOutput = customHtmlOutput;\r\n\t} else if (options.discordOnly) {\r\n\t\t_parser = parserDiscord;\r\n\t\t_htmlOutput = htmlOutputDiscord;\r\n\t} else if (options.embed) {\r\n\t\t_parser = parserEmbed;\r\n\t\t_htmlOutput = htmlOutputEmbed;\r\n\t}\r\n\r\n\tconst state = {\r\n\t\tinline: true,\r\n\t\tinQuote: false,\r\n\t\tinEmphasis: false,\r\n\t\tescapeHTML: options.escapeHTML,\r\n\t\tcssModuleNames: options.cssModuleNames || null,\r\n\t\tdiscordCallback: Object.assign({ }, discordCallbackDefaults, options.discordCallback)\r\n\t};\r\n\r\n\treturn _htmlOutput(_parser(source, state), state);\r\n}\r\n\r\nmodule.exports = {\r\n\tparser: source => parser(source, { inline: true }),\r\n\thtmlOutput,\r\n\ttoHTML,\r\n\trules,\r\n\trulesDiscordOnly,\r\n\trulesEmbed,\r\n\tmarkdownEngine: markdown,\r\n\thtmlTag\r\n};\r\n","export const EMPTY_OBJ = {};\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL = /acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n","import { _catchError } from './diff/catch-error';\n\n/**\n * The `option` object can potentially contain callback functions\n * that are called during various stages of our renderer. This is the\n * foundation on which all our addons like `preact/debug`, `preact/compat`,\n * and `preact/hooks` are based on. See the `Options` type in `internal.d.ts`\n * for a full list of available option hooks (most editors/IDEs allow you to\n * ctrl+click or cmd+click on mac the type definition below).\n * @type {import('./internal').Options}\n */\nconst options = {\n\t_catchError,\n\t_vnodeId: 0\n};\n\nexport default options;\n","import options from './options';\n\n/**\n * Create an virtual node (used for JSX)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * constructor for this virtual node\n * @param {object | null | undefined} [props] The properties of the virtual node\n * @param {Array<import('.').ComponentChildren>} [children] The children of the virtual node\n * @returns {import('./internal').VNode}\n */\nexport function createElement(type, props, children) {\n\tlet normalizedProps = {},\n\t\tkey,\n\t\tref,\n\t\ti;\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse normalizedProps[i] = props[i];\n\t}\n\n\tif (arguments.length > 3) {\n\t\tchildren = [children];\n\t\t// https://github.com/preactjs/preact/issues/1916\n\t\tfor (i = 3; i < arguments.length; i++) {\n\t\t\tchildren.push(arguments[i]);\n\t\t}\n\t}\n\tif (children != null) {\n\t\tnormalizedProps.children = children;\n\t}\n\n\t// If a Component VNode, check for and apply defaultProps\n\t// Note: type may be undefined in development, must never error here.\n\tif (typeof type == 'function' && type.defaultProps != null) {\n\t\tfor (i in type.defaultProps) {\n\t\t\tif (normalizedProps[i] === undefined) {\n\t\t\t\tnormalizedProps[i] = type.defaultProps[i];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn createVNode(type, normalizedProps, key, ref, null);\n}\n\n/**\n * Create a VNode (used internally by Preact)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * Constructor for this virtual node\n * @param {object | string | number | null} props The properties of this virtual node.\n * If this virtual node represents a text node, this is the text of the node (string or number).\n * @param {string | number | null} key The key for this virtual node, used when\n * diffing it against its children\n * @param {import('./internal').VNode[\"ref\"]} ref The ref property that will\n * receive a reference to its created child\n * @returns {import('./internal').VNode}\n */\nexport function createVNode(type, props, key, ref, original) {\n\t// V8 seems to be better at detecting type shapes if the object is allocated from the same call site\n\t// Do not inline into createElement and coerceToVNode!\n\tconst vnode = {\n\t\ttype,\n\t\tprops,\n\t\tkey,\n\t\tref,\n\t\t_children: null,\n\t\t_parent: null,\n\t\t_depth: 0,\n\t\t_dom: null,\n\t\t// _nextDom must be initialized to undefined b/c it will eventually\n\t\t// be set to dom.nextSibling which can return `null` and it is important\n\t\t// to be able to distinguish between an uninitialized _nextDom and\n\t\t// a _nextDom that has been set to `null`\n\t\t_nextDom: undefined,\n\t\t_component: null,\n\t\t_hydrating: null,\n\t\tconstructor: undefined,\n\t\t_original: original == null ? ++options._vnodeId : original\n\t};\n\n\tif (options.vnode != null) options.vnode(vnode);\n\n\treturn vnode;\n}\n\nexport function createRef() {\n\treturn { current: null };\n}\n\nexport function Fragment(props) {\n\treturn props.children;\n}\n\n/**\n * Check if a the argument is a valid Preact VNode.\n * @param {*} vnode\n * @returns {vnode is import('./internal').VNode}\n */\nexport const isValidElement = vnode =>\n\tvnode != null && vnode.constructor === undefined;\n","import { assign } from './util';\nimport { diff, commitRoot } from './diff/index';\nimport options from './options';\nimport { Fragment } from './create-element';\n\n/**\n * Base Component class. Provides `setState()` and `forceUpdate()`, which\n * trigger rendering\n * @param {object} props The initial component props\n * @param {object} context The initial context from parent components'\n * getChildContext\n */\nexport function Component(props, context) {\n\tthis.props = props;\n\tthis.context = context;\n}\n\n/**\n * Update component state and schedule a re-render.\n * @this {import('./internal').Component}\n * @param {object | ((s: object, p: object) => object)} update A hash of state\n * properties to update with new values or a function that given the current\n * state and props returns a new partial state\n * @param {() => void} [callback] A function to be called once component state is\n * updated\n */\nComponent.prototype.setState = function(update, callback) {\n\t// only clone state when copying to nextState the first time.\n\tlet s;\n\tif (this._nextState != null && this._nextState !== this.state) {\n\t\ts = this._nextState;\n\t} else {\n\t\ts = this._nextState = assign({}, this.state);\n\t}\n\n\tif (typeof update == 'function') {\n\t\t// Some libraries like `immer` mark the current state as readonly,\n\t\t// preventing us from mutating it, so we need to clone it. See #2716\n\t\tupdate = update(assign({}, s), this.props);\n\t}\n\n\tif (update) {\n\t\tassign(s, update);\n\t}\n\n\t// Skip update if updater function returned null\n\tif (update == null) return;\n\n\tif (this._vnode) {\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Immediately perform a synchronous re-render of the component\n * @this {import('./internal').Component}\n * @param {() => void} [callback] A function to be called after component is\n * re-rendered\n */\nComponent.prototype.forceUpdate = function(callback) {\n\tif (this._vnode) {\n\t\t// Set render mode so that we can differentiate where the render request\n\t\t// is coming from. We need this because forceUpdate should never call\n\t\t// shouldComponentUpdate\n\t\tthis._force = true;\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Accepts `props` and `state`, and returns a new Virtual DOM tree to build.\n * Virtual DOM is generally constructed via [JSX](http://jasonformat.com/wtf-is-jsx).\n * @param {object} props Props (eg: JSX attributes) received from parent\n * element/component\n * @param {object} state The component's current state\n * @param {object} context Context object, as returned by the nearest\n * ancestor's `getChildContext()`\n * @returns {import('./index').ComponentChildren | void}\n */\nComponent.prototype.render = Fragment;\n\n/**\n * @param {import('./internal').VNode} vnode\n * @param {number | null} [childIndex]\n */\nexport function getDomSibling(vnode, childIndex) {\n\tif (childIndex == null) {\n\t\t// Use childIndex==null as a signal to resume the search from the vnode's sibling\n\t\treturn vnode._parent\n\t\t\t? getDomSibling(vnode._parent, vnode._parent._children.indexOf(vnode) + 1)\n\t\t\t: null;\n\t}\n\n\tlet sibling;\n\tfor (; childIndex < vnode._children.length; childIndex++) {\n\t\tsibling = vnode._children[childIndex];\n\n\t\tif (sibling != null && sibling._dom != null) {\n\t\t\t// Since updateParentDomPointers keeps _dom pointer correct,\n\t\t\t// we can rely on _dom to tell us if this subtree contains a\n\t\t\t// rendered DOM node, and what the first rendered DOM node is\n\t\t\treturn sibling._dom;\n\t\t}\n\t}\n\n\t// If we get here, we have not found a DOM node in this vnode's children.\n\t// We must resume from this vnode's sibling (in it's parent _children array)\n\t// Only climb up and search the parent if we aren't searching through a DOM\n\t// VNode (meaning we reached the DOM parent of the original vnode that began\n\t// the search)\n\treturn typeof vnode.type == 'function' ? getDomSibling(vnode) : null;\n}\n\n/**\n * Trigger in-place re-rendering of a component.\n * @param {import('./internal').Component} component The component to rerender\n */\nfunction renderComponent(component) {\n\tlet vnode = component._vnode,\n\t\toldDom = vnode._dom,\n\t\tparentDom = component._parentDom;\n\n\tif (parentDom) {\n\t\tlet commitQueue = [];\n\t\tconst oldVNode = assign({}, vnode);\n\t\toldVNode._original = vnode._original + 1;\n\n\t\tdiff(\n\t\t\tparentDom,\n\t\t\tvnode,\n\t\t\toldVNode,\n\t\t\tcomponent._globalContext,\n\t\t\tparentDom.ownerSVGElement !== undefined,\n\t\t\tvnode._hydrating != null ? [oldDom] : null,\n\t\t\tcommitQueue,\n\t\t\toldDom == null ? getDomSibling(vnode) : oldDom,\n\t\t\tvnode._hydrating\n\t\t);\n\t\tcommitRoot(commitQueue, vnode);\n\n\t\tif (vnode._dom != oldDom) {\n\t\t\tupdateParentDomPointers(vnode);\n\t\t}\n\t}\n}\n\n/**\n * @param {import('./internal').VNode} vnode\n */\nfunction updateParentDomPointers(vnode) {\n\tif ((vnode = vnode._parent) != null && vnode._component != null) {\n\t\tvnode._dom = vnode._component.base = null;\n\t\tfor (let i = 0; i < vnode._children.length; i++) {\n\t\t\tlet child = vnode._children[i];\n\t\t\tif (child != null && child._dom != null) {\n\t\t\t\tvnode._dom = vnode._component.base = child._dom;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn updateParentDomPointers(vnode);\n\t}\n}\n\n/**\n * The render queue\n * @type {Array<import('./internal').Component>}\n */\nlet rerenderQueue = [];\n\n/**\n * Asynchronously schedule a callback\n * @type {(cb: () => void) => void}\n */\n/* istanbul ignore next */\n// Note the following line isn't tree-shaken by rollup cuz of rollup/rollup#2566\nconst defer =\n\ttypeof Promise == 'function'\n\t\t? Promise.prototype.then.bind(Promise.resolve())\n\t\t: setTimeout;\n\n/*\n * The value of `Component.debounce` must asynchronously invoke the passed in callback. It is\n * important that contributors to Preact can consistently reason about what calls to `setState`, etc.\n * do, and when their effects will be applied. See the links below for some further reading on designing\n * asynchronous APIs.\n * * [Designing APIs for Asynchrony](https://blog.izs.me/2013/08/designing-apis-for-asynchrony)\n * * [Callbacks synchronous and asynchronous](https://blog.ometer.com/2011/07/24/callbacks-synchronous-and-asynchronous/)\n */\n\nlet prevDebounce;\n\n/**\n * Enqueue a rerender of a component\n * @param {import('./internal').Component} c The component to rerender\n */\nexport function enqueueRender(c) {\n\tif (\n\t\t(!c._dirty &&\n\t\t\t(c._dirty = true) &&\n\t\t\trerenderQueue.push(c) &&\n\t\t\t!process._rerenderCount++) ||\n\t\tprevDebounce !== options.debounceRendering\n\t) {\n\t\tprevDebounce = options.debounceRendering;\n\t\t(prevDebounce || defer)(process);\n\t}\n}\n\n/** Flush the render queue by rerendering all queued components */\nfunction process() {\n\tlet queue;\n\twhile ((process._rerenderCount = rerenderQueue.length)) {\n\t\tqueue = rerenderQueue.sort((a, b) => a._vnode._depth - b._vnode._depth);\n\t\trerenderQueue = [];\n\t\t// Don't update `renderCount` yet. Keep its value non-zero to prevent unnecessary\n\t\t// process() calls from getting scheduled while `queue` is still being consumed.\n\t\tqueue.some(c => {\n\t\t\tif (c._dirty) renderComponent(c);\n\t\t});\n\t}\n}\nprocess._rerenderCount = 0;\n","import { enqueueRender } from './component';\n\nexport let i = 0;\n\nexport function createContext(defaultValue, contextId) {\n\tcontextId = '__cC' + i++;\n\n\tconst context = {\n\t\t_id: contextId,\n\t\t_defaultValue: defaultValue,\n\t\t/** @type {import('./internal').FunctionComponent} */\n\t\tConsumer(props, contextValue) {\n\t\t\t// return props.children(\n\t\t\t// \tcontext[contextId] ? context[contextId].props.value : defaultValue\n\t\t\t// );\n\t\t\treturn props.children(contextValue);\n\t\t},\n\t\t/** @type {import('./internal').FunctionComponent} */\n\t\tProvider(props) {\n\t\t\tif (!this.getChildContext) {\n\t\t\t\tlet subs = [];\n\t\t\t\tlet ctx = {};\n\t\t\t\tctx[contextId] = this;\n\n\t\t\t\tthis.getChildContext = () => ctx;\n\n\t\t\t\tthis.shouldComponentUpdate = function(_props) {\n\t\t\t\t\tif (this.props.value !== _props.value) {\n\t\t\t\t\t\t// I think the forced value propagation here was only needed when `options.debounceRendering` was being bypassed:\n\t\t\t\t\t\t// https://github.com/preactjs/preact/commit/4d339fb803bea09e9f198abf38ca1bf8ea4b7771#diff-54682ce380935a717e41b8bfc54737f6R358\n\t\t\t\t\t\t// In those cases though, even with the value corrected, we're double-rendering all nodes.\n\t\t\t\t\t\t// It might be better to just tell folks not to use force-sync mode.\n\t\t\t\t\t\t// Currently, using `useContext()` in a class component will overwrite its `this.context` value.\n\t\t\t\t\t\t// subs.some(c => {\n\t\t\t\t\t\t// \tc.context = _props.value;\n\t\t\t\t\t\t// \tenqueueRender(c);\n\t\t\t\t\t\t// });\n\n\t\t\t\t\t\t// subs.some(c => {\n\t\t\t\t\t\t// \tc.context[contextId] = _props.value;\n\t\t\t\t\t\t// \tenqueueRender(c);\n\t\t\t\t\t\t// });\n\t\t\t\t\t\tsubs.some(enqueueRender);\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tthis.sub = c => {\n\t\t\t\t\tsubs.push(c);\n\t\t\t\t\tlet old = c.componentWillUnmount;\n\t\t\t\t\tc.componentWillUnmount = () => {\n\t\t\t\t\t\tsubs.splice(subs.indexOf(c), 1);\n\t\t\t\t\t\tif (old) old.call(c);\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn props.children;\n\t\t}\n\t};\n\n\t// Devtools needs access to the context object when it\n\t// encounters a Provider. This is necessary to support\n\t// setting `displayName` on the context object instead\n\t// of on the component itself. See:\n\t// https://reactjs.org/docs/context.html#contextdisplayname\n\n\treturn (context.Provider._contextRef = context.Consumer.contextType = context);\n}\n","/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Check if two objects have a different shape\n * @param {object} a\n * @param {object} b\n * @returns {boolean}\n */\nexport function shallowDiffers(a, b) {\n\tfor (let i in a) if (i !== '__source' && !(i in b)) return true;\n\tfor (let i in b) if (i !== '__source' && a[i] !== b[i]) return true;\n\treturn false;\n}\n\nexport function removeNode(node) {\n\tlet parentNode = node.parentNode;\n\tif (parentNode) parentNode.removeChild(node);\n}\n","import { diff, unmount, applyRef } from './index';\nimport { createVNode, Fragment } from '../create-element';\nimport { EMPTY_OBJ, EMPTY_ARR } from '../constants';\nimport { getDomSibling } from '../component';\n\n/**\n * Diff the children of a virtual node\n * @param {import('../internal').PreactElement} parentDom The DOM element whose\n * children are being diffed\n * @param {import('../internal').ComponentChildren[]} renderResult\n * @param {import('../internal').VNode} newParentVNode The new virtual\n * node whose children should be diff'ed against oldParentVNode\n * @param {import('../internal').VNode} oldParentVNode The old virtual\n * node whose children should be diff'ed against newParentVNode\n * @param {object} globalContext The current context object - modified by getChildContext\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node\n * @param {Array<import('../internal').PreactElement>} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {import('../internal').PreactElement} oldDom The current attached DOM\n * element any new dom elements should be placed around. Likely `null` on first\n * render (except when hydrating). Can be a sibling DOM element when diffing\n * Fragments that have siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n */\nexport function diffChildren(\n\tparentDom,\n\trenderResult,\n\tnewParentVNode,\n\toldParentVNode,\n\tglobalContext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating\n) {\n\tlet i, j, oldVNode, childVNode, newDom, firstChildDom, refs;\n\n\t// This is a compression of oldParentVNode!=null && oldParentVNode != EMPTY_OBJ && oldParentVNode._children || EMPTY_ARR\n\t// as EMPTY_OBJ._children should be `undefined`.\n\tlet oldChildren = (oldParentVNode && oldParentVNode._children) || EMPTY_ARR;\n\n\tlet oldChildrenLength = oldChildren.length;\n\n\tnewParentVNode._children = [];\n\tfor (i = 0; i < renderResult.length; i++) {\n\t\tchildVNode = renderResult[i];\n\n\t\tif (childVNode == null || typeof childVNode == 'boolean') {\n\t\t\tchildVNode = newParentVNode._children[i] = null;\n\t\t}\n\t\t// If this newVNode is being reused (e.g. <div>{reuse}{reuse}</div>) in the same diff,\n\t\t// or we are rendering a component (e.g. setState) copy the oldVNodes so it can have\n\t\t// it's own DOM & etc. pointers\n\t\telse if (\n\t\t\ttypeof childVNode == 'string' ||\n\t\t\ttypeof childVNode == 'number' ||\n\t\t\t// eslint-disable-next-line valid-typeof\n\t\t\ttypeof childVNode == 'bigint'\n\t\t) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tnull,\n\t\t\t\tchildVNode,\n\t\t\t\tnull,\n\t\t\t\tnull,\n\t\t\t\tchildVNode\n\t\t\t);\n\t\t} else if (Array.isArray(childVNode)) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tFragment,\n\t\t\t\t{ children: childVNode },\n\t\t\t\tnull,\n\t\t\t\tnull,\n\t\t\t\tnull\n\t\t\t);\n\t\t} else if (childVNode._depth > 0) {\n\t\t\t// VNode is already in use, clone it. This can happen in the following\n\t\t\t// scenario:\n\t\t\t//   const reuse = <div />\n\t\t\t//   <div>{reuse}<span />{reuse}</div>\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tchildVNode.type,\n\t\t\t\tchildVNode.props,\n\t\t\t\tchildVNode.key,\n\t\t\t\tnull,\n\t\t\t\tchildVNode._original\n\t\t\t);\n\t\t} else {\n\t\t\tchildVNode = newParentVNode._children[i] = childVNode;\n\t\t}\n\n\t\t// Terser removes the `continue` here and wraps the loop body\n\t\t// in a `if (childVNode) { ... } condition\n\t\tif (childVNode == null) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tchildVNode._parent = newParentVNode;\n\t\tchildVNode._depth = newParentVNode._depth + 1;\n\n\t\t// Check if we find a corresponding element in oldChildren.\n\t\t// If found, delete the array item by setting to `undefined`.\n\t\t// We use `undefined`, as `null` is reserved for empty placeholders\n\t\t// (holes).\n\t\toldVNode = oldChildren[i];\n\n\t\tif (\n\t\t\toldVNode === null ||\n\t\t\t(oldVNode &&\n\t\t\t\tchildVNode.key == oldVNode.key &&\n\t\t\t\tchildVNode.type === oldVNode.type)\n\t\t) {\n\t\t\toldChildren[i] = undefined;\n\t\t} else {\n\t\t\t// Either oldVNode === undefined or oldChildrenLength > 0,\n\t\t\t// so after this loop oldVNode == null or oldVNode is a valid value.\n\t\t\tfor (j = 0; j < oldChildrenLength; j++) {\n\t\t\t\toldVNode = oldChildren[j];\n\t\t\t\t// If childVNode is unkeyed, we only match similarly unkeyed nodes, otherwise we match by key.\n\t\t\t\t// We always match by type (in either case).\n\t\t\t\tif (\n\t\t\t\t\toldVNode &&\n\t\t\t\t\tchildVNode.key == oldVNode.key &&\n\t\t\t\t\tchildVNode.type === oldVNode.type\n\t\t\t\t) {\n\t\t\t\t\toldChildren[j] = undefined;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\toldVNode = null;\n\t\t\t}\n\t\t}\n\n\t\toldVNode = oldVNode || EMPTY_OBJ;\n\n\t\t// Morph the old element into the new one, but don't append it to the dom yet\n\t\tdiff(\n\t\t\tparentDom,\n\t\t\tchildVNode,\n\t\t\toldVNode,\n\t\t\tglobalContext,\n\t\t\tisSvg,\n\t\t\texcessDomChildren,\n\t\t\tcommitQueue,\n\t\t\toldDom,\n\t\t\tisHydrating\n\t\t);\n\n\t\tnewDom = childVNode._dom;\n\n\t\tif ((j = childVNode.ref) && oldVNode.ref != j) {\n\t\t\tif (!refs) refs = [];\n\t\t\tif (oldVNode.ref) refs.push(oldVNode.ref, null, childVNode);\n\t\t\trefs.push(j, childVNode._component || newDom, childVNode);\n\t\t}\n\n\t\tif (newDom != null) {\n\t\t\tif (firstChildDom == null) {\n\t\t\t\tfirstChildDom = newDom;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\ttypeof childVNode.type == 'function' &&\n\t\t\t\tchildVNode._children != null && // Can be null if childVNode suspended\n\t\t\t\tchildVNode._children === oldVNode._children\n\t\t\t) {\n\t\t\t\tchildVNode._nextDom = oldDom = reorderChildren(\n\t\t\t\t\tchildVNode,\n\t\t\t\t\toldDom,\n\t\t\t\t\tparentDom\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\toldDom = placeChild(\n\t\t\t\t\tparentDom,\n\t\t\t\t\tchildVNode,\n\t\t\t\t\toldVNode,\n\t\t\t\t\toldChildren,\n\t\t\t\t\tnewDom,\n\t\t\t\t\toldDom\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Browsers will infer an option's `value` from `textContent` when\n\t\t\t// no value is present. This essentially bypasses our code to set it\n\t\t\t// later in `diff()`. It works fine in all browsers except for IE11\n\t\t\t// where it breaks setting `select.value`. There it will be always set\n\t\t\t// to an empty string. Re-applying an options value will fix that, so\n\t\t\t// there are probably some internal data structures that aren't\n\t\t\t// updated properly.\n\t\t\t//\n\t\t\t// To fix it we make sure to reset the inferred value, so that our own\n\t\t\t// value check in `diff()` won't be skipped.\n\t\t\tif (!isHydrating && newParentVNode.type === 'option') {\n\t\t\t\t// @ts-ignore We have validated that the type of parentDOM is 'option'\n\t\t\t\t// in the above check\n\t\t\t\tparentDom.value = '';\n\t\t\t} else if (typeof newParentVNode.type == 'function') {\n\t\t\t\t// Because the newParentVNode is Fragment-like, we need to set it's\n\t\t\t\t// _nextDom property to the nextSibling of its last child DOM node.\n\t\t\t\t//\n\t\t\t\t// `oldDom` contains the correct value here because if the last child\n\t\t\t\t// is a Fragment-like, then oldDom has already been set to that child's _nextDom.\n\t\t\t\t// If the last child is a DOM VNode, then oldDom will be set to that DOM\n\t\t\t\t// node's nextSibling.\n\t\t\t\tnewParentVNode._nextDom = oldDom;\n\t\t\t}\n\t\t} else if (\n\t\t\toldDom &&\n\t\t\toldVNode._dom == oldDom &&\n\t\t\toldDom.parentNode != parentDom\n\t\t) {\n\t\t\t// The above condition is to handle null placeholders. See test in placeholder.test.js:\n\t\t\t// `efficiently replace null placeholders in parent rerenders`\n\t\t\toldDom = getDomSibling(oldVNode);\n\t\t}\n\t}\n\n\tnewParentVNode._dom = firstChildDom;\n\n\t// Remove remaining oldChildren if there are any.\n\tfor (i = oldChildrenLength; i--; ) {\n\t\tif (oldChildren[i] != null) {\n\t\t\tif (\n\t\t\t\ttypeof newParentVNode.type == 'function' &&\n\t\t\t\toldChildren[i]._dom != null &&\n\t\t\t\toldChildren[i]._dom == newParentVNode._nextDom\n\t\t\t) {\n\t\t\t\t// If the newParentVNode.__nextDom points to a dom node that is about to\n\t\t\t\t// be unmounted, then get the next sibling of that vnode and set\n\t\t\t\t// _nextDom to it\n\t\t\t\tnewParentVNode._nextDom = getDomSibling(oldParentVNode, i + 1);\n\t\t\t}\n\n\t\t\tunmount(oldChildren[i], oldChildren[i]);\n\t\t}\n\t}\n\n\t// Set refs only after unmount\n\tif (refs) {\n\t\tfor (i = 0; i < refs.length; i++) {\n\t\t\tapplyRef(refs[i], refs[++i], refs[++i]);\n\t\t}\n\t}\n}\n\nfunction reorderChildren(childVNode, oldDom, parentDom) {\n\tfor (let tmp = 0; tmp < childVNode._children.length; tmp++) {\n\t\tlet vnode = childVNode._children[tmp];\n\t\tif (vnode) {\n\t\t\t// We typically enter this code path on sCU bailout, where we copy\n\t\t\t// oldVNode._children to newVNode._children. If that is the case, we need\n\t\t\t// to update the old children's _parent pointer to point to the newVNode\n\t\t\t// (childVNode here).\n\t\t\tvnode._parent = childVNode;\n\n\t\t\tif (typeof vnode.type == 'function') {\n\t\t\t\toldDom = reorderChildren(vnode, oldDom, parentDom);\n\t\t\t} else {\n\t\t\t\toldDom = placeChild(\n\t\t\t\t\tparentDom,\n\t\t\t\t\tvnode,\n\t\t\t\t\tvnode,\n\t\t\t\t\tchildVNode._children,\n\t\t\t\t\tvnode._dom,\n\t\t\t\t\toldDom\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn oldDom;\n}\n\n/**\n * Flatten and loop through the children of a virtual node\n * @param {import('../index').ComponentChildren} children The unflattened\n * children of a virtual node\n * @returns {import('../internal').VNode[]}\n */\nexport function toChildArray(children, out) {\n\tout = out || [];\n\tif (children == null || typeof children == 'boolean') {\n\t} else if (Array.isArray(children)) {\n\t\tchildren.some(child => {\n\t\t\ttoChildArray(child, out);\n\t\t});\n\t} else {\n\t\tout.push(children);\n\t}\n\treturn out;\n}\n\nfunction placeChild(\n\tparentDom,\n\tchildVNode,\n\toldVNode,\n\toldChildren,\n\tnewDom,\n\toldDom\n) {\n\tlet nextDom;\n\tif (childVNode._nextDom !== undefined) {\n\t\t// Only Fragments or components that return Fragment like VNodes will\n\t\t// have a non-undefined _nextDom. Continue the diff from the sibling\n\t\t// of last DOM child of this child VNode\n\t\tnextDom = childVNode._nextDom;\n\n\t\t// Eagerly cleanup _nextDom. We don't need to persist the value because\n\t\t// it is only used by `diffChildren` to determine where to resume the diff after\n\t\t// diffing Components and Fragments. Once we store it the nextDOM local var, we\n\t\t// can clean up the property\n\t\tchildVNode._nextDom = undefined;\n\t} else if (\n\t\toldVNode == null ||\n\t\tnewDom != oldDom ||\n\t\tnewDom.parentNode == null\n\t) {\n\t\touter: if (oldDom == null || oldDom.parentNode !== parentDom) {\n\t\t\tparentDom.appendChild(newDom);\n\t\t\tnextDom = null;\n\t\t} else {\n\t\t\t// `j<oldChildrenLength; j+=2` is an alternative to `j++<oldChildrenLength/2`\n\t\t\tfor (\n\t\t\t\tlet sibDom = oldDom, j = 0;\n\t\t\t\t(sibDom = sibDom.nextSibling) && j < oldChildren.length;\n\t\t\t\tj += 2\n\t\t\t) {\n\t\t\t\tif (sibDom == newDom) {\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t}\n\t\t\tparentDom.insertBefore(newDom, oldDom);\n\t\t\tnextDom = oldDom;\n\t\t}\n\t}\n\n\t// If we have pre-calculated the nextDOM node, use it. Else calculate it now\n\t// Strictly check for `undefined` here cuz `null` is a valid value of `nextDom`.\n\t// See more detail in create-element.js:createVNode\n\tif (nextDom !== undefined) {\n\t\toldDom = nextDom;\n\t} else {\n\t\toldDom = newDom.nextSibling;\n\t}\n\n\treturn oldDom;\n}\n","import { IS_NON_DIMENSIONAL } from '../constants';\nimport options from '../options';\n\n/**\n * Diff the old and new properties of a VNode and apply changes to the DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to apply\n * changes to\n * @param {object} newProps The new props\n * @param {object} oldProps The old props\n * @param {boolean} isSvg Whether or not this node is an SVG node\n * @param {boolean} hydrate Whether or not we are in hydration mode\n */\nexport function diffProps(dom, newProps, oldProps, isSvg, hydrate) {\n\tlet i;\n\n\tfor (i in oldProps) {\n\t\tif (i !== 'children' && i !== 'key' && !(i in newProps)) {\n\t\t\tsetProperty(dom, i, null, oldProps[i], isSvg);\n\t\t}\n\t}\n\n\tfor (i in newProps) {\n\t\tif (\n\t\t\t(!hydrate || typeof newProps[i] == 'function') &&\n\t\t\ti !== 'children' &&\n\t\t\ti !== 'key' &&\n\t\t\ti !== 'value' &&\n\t\t\ti !== 'checked' &&\n\t\t\toldProps[i] !== newProps[i]\n\t\t) {\n\t\t\tsetProperty(dom, i, newProps[i], oldProps[i], isSvg);\n\t\t}\n\t}\n}\n\nfunction setStyle(style, key, value) {\n\tif (key[0] === '-') {\n\t\tstyle.setProperty(key, value);\n\t} else if (value == null) {\n\t\tstyle[key] = '';\n\t} else if (typeof value != 'number' || IS_NON_DIMENSIONAL.test(key)) {\n\t\tstyle[key] = value;\n\t} else {\n\t\tstyle[key] = value + 'px';\n\t}\n}\n\n/**\n * Set a property value on a DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to modify\n * @param {string} name The name of the property to set\n * @param {*} value The value to set the property to\n * @param {*} oldValue The old value the property had\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node or not\n */\nexport function setProperty(dom, name, value, oldValue, isSvg) {\n\tlet useCapture;\n\n\to: if (name === 'style') {\n\t\tif (typeof value == 'string') {\n\t\t\tdom.style.cssText = value;\n\t\t} else {\n\t\t\tif (typeof oldValue == 'string') {\n\t\t\t\tdom.style.cssText = oldValue = '';\n\t\t\t}\n\n\t\t\tif (oldValue) {\n\t\t\t\tfor (name in oldValue) {\n\t\t\t\t\tif (!(value && name in value)) {\n\t\t\t\t\t\tsetStyle(dom.style, name, '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (value) {\n\t\t\t\tfor (name in value) {\n\t\t\t\t\tif (!oldValue || value[name] !== oldValue[name]) {\n\t\t\t\t\t\tsetStyle(dom.style, name, value[name]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// Benchmark for comparison: https://esbench.com/bench/574c954bdb965b9a00965ac6\n\telse if (name[0] === 'o' && name[1] === 'n') {\n\t\tuseCapture = name !== (name = name.replace(/Capture$/, ''));\n\n\t\t// Infer correct casing for DOM built-in events:\n\t\tif (name.toLowerCase() in dom) name = name.toLowerCase().slice(2);\n\t\telse name = name.slice(2);\n\n\t\tif (!dom._listeners) dom._listeners = {};\n\t\tdom._listeners[name + useCapture] = value;\n\n\t\tif (value) {\n\t\t\tif (!oldValue) {\n\t\t\t\tconst handler = useCapture ? eventProxyCapture : eventProxy;\n\t\t\t\tdom.addEventListener(name, handler, useCapture);\n\t\t\t}\n\t\t} else {\n\t\t\tconst handler = useCapture ? eventProxyCapture : eventProxy;\n\t\t\tdom.removeEventListener(name, handler, useCapture);\n\t\t}\n\t} else if (name !== 'dangerouslySetInnerHTML') {\n\t\tif (isSvg) {\n\t\t\t// Normalize incorrect prop usage for SVG:\n\t\t\t// - xlink:href / xlinkHref --> href (xlink:href was removed from SVG and isn't needed)\n\t\t\t// - className --> class\n\t\t\tname = name.replace(/xlink[H:h]/, 'h').replace(/sName$/, 's');\n\t\t} else if (\n\t\t\tname !== 'href' &&\n\t\t\tname !== 'list' &&\n\t\t\tname !== 'form' &&\n\t\t\t// Default value in browsers is `-1` and an empty string is\n\t\t\t// cast to `0` instead\n\t\t\tname !== 'tabIndex' &&\n\t\t\tname !== 'download' &&\n\t\t\tname in dom\n\t\t) {\n\t\t\ttry {\n\t\t\t\tdom[name] = value == null ? '' : value;\n\t\t\t\t// labelled break is 1b smaller here than a return statement (sorry)\n\t\t\t\tbreak o;\n\t\t\t} catch (e) {}\n\t\t}\n\n\t\t// ARIA-attributes have a different notion of boolean values.\n\t\t// The value `false` is different from the attribute not\n\t\t// existing on the DOM, so we can't remove it. For non-boolean\n\t\t// ARIA-attributes we could treat false as a removal, but the\n\t\t// amount of exceptions would cost us too many bytes. On top of\n\t\t// that other VDOM frameworks also always stringify `false`.\n\n\t\tif (typeof value === 'function') {\n\t\t\t// never serialize functions as attribute values\n\t\t} else if (\n\t\t\tvalue != null &&\n\t\t\t(value !== false || (name[0] === 'a' && name[1] === 'r'))\n\t\t) {\n\t\t\tdom.setAttribute(name, value);\n\t\t} else {\n\t\t\tdom.removeAttribute(name);\n\t\t}\n\t}\n}\n\n/**\n * Proxy an event to hooked event handlers\n * @param {Event} e The event object from the browser\n * @private\n */\nfunction eventProxy(e) {\n\tthis._listeners[e.type + false](options.event ? options.event(e) : e);\n}\n\nfunction eventProxyCapture(e) {\n\tthis._listeners[e.type + true](options.event ? options.event(e) : e);\n}\n","import { EMPTY_OBJ, EMPTY_ARR } from '../constants';\nimport { Component } from '../component';\nimport { Fragment } from '../create-element';\nimport { diffChildren } from './children';\nimport { diffProps, setProperty } from './props';\nimport { assign, removeNode } from '../util';\nimport options from '../options';\n\n/**\n * Diff two virtual nodes and apply proper changes to the DOM\n * @param {import('../internal').PreactElement} parentDom The parent of the DOM element\n * @param {import('../internal').VNode} newVNode The new virtual node\n * @param {import('../internal').VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object. Modified by getChildContext\n * @param {boolean} isSvg Whether or not this element is an SVG node\n * @param {Array<import('../internal').PreactElement>} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {import('../internal').PreactElement} oldDom The current attached DOM\n * element any new dom elements should be placed around. Likely `null` on first\n * render (except when hydrating). Can be a sibling DOM element when diffing\n * Fragments that have siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} [isHydrating] Whether or not we are in hydration\n */\nexport function diff(\n\tparentDom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating\n) {\n\tlet tmp,\n\t\tnewType = newVNode.type;\n\n\t// When passing through createElement it assigns the object\n\t// constructor as undefined. This to prevent JSON-injection.\n\tif (newVNode.constructor !== undefined) return null;\n\n\t// If the previous diff bailed out, resume creating/hydrating.\n\tif (oldVNode._hydrating != null) {\n\t\tisHydrating = oldVNode._hydrating;\n\t\toldDom = newVNode._dom = oldVNode._dom;\n\t\t// if we resume, we want the tree to be \"unlocked\"\n\t\tnewVNode._hydrating = null;\n\t\texcessDomChildren = [oldDom];\n\t}\n\n\tif ((tmp = options._diff)) tmp(newVNode);\n\n\ttry {\n\t\touter: if (typeof newType == 'function') {\n\t\t\tlet c, isNew, oldProps, oldState, snapshot, clearProcessingException;\n\t\t\tlet newProps = newVNode.props;\n\n\t\t\t// Necessary for createContext api. Setting this property will pass\n\t\t\t// the context value as `this.context` just for this component.\n\t\t\ttmp = newType.contextType;\n\t\t\tlet provider = tmp && globalContext[tmp._id];\n\t\t\tlet componentContext = tmp\n\t\t\t\t? provider\n\t\t\t\t\t? provider.props.value\n\t\t\t\t\t: tmp._defaultValue\n\t\t\t\t: globalContext;\n\n\t\t\t// Get component and set it to `c`\n\t\t\tif (oldVNode._component) {\n\t\t\t\tc = newVNode._component = oldVNode._component;\n\t\t\t\tclearProcessingException = c._processingException = c._pendingError;\n\t\t\t} else {\n\t\t\t\t// Instantiate the new component\n\t\t\t\tif ('prototype' in newType && newType.prototype.render) {\n\t\t\t\t\t// @ts-ignore The check above verifies that newType is suppose to be constructed\n\t\t\t\t\tnewVNode._component = c = new newType(newProps, componentContext); // eslint-disable-line new-cap\n\t\t\t\t} else {\n\t\t\t\t\t// @ts-ignore Trust me, Component implements the interface we want\n\t\t\t\t\tnewVNode._component = c = new Component(newProps, componentContext);\n\t\t\t\t\tc.constructor = newType;\n\t\t\t\t\tc.render = doRender;\n\t\t\t\t}\n\t\t\t\tif (provider) provider.sub(c);\n\n\t\t\t\tc.props = newProps;\n\t\t\t\tif (!c.state) c.state = {};\n\t\t\t\tc.context = componentContext;\n\t\t\t\tc._globalContext = globalContext;\n\t\t\t\tisNew = c._dirty = true;\n\t\t\t\tc._renderCallbacks = [];\n\t\t\t}\n\n\t\t\t// Invoke getDerivedStateFromProps\n\t\t\tif (c._nextState == null) {\n\t\t\t\tc._nextState = c.state;\n\t\t\t}\n\t\t\tif (newType.getDerivedStateFromProps != null) {\n\t\t\t\tif (c._nextState == c.state) {\n\t\t\t\t\tc._nextState = assign({}, c._nextState);\n\t\t\t\t}\n\n\t\t\t\tassign(\n\t\t\t\t\tc._nextState,\n\t\t\t\t\tnewType.getDerivedStateFromProps(newProps, c._nextState)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toldProps = c.props;\n\t\t\toldState = c.state;\n\n\t\t\t// Invoke pre-render lifecycle methods\n\t\t\tif (isNew) {\n\t\t\t\tif (\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tc.componentWillMount != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillMount();\n\t\t\t\t}\n\n\t\t\t\tif (c.componentDidMount != null) {\n\t\t\t\t\tc._renderCallbacks.push(c.componentDidMount);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tnewProps !== oldProps &&\n\t\t\t\t\tc.componentWillReceiveProps != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillReceiveProps(newProps, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t(!c._force &&\n\t\t\t\t\t\tc.shouldComponentUpdate != null &&\n\t\t\t\t\t\tc.shouldComponentUpdate(\n\t\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\t\tc._nextState,\n\t\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t\t) === false) ||\n\t\t\t\t\tnewVNode._original === oldVNode._original\n\t\t\t\t) {\n\t\t\t\t\tc.props = newProps;\n\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t\t// More info about this here: https://gist.github.com/JoviDeCroock/bec5f2ce93544d2e6070ef8e0036e4e8\n\t\t\t\t\tif (newVNode._original !== oldVNode._original) c._dirty = false;\n\t\t\t\t\tc._vnode = newVNode;\n\t\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\t\tnewVNode._children.forEach(vnode => {\n\t\t\t\t\t\tif (vnode) vnode._parent = newVNode;\n\t\t\t\t\t});\n\t\t\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\t\t\tcommitQueue.push(c);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\n\t\t\t\tif (c.componentWillUpdate != null) {\n\t\t\t\t\tc.componentWillUpdate(newProps, c._nextState, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (c.componentDidUpdate != null) {\n\t\t\t\t\tc._renderCallbacks.push(() => {\n\t\t\t\t\t\tc.componentDidUpdate(oldProps, oldState, snapshot);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tc.context = componentContext;\n\t\t\tc.props = newProps;\n\t\t\tc.state = c._nextState;\n\n\t\t\tif ((tmp = options._render)) tmp(newVNode);\n\n\t\t\tc._dirty = false;\n\t\t\tc._vnode = newVNode;\n\t\t\tc._parentDom = parentDom;\n\n\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t// Handle setState called in render, see #2553\n\t\t\tc.state = c._nextState;\n\n\t\t\tif (c.getChildContext != null) {\n\t\t\t\tglobalContext = assign(assign({}, globalContext), c.getChildContext());\n\t\t\t}\n\n\t\t\tif (!isNew && c.getSnapshotBeforeUpdate != null) {\n\t\t\t\tsnapshot = c.getSnapshotBeforeUpdate(oldProps, oldState);\n\t\t\t}\n\n\t\t\tlet isTopLevelFragment =\n\t\t\t\ttmp != null && tmp.type === Fragment && tmp.key == null;\n\t\t\tlet renderResult = isTopLevelFragment ? tmp.props.children : tmp;\n\n\t\t\tdiffChildren(\n\t\t\t\tparentDom,\n\t\t\t\tArray.isArray(renderResult) ? renderResult : [renderResult],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tisSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\toldDom,\n\t\t\t\tisHydrating\n\t\t\t);\n\n\t\t\tc.base = newVNode._dom;\n\n\t\t\t// We successfully rendered this VNode, unset any stored hydration/bailout state:\n\t\t\tnewVNode._hydrating = null;\n\n\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\tcommitQueue.push(c);\n\t\t\t}\n\n\t\t\tif (clearProcessingException) {\n\t\t\t\tc._pendingError = c._processingException = null;\n\t\t\t}\n\n\t\t\tc._force = false;\n\t\t} else if (\n\t\t\texcessDomChildren == null &&\n\t\t\tnewVNode._original === oldVNode._original\n\t\t) {\n\t\t\tnewVNode._children = oldVNode._children;\n\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t} else {\n\t\t\tnewVNode._dom = diffElementNodes(\n\t\t\t\toldVNode._dom,\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tisSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\tisHydrating\n\t\t\t);\n\t\t}\n\n\t\tif ((tmp = options.diffed)) tmp(newVNode);\n\t} catch (e) {\n\t\tnewVNode._original = null;\n\t\t// if hydrating or creating initial tree, bailout preserves DOM:\n\t\tif (isHydrating || excessDomChildren != null) {\n\t\t\tnewVNode._dom = oldDom;\n\t\t\tnewVNode._hydrating = !!isHydrating;\n\t\t\texcessDomChildren[excessDomChildren.indexOf(oldDom)] = null;\n\t\t\t// ^ could possibly be simplified to:\n\t\t\t// excessDomChildren.length = 0;\n\t\t}\n\t\toptions._catchError(e, newVNode, oldVNode);\n\t}\n}\n\n/**\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {import('../internal').VNode} root\n */\nexport function commitRoot(commitQueue, root) {\n\tif (options._commit) options._commit(root, commitQueue);\n\n\tcommitQueue.some(c => {\n\t\ttry {\n\t\t\t// @ts-ignore Reuse the commitQueue variable here so the type changes\n\t\t\tcommitQueue = c._renderCallbacks;\n\t\t\tc._renderCallbacks = [];\n\t\t\tcommitQueue.some(cb => {\n\t\t\t\t// @ts-ignore See above ts-ignore on commitQueue\n\t\t\t\tcb.call(c);\n\t\t\t});\n\t\t} catch (e) {\n\t\t\toptions._catchError(e, c._vnode);\n\t\t}\n\t});\n}\n\n/**\n * Diff two virtual nodes representing DOM element\n * @param {import('../internal').PreactElement} dom The DOM element representing\n * the virtual nodes being diffed\n * @param {import('../internal').VNode} newVNode The new virtual node\n * @param {import('../internal').VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node\n * @param {*} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @returns {import('../internal').PreactElement}\n */\nfunction diffElementNodes(\n\tdom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\tisHydrating\n) {\n\tlet oldProps = oldVNode.props;\n\tlet newProps = newVNode.props;\n\tlet nodeType = newVNode.type;\n\tlet i = 0;\n\n\t// Tracks entering and exiting SVG namespace when descending through the tree.\n\tif (nodeType === 'svg') isSvg = true;\n\n\tif (excessDomChildren != null) {\n\t\tfor (; i < excessDomChildren.length; i++) {\n\t\t\tconst child = excessDomChildren[i];\n\n\t\t\t// if newVNode matches an element in excessDomChildren or the `dom`\n\t\t\t// argument matches an element in excessDomChildren, remove it from\n\t\t\t// excessDomChildren so it isn't later removed in diffChildren\n\t\t\tif (\n\t\t\t\tchild &&\n\t\t\t\t(child === dom ||\n\t\t\t\t\t(nodeType ? child.localName == nodeType : child.nodeType == 3))\n\t\t\t) {\n\t\t\t\tdom = child;\n\t\t\t\texcessDomChildren[i] = null;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (dom == null) {\n\t\tif (nodeType === null) {\n\t\t\t// @ts-ignore createTextNode returns Text, we expect PreactElement\n\t\t\treturn document.createTextNode(newProps);\n\t\t}\n\n\t\tif (isSvg) {\n\t\t\tdom = document.createElementNS(\n\t\t\t\t'http://www.w3.org/2000/svg',\n\t\t\t\t// @ts-ignore We know `newVNode.type` is a string\n\t\t\t\tnodeType\n\t\t\t);\n\t\t} else {\n\t\t\tdom = document.createElement(\n\t\t\t\t// @ts-ignore We know `newVNode.type` is a string\n\t\t\t\tnodeType,\n\t\t\t\tnewProps.is && newProps\n\t\t\t);\n\t\t}\n\n\t\t// we created a new parent, so none of the previously attached children can be reused:\n\t\texcessDomChildren = null;\n\t\t// we are creating a new node, so we can assume this is a new subtree (in case we are hydrating), this deopts the hydrate\n\t\tisHydrating = false;\n\t}\n\n\tif (nodeType === null) {\n\t\t// During hydration, we still have to split merged text from SSR'd HTML.\n\t\tif (oldProps !== newProps && (!isHydrating || dom.data !== newProps)) {\n\t\t\tdom.data = newProps;\n\t\t}\n\t} else {\n\t\t// If excessDomChildren was not null, repopulate it with the current element's children:\n\t\texcessDomChildren =\n\t\t\texcessDomChildren && EMPTY_ARR.slice.call(dom.childNodes);\n\n\t\toldProps = oldVNode.props || EMPTY_OBJ;\n\n\t\tlet oldHtml = oldProps.dangerouslySetInnerHTML;\n\t\tlet newHtml = newProps.dangerouslySetInnerHTML;\n\n\t\t// During hydration, props are not diffed at all (including dangerouslySetInnerHTML)\n\t\t// @TODO we should warn in debug mode when props don't match here.\n\t\tif (!isHydrating) {\n\t\t\t// But, if we are in a situation where we are using existing DOM (e.g. replaceNode)\n\t\t\t// we should read the existing DOM attributes to diff them\n\t\t\tif (excessDomChildren != null) {\n\t\t\t\toldProps = {};\n\t\t\t\tfor (let i = 0; i < dom.attributes.length; i++) {\n\t\t\t\t\toldProps[dom.attributes[i].name] = dom.attributes[i].value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (newHtml || oldHtml) {\n\t\t\t\t// Avoid re-applying the same '__html' if it did not changed between re-render\n\t\t\t\tif (\n\t\t\t\t\t!newHtml ||\n\t\t\t\t\t((!oldHtml || newHtml.__html != oldHtml.__html) &&\n\t\t\t\t\t\tnewHtml.__html !== dom.innerHTML)\n\t\t\t\t) {\n\t\t\t\t\tdom.innerHTML = (newHtml && newHtml.__html) || '';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tdiffProps(dom, newProps, oldProps, isSvg, isHydrating);\n\n\t\t// If the new vnode didn't have dangerouslySetInnerHTML, diff its children\n\t\tif (newHtml) {\n\t\t\tnewVNode._children = [];\n\t\t} else {\n\t\t\ti = newVNode.props.children;\n\t\t\tdiffChildren(\n\t\t\t\tdom,\n\t\t\t\tArray.isArray(i) ? i : [i],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tisSvg && nodeType !== 'foreignObject',\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\tdom.firstChild,\n\t\t\t\tisHydrating\n\t\t\t);\n\n\t\t\t// Remove children that are not part of any vnode.\n\t\t\tif (excessDomChildren != null) {\n\t\t\t\tfor (i = excessDomChildren.length; i--; ) {\n\t\t\t\t\tif (excessDomChildren[i] != null) removeNode(excessDomChildren[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// (as above, don't diff props during hydration)\n\t\tif (!isHydrating) {\n\t\t\tif (\n\t\t\t\t'value' in newProps &&\n\t\t\t\t(i = newProps.value) !== undefined &&\n\t\t\t\t// #2756 For the <progress>-element the initial value is 0,\n\t\t\t\t// despite the attribute not being present. When the attribute\n\t\t\t\t// is missing the progress bar is treated as indeterminate.\n\t\t\t\t// To fix that we'll always update it when it is 0 for progress elements\n\t\t\t\t(i !== dom.value || (nodeType === 'progress' && !i))\n\t\t\t) {\n\t\t\t\tsetProperty(dom, 'value', i, oldProps.value, false);\n\t\t\t}\n\t\t\tif (\n\t\t\t\t'checked' in newProps &&\n\t\t\t\t(i = newProps.checked) !== undefined &&\n\t\t\t\ti !== dom.checked\n\t\t\t) {\n\t\t\t\tsetProperty(dom, 'checked', i, oldProps.checked, false);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn dom;\n}\n\n/**\n * Invoke or update a ref, depending on whether it is a function or object ref.\n * @param {object|function} ref\n * @param {any} value\n * @param {import('../internal').VNode} vnode\n */\nexport function applyRef(ref, value, vnode) {\n\ttry {\n\t\tif (typeof ref == 'function') ref(value);\n\t\telse ref.current = value;\n\t} catch (e) {\n\t\toptions._catchError(e, vnode);\n\t}\n}\n\n/**\n * Unmount a virtual node from the tree and apply DOM changes\n * @param {import('../internal').VNode} vnode The virtual node to unmount\n * @param {import('../internal').VNode} parentVNode The parent of the VNode that\n * initiated the unmount\n * @param {boolean} [skipRemove] Flag that indicates that a parent node of the\n * current element is already detached from the DOM.\n */\nexport function unmount(vnode, parentVNode, skipRemove) {\n\tlet r;\n\tif (options.unmount) options.unmount(vnode);\n\n\tif ((r = vnode.ref)) {\n\t\tif (!r.current || r.current === vnode._dom) applyRef(r, null, parentVNode);\n\t}\n\n\tlet dom;\n\tif (!skipRemove && typeof vnode.type != 'function') {\n\t\tskipRemove = (dom = vnode._dom) != null;\n\t}\n\n\t// Must be set to `undefined` to properly clean up `_nextDom`\n\t// for which `null` is a valid value. See comment in `create-element.js`\n\tvnode._dom = vnode._nextDom = undefined;\n\n\tif ((r = vnode._component) != null) {\n\t\tif (r.componentWillUnmount) {\n\t\t\ttry {\n\t\t\t\tr.componentWillUnmount();\n\t\t\t} catch (e) {\n\t\t\t\toptions._catchError(e, parentVNode);\n\t\t\t}\n\t\t}\n\n\t\tr.base = r._parentDom = null;\n\t}\n\n\tif ((r = vnode._children)) {\n\t\tfor (let i = 0; i < r.length; i++) {\n\t\t\tif (r[i]) unmount(r[i], parentVNode, skipRemove);\n\t\t}\n\t}\n\n\tif (dom != null) removeNode(dom);\n}\n\n/** The `.render()` method for a PFC backing instance. */\nfunction doRender(props, state, context) {\n\treturn this.constructor(props, context);\n}\n","import {\n\trender as preactRender,\n\thydrate as preactHydrate,\n\toptions,\n\ttoChildArray,\n\tComponent\n} from 'preact';\n\nexport const REACT_ELEMENT_TYPE =\n\t(typeof Symbol != 'undefined' && Symbol.for && Symbol.for('react.element')) ||\n\t0xeac7;\n\nconst CAMEL_PROPS = /^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/;\n\n// Input types for which onchange should not be converted to oninput.\n// type=\"file|checkbox|radio\", plus \"range\" in IE11.\n// (IE11 doesn't support Symbol, which we use here to turn `rad` into `ra` which matches \"range\")\nconst onChangeInputType = type =>\n\t(typeof Symbol != 'undefined' && typeof Symbol() == 'symbol'\n\t\t? /fil|che|rad/i\n\t\t: /fil|che|ra/i\n\t).test(type);\n\n// Some libraries like `react-virtualized` explicitly check for this.\nComponent.prototype.isReactComponent = {};\n\n// `UNSAFE_*` lifecycle hooks\n// Preact only ever invokes the unprefixed methods.\n// Here we provide a base \"fallback\" implementation that calls any defined UNSAFE_ prefixed method.\n// - If a component defines its own `componentDidMount()` (including via defineProperty), use that.\n// - If a component defines `UNSAFE_componentDidMount()`, `componentDidMount` is the alias getter/setter.\n// - If anything assigns to an `UNSAFE_*` property, the assignment is forwarded to the unprefixed property.\n// See https://github.com/preactjs/preact/issues/1941\n[\n\t'componentWillMount',\n\t'componentWillReceiveProps',\n\t'componentWillUpdate'\n].forEach(key => {\n\tObject.defineProperty(Component.prototype, key, {\n\t\tconfigurable: true,\n\t\tget() {\n\t\t\treturn this['UNSAFE_' + key];\n\t\t},\n\t\tset(v) {\n\t\t\tObject.defineProperty(this, key, {\n\t\t\t\tconfigurable: true,\n\t\t\t\twritable: true,\n\t\t\t\tvalue: v\n\t\t\t});\n\t\t}\n\t});\n});\n\n/**\n * Proxy render() since React returns a Component reference.\n * @param {import('./internal').VNode} vnode VNode tree to render\n * @param {import('./internal').PreactElement} parent DOM node to render vnode tree into\n * @param {() => void} [callback] Optional callback that will be called after rendering\n * @returns {import('./internal').Component | null} The root component reference or null\n */\nexport function render(vnode, parent, callback) {\n\t// React destroys any existing DOM nodes, see #1727\n\t// ...but only on the first render, see #1828\n\tif (parent._children == null) {\n\t\tparent.textContent = '';\n\t}\n\n\tpreactRender(vnode, parent);\n\tif (typeof callback == 'function') callback();\n\n\treturn vnode ? vnode._component : null;\n}\n\nexport function hydrate(vnode, parent, callback) {\n\tpreactHydrate(vnode, parent);\n\tif (typeof callback == 'function') callback();\n\n\treturn vnode ? vnode._component : null;\n}\n\nlet oldEventHook = options.event;\noptions.event = e => {\n\tif (oldEventHook) e = oldEventHook(e);\n\te.persist = empty;\n\te.isPropagationStopped = isPropagationStopped;\n\te.isDefaultPrevented = isDefaultPrevented;\n\treturn (e.nativeEvent = e);\n};\n\nfunction empty() {}\n\nfunction isPropagationStopped() {\n\treturn this.cancelBubble;\n}\n\nfunction isDefaultPrevented() {\n\treturn this.defaultPrevented;\n}\n\nlet classNameDescriptor = {\n\tconfigurable: true,\n\tget() {\n\t\treturn this.class;\n\t}\n};\n\nlet oldVNodeHook = options.vnode;\noptions.vnode = vnode => {\n\tlet type = vnode.type;\n\tlet props = vnode.props;\n\tlet normalizedProps = props;\n\n\t// only normalize props on Element nodes\n\tif (typeof type === 'string') {\n\t\tnormalizedProps = {};\n\n\t\tfor (let i in props) {\n\t\t\tlet value = props[i];\n\n\t\t\tif (i === 'value' && 'defaultValue' in props && value == null) {\n\t\t\t\t// Skip applying value if it is null/undefined and we already set\n\t\t\t\t// a default value\n\t\t\t\tcontinue;\n\t\t\t} else if (\n\t\t\t\ti === 'defaultValue' &&\n\t\t\t\t'value' in props &&\n\t\t\t\tprops.value == null\n\t\t\t) {\n\t\t\t\t// `defaultValue` is treated as a fallback `value` when a value prop is present but null/undefined.\n\t\t\t\t// `defaultValue` for Elements with no value prop is the same as the DOM defaultValue property.\n\t\t\t\ti = 'value';\n\t\t\t} else if (i === 'download' && value === true) {\n\t\t\t\t// Calling `setAttribute` with a truthy value will lead to it being\n\t\t\t\t// passed as a stringified value, e.g. `download=\"true\"`. React\n\t\t\t\t// converts it to an empty string instead, otherwise the attribute\n\t\t\t\t// value will be used as the file name and the file will be called\n\t\t\t\t// \"true\" upon downloading it.\n\t\t\t\tvalue = '';\n\t\t\t} else if (/ondoubleclick/i.test(i)) {\n\t\t\t\ti = 'ondblclick';\n\t\t\t} else if (\n\t\t\t\t/^onchange(textarea|input)/i.test(i + type) &&\n\t\t\t\t!onChangeInputType(props.type)\n\t\t\t) {\n\t\t\t\ti = 'oninput';\n\t\t\t} else if (/^on(Ani|Tra|Tou|BeforeInp)/.test(i)) {\n\t\t\t\ti = i.toLowerCase();\n\t\t\t} else if (CAMEL_PROPS.test(i)) {\n\t\t\t\ti = i.replace(/[A-Z0-9]/, '-$&').toLowerCase();\n\t\t\t} else if (value === null) {\n\t\t\t\tvalue = undefined;\n\t\t\t}\n\n\t\t\tnormalizedProps[i] = value;\n\t\t}\n\n\t\t// Add support for array select values: <select multiple value={[]} />\n\t\tif (\n\t\t\ttype == 'select' &&\n\t\t\tnormalizedProps.multiple &&\n\t\t\tArray.isArray(normalizedProps.value)\n\t\t) {\n\t\t\t// forEach() always returns undefined, which we abuse here to unset the value prop.\n\t\t\tnormalizedProps.value = toChildArray(props.children).forEach(child => {\n\t\t\t\tchild.props.selected =\n\t\t\t\t\tnormalizedProps.value.indexOf(child.props.value) != -1;\n\t\t\t});\n\t\t}\n\n\t\t// Adding support for defaultValue in select tag\n\t\tif (type == 'select' && normalizedProps.defaultValue != null) {\n\t\t\tnormalizedProps.value = toChildArray(props.children).forEach(child => {\n\t\t\t\tif (normalizedProps.multiple) {\n\t\t\t\t\tchild.props.selected =\n\t\t\t\t\t\tnormalizedProps.defaultValue.indexOf(child.props.value) != -1;\n\t\t\t\t} else {\n\t\t\t\t\tchild.props.selected =\n\t\t\t\t\t\tnormalizedProps.defaultValue == child.props.value;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tvnode.props = normalizedProps;\n\t}\n\n\tif (type && props.class != props.className) {\n\t\tclassNameDescriptor.enumerable = 'className' in props;\n\t\tif (props.className != null) normalizedProps.class = props.className;\n\t\tObject.defineProperty(normalizedProps, 'className', classNameDescriptor);\n\t}\n\n\tvnode.$$typeof = REACT_ELEMENT_TYPE;\n\n\tif (oldVNodeHook) oldVNodeHook(vnode);\n};\n\n// Only needed for react-relay\nlet currentComponent;\nconst oldBeforeRender = options._render;\noptions._render = function(vnode) {\n\tif (oldBeforeRender) {\n\t\toldBeforeRender(vnode);\n\t}\n\tcurrentComponent = vnode._component;\n};\n\n// This is a very very private internal function for React it\n// is used to sort-of do runtime dependency injection. So far\n// only `react-relay` makes use of it. It uses it to read the\n// context value.\nexport const __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = {\n\tReactCurrentDispatcher: {\n\t\tcurrent: {\n\t\t\treadContext(context) {\n\t\t\t\treturn currentComponent._globalContext[context._id].props.value;\n\t\t\t}\n\t\t}\n\t}\n};\n","import { assign } from './util';\nimport { createVNode } from './create-element';\n\n/**\n * Clones the given VNode, optionally adding attributes/props and replacing its children.\n * @param {import('./internal').VNode} vnode The virtual DOM element to clone\n * @param {object} props Attributes/props to add when cloning\n * @param {Array<import('./internal').ComponentChildren>} rest Any additional arguments will be used as replacement children.\n * @returns {import('./internal').VNode}\n */\nexport function cloneElement(vnode, props, children) {\n\tlet normalizedProps = assign({}, vnode.props),\n\t\tkey,\n\t\tref,\n\t\ti;\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse normalizedProps[i] = props[i];\n\t}\n\n\tif (arguments.length > 3) {\n\t\tchildren = [children];\n\t\tfor (i = 3; i < arguments.length; i++) {\n\t\t\tchildren.push(arguments[i]);\n\t\t}\n\t}\n\tif (children != null) {\n\t\tnormalizedProps.children = children;\n\t}\n\n\treturn createVNode(\n\t\tvnode.type,\n\t\tnormalizedProps,\n\t\tkey || vnode.key,\n\t\tref || vnode.ref,\n\t\tnull\n\t);\n}\n","/**\n * Find the closest error boundary to a thrown error and call it\n * @param {object} error The thrown value\n * @param {import('../internal').VNode} vnode The vnode that threw\n * the error that was caught (except for unmounting when this parameter\n * is the highest parent that was being unmounted)\n */\nexport function _catchError(error, vnode) {\n\t/** @type {import('../internal').Component} */\n\tlet component, ctor, handled;\n\n\tfor (; (vnode = vnode._parent); ) {\n\t\tif ((component = vnode._component) && !component._processingException) {\n\t\t\ttry {\n\t\t\t\tctor = component.constructor;\n\n\t\t\t\tif (ctor && ctor.getDerivedStateFromError != null) {\n\t\t\t\t\tcomponent.setState(ctor.getDerivedStateFromError(error));\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\tif (component.componentDidCatch != null) {\n\t\t\t\t\tcomponent.componentDidCatch(error);\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\t// This is an error boundary. Mark it as having bailed out, and whether it was mid-hydration.\n\t\t\t\tif (handled) {\n\t\t\t\t\treturn (component._pendingError = component);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\t\t}\n\t}\n\n\tthrow error;\n}\n","(function (global, factory) {\ntypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\ntypeof define === 'function' && define.amd ? define(factory) :\n(global = global || self, global.SimpleMarkdown = factory());\n}(this, (function () { 'use strict';\n\n/* @flow */\n/* @ts-check */\n\n/**\n * Simple-Markdown\n * ===============\n *\n * Simple-Markdown's primary goal is to be easy to adapt. It aims\n * to be compliant with John Gruber's [Markdown Syntax page][1],\n * but compatiblity with other markdown implementations' edge-cases\n * will be sacrificed where it conflicts with simplicity or\n * extensibility.\n *\n * If your goal is to simply embed a standard markdown implementation\n * in your website, simple-markdown is probably not the best library\n * for you (although it should work). But if you have struggled to\n * customize an existing library to meet your needs, simple-markdown\n * might be able to help.\n *\n * Many of the regexes and original logic has been adapted from\n * the wonderful [marked.js](https://github.com/chjj/marked)\n *\n * LICENSE (MIT):\n * New code copyright (c) 2014-2019 Khan Academy & Aria Buckles.\n *\n * Portions adapted from marked.js copyright (c) 2011-2014\n * Christopher Jeffrey (https://github.com/chjj/).\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n// Typescript language & simple-markdown.d.ts references:\n/// <reference lib=\"ES2018\" />\n/// <reference path=\"../simple-markdown.d.ts\" />\n\n/*::\n// Flow Type Definitions:\n\ntype Capture =\n    Array<string> & {index: number} |\n    Array<string> & {index?: number};\n\ntype Attr = string | number | boolean | null | void;\n\ntype SingleASTNode = {\n    type: string,\n    [string]: any,\n};\n\ntype UnTypedASTNode = {\n    [string]: any\n};\n\ntype ASTNode = SingleASTNode | Array<SingleASTNode>;\n\ntype State = {\n    key?: string | number | void,\n    inline?: ?boolean,\n    [string]: any,\n};\n\ntype ReactElement = React$Element<any>;\ntype ReactElements = React$Node;\n\ntype MatchFunction = { regex?: RegExp } & (\n    source: string,\n    state: State,\n    prevCapture: string\n) => ?Capture;\n\ntype Parser = (\n    source: string,\n    state?: ?State\n) => Array<SingleASTNode>;\n\ntype ParseFunction = (\n    capture: Capture,\n    nestedParse: Parser,\n    state: State,\n) => (UnTypedASTNode | ASTNode);\n\ntype SingleNodeParseFunction = (\n    capture: Capture,\n    nestedParse: Parser,\n    state: State,\n) => UnTypedASTNode;\n\ntype Output<Result> = (\n    node: ASTNode,\n    state?: ?State\n) => Result;\n\ntype NodeOutput<Result> = (\n    node: SingleASTNode,\n    nestedOutput: Output<Result>,\n    state: State\n) => Result;\n\ntype ArrayNodeOutput<Result> = (\n    node: Array<SingleASTNode>,\n    nestedOutput: Output<Result>,\n    state: State\n) => Result;\n\ntype ReactOutput = Output<ReactElements>;\ntype ReactNodeOutput = NodeOutput<ReactElements>;\ntype HtmlOutput = Output<string>;\ntype HtmlNodeOutput = NodeOutput<string>;\n\ntype ParserRule = {\n    +order: number,\n    +match: MatchFunction,\n    +quality?: (capture: Capture, state: State, prevCapture: string) => number,\n    +parse: ParseFunction,\n};\n\ntype SingleNodeParserRule = {\n    +order: number,\n    +match: MatchFunction,\n    +quality?: (capture: Capture, state: State, prevCapture: string) => number,\n    +parse: SingleNodeParseFunction,\n};\n\ntype ReactOutputRule = {\n    // we allow null because some rules are never output results, and that's\n    // legal as long as no parsers return an AST node matching that rule.\n    // We don't use ? because this makes it be explicitly defined as either\n    // a valid function or null, so it can't be forgotten.\n    +react: ReactNodeOutput | null,\n};\n\ntype HtmlOutputRule = {\n    +html: HtmlNodeOutput | null,\n};\n\ntype ArrayRule = {\n    +react?: ArrayNodeOutput<ReactElements>,\n    +html?: ArrayNodeOutput<string>,\n    +[string]: ArrayNodeOutput<any>,\n};\n\ntype ParserRules = {\n    +Array?: ArrayRule,\n    +[type: string]: ParserRule,\n};\n\ntype OutputRules<Rule> = {\n    +Array?: ArrayRule,\n    +[type: string]: Rule\n};\ntype Rules<OutputRule> = {\n    +Array?: ArrayRule,\n    +[type: string]: ParserRule & OutputRule,\n};\ntype ReactRules = {\n    +Array?: {\n        +react: ArrayNodeOutput<ReactElements>,\n    },\n    +[type: string]: ParserRule & ReactOutputRule,\n};\ntype HtmlRules = {\n    +Array?: {\n        +html: ArrayNodeOutput<string>,\n    },\n    +[type: string]: ParserRule & HtmlOutputRule,\n};\n\n// We want to clarify our defaultRules types a little bit more so clients can\n// reuse defaultRules built-ins. So we make some stronger guarantess when\n// we can:\ntype NonNullReactOutputRule = {\n    +react: ReactNodeOutput,\n};\ntype ElementReactOutputRule = {\n    +react: NodeOutput<ReactElement>,\n};\ntype TextReactOutputRule = {\n    +react: NodeOutput<string>,\n};\ntype NonNullHtmlOutputRule = {\n    +html: HtmlNodeOutput,\n};\n\ntype DefaultInRule = SingleNodeParserRule & ReactOutputRule & HtmlOutputRule;\ntype TextInOutRule = SingleNodeParserRule & TextReactOutputRule & NonNullHtmlOutputRule;\ntype LenientInOutRule = SingleNodeParserRule & NonNullReactOutputRule & NonNullHtmlOutputRule;\ntype DefaultInOutRule = SingleNodeParserRule & ElementReactOutputRule & NonNullHtmlOutputRule;\n\ntype DefaultRules = {\n    +Array: {\n        +react: ArrayNodeOutput<ReactElements>,\n        +html: ArrayNodeOutput<string>\n    },\n    +heading: DefaultInOutRule,\n    +nptable: DefaultInRule,\n    +lheading: DefaultInRule,\n    +hr: DefaultInOutRule,\n    +codeBlock: DefaultInOutRule,\n    +fence: DefaultInRule,\n    +blockQuote: DefaultInOutRule,\n    +list: DefaultInOutRule,\n    +def: LenientInOutRule,\n    +table: DefaultInOutRule,\n    +tableSeparator: DefaultInRule,\n    +newline: TextInOutRule,\n    +paragraph: DefaultInOutRule,\n    +escape: DefaultInRule,\n    +autolink: DefaultInRule,\n    +mailto: DefaultInRule,\n    +url: DefaultInRule,\n    +link: DefaultInOutRule,\n    +image: DefaultInOutRule,\n    +reflink: DefaultInRule,\n    +refimage: DefaultInRule,\n    +em: DefaultInOutRule,\n    +strong: DefaultInOutRule,\n    +u: DefaultInOutRule,\n    +del: DefaultInOutRule,\n    +inlineCode: DefaultInOutRule,\n    +br: DefaultInOutRule,\n    +text: TextInOutRule,\n};\n\ntype RefNode = {\n    type: string,\n    content?: ASTNode,\n    target?: string,\n    title?: string,\n    alt?: string,\n};\n\n// End Flow Definitions\n*/\n\nvar CR_NEWLINE_R = /\\r\\n?/g;\nvar TAB_R = /\\t/g;\nvar FORMFEED_R = /\\f/g;\n\n/**\n * Turn various whitespace into easy-to-process whitespace\n * @param {string} source\n * @returns {string}\n */\nvar preprocess = function(source /* : string */) {\n    return source.replace(CR_NEWLINE_R, '\\n')\n            .replace(FORMFEED_R, '')\n            .replace(TAB_R, '    ');\n};\n\n/**\n * @param {SimpleMarkdown.OptionalState} givenState\n * @param {SimpleMarkdown.OptionalState} defaultState\n * @returns {SimpleMarkdown.State}\n */\nvar populateInitialState = function(\n    givenState /* : ?State */,\n    defaultState /* : ?State */\n) /* : State */{\n    var state /* : State */ = givenState || {};\n    if (defaultState != null) {\n        for (var prop in defaultState) {\n            if (Object.prototype.hasOwnProperty.call(defaultState, prop)) {\n                state[prop] = defaultState[prop];\n            }\n        }\n    }\n    return state;\n};\n\n/**\n * Creates a parser for a given set of rules, with the precedence\n * specified as a list of rules.\n *\n * @param {SimpleMarkdown.ParserRules} rules\n *     an object containing\n *     rule type -> {match, order, parse} objects\n *     (lower order is higher precedence)\n * @param {SimpleMarkdown.OptionalState} [defaultState]\n *\n * @returns {SimpleMarkdown.Parser}\n *     The resulting parse function, with the following parameters:\n *     @source: the input source string to be parsed\n *     @state: an optional object to be threaded through parse\n *         calls. Allows clients to add stateful operations to\n *         parsing, such as keeping track of how many levels deep\n *         some nesting is. For an example use-case, see passage-ref\n *         parsing in src/widgets/passage/passage-markdown.jsx\n */\nvar parserFor = function(rules /*: ParserRules */, defaultState /*: ?State */) {\n    // Sorts rules in order of increasing order, then\n    // ascending rule name in case of ties.\n    var ruleList = Object.keys(rules).filter(function(type) {\n        var rule = rules[type];\n        if (rule == null || rule.match == null) {\n            return false;\n        }\n        var order = rule.order;\n        if ((typeof order !== 'number' || !isFinite(order)) &&\n                typeof console !== 'undefined') {\n            console.warn(\n                \"simple-markdown: Invalid order for rule `\" + type + \"`: \" +\n                String(order)\n            );\n        }\n        return true;\n    });\n\n    ruleList.sort(function(typeA, typeB) {\n        var ruleA /* : ParserRule */ = /** @type {SimpleMarkdown.ParserRule} */ (rules[typeA] /*:: :any */);\n        var ruleB /* : ParserRule */ = /** @type {SimpleMarkdown.ParserRule} */ (rules[typeB] /*:: :any */);\n        var orderA = ruleA.order;\n        var orderB = ruleB.order;\n\n        // First sort based on increasing order\n        if (orderA !== orderB) {\n            return orderA - orderB;\n        }\n\n        var secondaryOrderA = ruleA.quality ? 0 : 1;\n        var secondaryOrderB = ruleB.quality ? 0 : 1;\n\n        if (secondaryOrderA !== secondaryOrderB) {\n            return secondaryOrderA - secondaryOrderB;\n\n        // Then based on increasing unicode lexicographic ordering\n        } else if (typeA < typeB) {\n            return -1;\n        } else if (typeA > typeB) {\n            return 1;\n\n        } else {\n            // Rules should never have the same name,\n            // but this is provided for completeness.\n            return 0;\n        }\n    });\n\n    /** @type {SimpleMarkdown.State} */\n    var latestState;\n    /** @type {SimpleMarkdown.Parser} */\n    var nestedParse = function(source /* : string */, state /* : ?State */) {\n        /** @type Array<SimpleMarkdown.SingleASTNode> */\n        var result = [];\n        state = state || latestState;\n        latestState = state;\n        while (source) {\n            // store the best match, it's rule, and quality:\n            var ruleType = null;\n            var rule = null;\n            var capture = null;\n            var quality = NaN;\n\n            // loop control variables:\n            var i = 0;\n            var currRuleType = ruleList[0];\n            var currRule /* : ParserRule */ = /** @type {SimpleMarkdown.ParserRule} */ ( rules[currRuleType] /*:: :any */ );\n\n            do {\n                var currOrder = currRule.order;\n                var prevCaptureStr = state.prevCapture == null ? \"\" : state.prevCapture[0];\n                var currCapture = currRule.match(source, state, prevCaptureStr);\n\n                if (currCapture) {\n                    var currQuality = currRule.quality ? currRule.quality(\n                        currCapture,\n                        state,\n                        prevCaptureStr\n                    ) : 0;\n                    // This should always be true the first time because\n                    // the initial quality is NaN (that's why there's the\n                    // condition negation).\n                    if (!(currQuality <= quality)) {\n                        ruleType = currRuleType;\n                        rule = currRule;\n                        capture = currCapture;\n                        quality = currQuality;\n                    }\n                }\n\n                // Move on to the next item.\n                // Note that this makes `currRule` be the next item\n                i++;\n                currRuleType = ruleList[i];\n                currRule = /*::((*/ /** @type {SimpleMarkdown.ParserRule} */ (rules[currRuleType]) /*:: : any) : ParserRule)*/;\n\n            } while (\n                // keep looping while we're still within the ruleList\n                currRule && (\n                    // if we don't have a match yet, continue\n                    !capture || (\n                        // or if we have a match, but the next rule is\n                        // at the same order, and has a quality measurement\n                        // functions, then this rule must have a quality\n                        // measurement function (since they are sorted before\n                        // those without), and we need to check if there is\n                        // a better quality match\n                        currRule.order === currOrder &&\n                        currRule.quality\n                    )\n                )\n            );\n\n            // TODO(aria): Write tests for these\n            if (rule == null || capture == null /*:: || ruleType == null */) {\n                throw new Error(\n                    \"Could not find a matching rule for the below \" +\n                    \"content. The rule with highest `order` should \" +\n                    \"always match content provided to it. Check \" +\n                    \"the definition of `match` for '\" +\n                    ruleList[ruleList.length - 1] +\n                    \"'. It seems to not match the following source:\\n\" +\n                    source\n                );\n            }\n            if (capture.index) { // If present and non-zero, i.e. a non-^ regexp result:\n                throw new Error(\n                    \"`match` must return a capture starting at index 0 \" +\n                    \"(the current parse index). Did you forget a ^ at the \" +\n                    \"start of the RegExp?\"\n                );\n            }\n\n            var parsed = rule.parse(capture, nestedParse, state);\n            // We maintain the same object here so that rules can\n            // store references to the objects they return and\n            // modify them later. (oops sorry! but this adds a lot\n            // of power--see reflinks.)\n            if (Array.isArray(parsed)) {\n                Array.prototype.push.apply(result, parsed);\n            } else {\n                // We also let rules override the default type of\n                // their parsed node if they would like to, so that\n                // there can be a single output function for all links,\n                // even if there are several rules to parse them.\n                if (parsed.type == null) {\n                    parsed.type = ruleType;\n                }\n                result.push(/** @type {SimpleMarkdown.SingleASTNode} */ (parsed));\n            }\n\n            state.prevCapture = capture;\n            source = source.substring(state.prevCapture[0].length);\n        }\n        return result;\n    };\n\n    /** @type {SimpleMarkdown.Parser} */\n    var outerParse = function(source /* : string */, state /* : ?State */) {\n        latestState = populateInitialState(state, defaultState);\n        if (!latestState.inline && !latestState.disableAutoBlockNewlines) {\n            source = source + \"\\n\\n\";\n        }\n        // We store the previous capture so that match functions can\n        // use some limited amount of lookbehind. Lists use this to\n        // ensure they don't match arbitrary '- ' or '* ' in inline\n        // text (see the list rule for more information). This stores\n        // the full regex capture object, if there is one.\n        latestState.prevCapture = null;\n        return nestedParse(preprocess(source), latestState);\n    };\n    return outerParse;\n};\n\n// Creates a match function for an inline scoped element from a regex\n/** @type {(regex: RegExp) => SimpleMarkdown.MatchFunction} */\nvar inlineRegex = function(regex /* : RegExp */) {\n    /** @type {SimpleMarkdown.MatchFunction} */\n    var match /* : MatchFunction */ = function(source, state) {\n        if (state.inline) {\n            return regex.exec(source);\n        } else {\n            return null;\n        }\n    };\n    match.regex = regex;\n    return match;\n};\n\n// Creates a match function for a block scoped element from a regex\n/** @type {(regex: RegExp) => SimpleMarkdown.MatchFunction} */\nvar blockRegex = function(regex /* : RegExp */) {\n    /** @type {SimpleMarkdown.MatchFunction} */\n    var match /* : MatchFunction */ = function(source, state) {\n        if (state.inline) {\n            return null;\n        } else {\n            return regex.exec(source);\n        }\n    };\n    match.regex = regex;\n    return match;\n};\n\n// Creates a match function from a regex, ignoring block/inline scope\n/** @type {(regex: RegExp) => SimpleMarkdown.MatchFunction} */\nvar anyScopeRegex = function(regex /* : RegExp */) {\n    /** @type {SimpleMarkdown.MatchFunction} */\n    var match /* : MatchFunction */ = function(source, state) {\n        return regex.exec(source);\n    };\n    match.regex = regex;\n    return match;\n};\n\nvar TYPE_SYMBOL =\n    (typeof Symbol === 'function' && Symbol.for &&\n     Symbol.for('react.element')) ||\n    0xeac7;\n\n/**\n * @param {string} type\n * @param {string | number | null | undefined} key\n * @param {Object<string, any>} props\n * @returns {SimpleMarkdown.ReactElement}\n */\nvar reactElement = function(\n    type /* : string */,\n    key /* : string | number | null | void */,\n    props /* : { [string]: any } */\n) /* : ReactElement */ {\n    var element /* : ReactElement */ = /** @type {SimpleMarkdown.ReactElement} */ ({\n        $$typeof: TYPE_SYMBOL,\n        type: type,\n        key: key == null ? undefined : key,\n        ref: null,\n        props: props,\n        _owner: null\n    } /* : any */);\n    return element;\n};\n\n/** Returns a closed HTML tag.\n * @param {string} tagName - Name of HTML tag (eg. \"em\" or \"a\")\n * @param {string} content - Inner content of tag\n * @param {{ [attr: string]: SimpleMarkdown.Attr }} [attributes] - Optional extra attributes of tag as an object of key-value pairs\n *   eg. { \"href\": \"http://google.com\" }. Falsey attributes are filtered out.\n * @param {boolean} [isClosed] - boolean that controls whether tag is closed or not (eg. img tags).\n *   defaults to true\n */\nvar htmlTag = function(\n    tagName /* : string */,\n    content /* : string */,\n    attributes /* : ?{[any]: ?Attr} */,\n    isClosed /* : ?boolean */\n) {\n    attributes = attributes || {};\n    isClosed = typeof isClosed !== 'undefined' ? isClosed : true;\n\n    var attributeString = \"\";\n    for (var attr in attributes) {\n        var attribute = attributes[attr];\n        // Removes falsey attributes\n        if (Object.prototype.hasOwnProperty.call(attributes, attr) &&\n                attribute) {\n            attributeString += \" \" +\n                sanitizeText(attr) + '=\"' +\n                sanitizeText(attribute) + '\"';\n        }\n    }\n\n    var unclosedTag = \"<\" + tagName + attributeString + \">\";\n\n    if (isClosed) {\n        return unclosedTag + content + \"</\" + tagName + \">\";\n    } else {\n        return unclosedTag;\n    }\n};\n\nvar EMPTY_PROPS = {};\n\n/**\n * @param {string | null | undefined} url - url to sanitize\n * @returns {string | null} - url if safe, or null if a safe url could not be made\n */\nvar sanitizeUrl = function(url /* : ?string */) {\n    if (url == null) {\n        return null;\n    }\n    try {\n        var prot = decodeURIComponent(url)\n            .replace(/[^A-Za-z0-9/:]/g, '')\n            .toLowerCase();\n        if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\n            return null;\n        }\n    } catch (e) {\n        // decodeURIComponent sometimes throws a URIError\n        // See `decodeURIComponent('a%AFc');`\n        // http://stackoverflow.com/questions/9064536/javascript-decodeuricomponent-malformed-uri-exception\n        return null;\n    }\n    return url;\n};\n\nvar SANITIZE_TEXT_R = /[<>&\"']/g;\n/** @type {any} */\nvar SANITIZE_TEXT_CODES = {\n    '<': '&lt;',\n    '>': '&gt;',\n    '&': '&amp;',\n    '\"': '&quot;',\n    \"'\": '&#x27;',\n    '/': '&#x2F;',\n    \"`\": '&#96;'\n};\n/**\n * @param {SimpleMarkdown.Attr} text\n * @returns {string}\n */\nvar sanitizeText = function(text /* : Attr */) {\n    return String(text).replace(SANITIZE_TEXT_R, function(chr) {\n        return SANITIZE_TEXT_CODES[chr];\n    });\n};\n\nvar UNESCAPE_URL_R = /\\\\([^0-9A-Za-z\\s])/g;\n\n/**\n * @param {string} rawUrlString\n * @returns {string}\n */\nvar unescapeUrl = function(rawUrlString /* : string */) {\n    return rawUrlString.replace(UNESCAPE_URL_R, \"$1\");\n};\n\n/**\n * Parse some content with the parser `parse`, with state.inline\n * set to true. Useful for block elements; not generally necessary\n * to be used by inline elements (where state.inline is already true.\n *\n * @param {SimpleMarkdown.Parser} parse\n * @param {string} content\n * @param {SimpleMarkdown.State} state\n * @returns {SimpleMarkdown.ASTNode}\n */\nvar parseInline = function(parse, content, state) {\n    var isCurrentlyInline = state.inline || false;\n    state.inline = true;\n    var result = parse(content, state);\n    state.inline = isCurrentlyInline;\n    return result;\n};\n/**\n * @param {SimpleMarkdown.Parser} parse\n * @param {string} content\n * @param {SimpleMarkdown.State} state\n * @returns {SimpleMarkdown.ASTNode}\n */\nvar parseBlock = function(parse, content, state) {\n    var isCurrentlyInline = state.inline || false;\n    state.inline = false;\n    var result = parse(content + \"\\n\\n\", state);\n    state.inline = isCurrentlyInline;\n    return result;\n};\n\n/**\n * @param {SimpleMarkdown.Capture} capture\n * @param {SimpleMarkdown.Parser} parse\n * @param {SimpleMarkdown.State} state\n * @returns {SimpleMarkdown.UnTypedASTNode}\n */\nvar parseCaptureInline = function(capture, parse, state) {\n    return {\n        content: parseInline(parse, capture[1], state)\n    };\n};\n/**\n * @returns {SimpleMarkdown.UnTypedASTNode}\n */\nvar ignoreCapture = function() { return {}; };\n\n// recognize a `*` `-`, `+`, `1.`, `2.`... list bullet\nvar LIST_BULLET = \"(?:[*+-]|\\\\d+\\\\.)\";\n// recognize the start of a list item:\n// leading space plus a bullet plus a space (`   * `)\nvar LIST_ITEM_PREFIX = \"( *)(\" + LIST_BULLET + \") +\";\nvar LIST_ITEM_PREFIX_R = new RegExp(\"^\" + LIST_ITEM_PREFIX);\n// recognize an individual list item:\n//  * hi\n//    this is part of the same item\n//\n//    as is this, which is a new paragraph in the same item\n//\n//  * but this is not part of the same item\nvar LIST_ITEM_R = new RegExp(\n    LIST_ITEM_PREFIX +\n    \"[^\\\\n]*(?:\\\\n\" +\n    \"(?!\\\\1\" + LIST_BULLET + \" )[^\\\\n]*)*(\\n|$)\",\n    \"gm\"\n);\nvar BLOCK_END_R = /\\n{2,}$/;\nvar INLINE_CODE_ESCAPE_BACKTICKS_R = /^ (?= *`)|(` *) $/g;\n// recognize the end of a paragraph block inside a list item:\n// two or more newlines at end end of the item\nvar LIST_BLOCK_END_R = BLOCK_END_R;\nvar LIST_ITEM_END_R = / *\\n+$/;\n// check whether a list item has paragraphs: if it does,\n// we leave the newlines at the end\nvar LIST_R = new RegExp(\n    \"^( *)(\" + LIST_BULLET + \") \" +\n    \"[\\\\s\\\\S]+?(?:\\n{2,}(?! )\" +\n    \"(?!\\\\1\" + LIST_BULLET + \" )\\\\n*\" +\n    // the \\\\s*$ here is so that we can parse the inside of nested\n    // lists, where our content might end before we receive two `\\n`s\n    \"|\\\\s*\\n*$)\"\n);\nvar LIST_LOOKBEHIND_R = /(?:^|\\n)( *)$/;\n\nvar TABLES = (function() {\n    var TABLE_ROW_SEPARATOR_TRIM = /^ *\\| *| *\\| *$/g;\n    var TABLE_CELL_END_TRIM = / *$/;\n    var TABLE_RIGHT_ALIGN = /^ *-+: *$/;\n    var TABLE_CENTER_ALIGN = /^ *:-+: *$/;\n    var TABLE_LEFT_ALIGN = /^ *:-+ *$/;\n\n    /**\n     * @param {string} alignCapture\n     * @returns {SimpleMarkdown.TableAlignment}\n     */\n    var parseTableAlignCapture = function(alignCapture) {\n        if (TABLE_RIGHT_ALIGN.test(alignCapture)) {\n            return \"right\";\n        } else if (TABLE_CENTER_ALIGN.test(alignCapture)) {\n            return \"center\";\n        } else if (TABLE_LEFT_ALIGN.test(alignCapture)) {\n            return \"left\";\n        } else {\n            return null;\n        }\n    };\n\n    /**\n     * @param {string} source\n     * @param {SimpleMarkdown.Parser} parse\n     * @param {SimpleMarkdown.State} state\n     * @param {boolean} trimEndSeparators\n     * @returns {Array<SimpleMarkdown.TableAlignment>}\n     */\n    var parseTableAlign = function(source, parse, state, trimEndSeparators) {\n        if (trimEndSeparators) {\n            source = source.replace(TABLE_ROW_SEPARATOR_TRIM, \"\");\n        }\n        var alignText = source.trim().split(\"|\");\n        return alignText.map(parseTableAlignCapture);\n    };\n\n    /**\n     * @param {string} source\n     * @param {SimpleMarkdown.Parser} parse\n     * @param {SimpleMarkdown.State} state\n     * @param {boolean} trimEndSeparators\n     * @returns {SimpleMarkdown.SingleASTNode[][]}\n     */\n    var parseTableRow = function(source, parse, state, trimEndSeparators) {\n        var prevInTable = state.inTable;\n        state.inTable = true;\n        var tableRow = parse(source.trim(), state);\n        state.inTable = prevInTable;\n\n        /** @type {SimpleMarkdown.SingleASTNode[][]} */\n        var cells = [[]];\n        tableRow.forEach(function(node, i) {\n            if (node.type === 'tableSeparator') {\n                // Filter out empty table separators at the start/end:\n                if (!trimEndSeparators || i !== 0 && i !== tableRow.length - 1) {\n                    // Split the current row:\n                    cells.push([]);\n                }\n            } else {\n                if (node.type === 'text' && (\n                    tableRow[i + 1] == null ||\n                    tableRow[i + 1].type === 'tableSeparator'\n                )) {\n                    node.content = node.content.replace(TABLE_CELL_END_TRIM, \"\");\n                }\n                cells[cells.length - 1].push(node);\n            }\n        });\n\n        return cells;\n    };\n\n    /**\n     * @param {string} source\n     * @param {SimpleMarkdown.Parser} parse\n     * @param {SimpleMarkdown.State} state\n     * @param {boolean} trimEndSeparators\n     * @returns {SimpleMarkdown.ASTNode[][]}\n     */\n    var parseTableCells = function(source, parse, state, trimEndSeparators) {\n        var rowsText = source.trim().split(\"\\n\");\n\n        return rowsText.map(function(rowText) {\n            return parseTableRow(rowText, parse, state, trimEndSeparators);\n        });\n    };\n\n    /**\n     * @param {boolean} trimEndSeparators\n     * @returns {SimpleMarkdown.SingleNodeParseFunction}\n     */\n    var parseTable = function(trimEndSeparators) {\n        /** @type {SimpleMarkdown.SingleNodeParseFunction} */\n        return function(capture, parse, state) {\n            state.inline = true;\n            var header = parseTableRow(capture[1], parse, state, trimEndSeparators);\n            var align = parseTableAlign(capture[2], parse, state, trimEndSeparators);\n            var cells = parseTableCells(capture[3], parse, state, trimEndSeparators);\n            state.inline = false;\n\n            return {\n                type: \"table\",\n                header: header,\n                align: align,\n                cells: cells\n            };\n        };\n    };\n\n    return {\n        parseTable: parseTable(true),\n        parseNpTable: parseTable(false),\n        TABLE_REGEX: /^ *(\\|.+)\\n *\\|( *[-:]+[-| :]*)\\n((?: *\\|.*(?:\\n|$))*)\\n*/,\n        NPTABLE_REGEX: /^ *(\\S.*\\|.*)\\n *([-:]+ *\\|[-| :]*)\\n((?:.*\\|.*(?:\\n|$))*)\\n*/\n    };\n})();\n\nvar LINK_INSIDE = \"(?:\\\\[[^\\\\]]*\\\\]|[^\\\\[\\\\]]|\\\\](?=[^\\\\[]*\\\\]))*\";\nvar LINK_HREF_AND_TITLE =\n        \"\\\\s*<?((?:\\\\([^)]*\\\\)|[^\\\\s\\\\\\\\]|\\\\\\\\.)*?)>?(?:\\\\s+['\\\"]([\\\\s\\\\S]*?)['\\\"])?\\\\s*\";\nvar AUTOLINK_MAILTO_CHECK_R = /mailto:/i;\n\n/**\n * @param {SimpleMarkdown.Capture} capture\n * @param {SimpleMarkdown.State} state\n * @param {SimpleMarkdown.RefNode} refNode\n * @returns {SimpleMarkdown.RefNode}\n */\nvar parseRef = function(capture, state, refNode /* : RefNode */) {\n    var ref = (capture[2] || capture[1])\n        .replace(/\\s+/g, ' ')\n        .toLowerCase();\n\n    // We store information about previously seen defs on\n    // state._defs (_ to deconflict with client-defined\n    // state). If the def for this reflink/refimage has\n    // already been seen, we can use its target/source\n    // and title here:\n    if (state._defs && state._defs[ref]) {\n        var def = state._defs[ref];\n        // `refNode` can be a link or an image. Both use\n        // target and title properties.\n        refNode.target = def.target;\n        refNode.title = def.title;\n    }\n\n    // In case we haven't seen our def yet (or if someone\n    // overwrites that def later on), we add this node\n    // to the list of ref nodes for that def. Then, when\n    // we find the def, we can modify this link/image AST\n    // node :).\n    // I'm sorry.\n    state._refs = state._refs || {};\n    state._refs[ref] = state._refs[ref] || [];\n    state._refs[ref].push(refNode);\n\n    return refNode;\n};\n\nvar currOrder = 0;\n/** @type {SimpleMarkdown.DefaultRules} */\nvar defaultRules /* : DefaultRules */ = {\n    Array: {\n        react: function(arr, output, state) {\n            var oldKey = state.key;\n            var result /* : Array<ReactElements> */ = [];\n\n            // map output over the ast, except group any text\n            // nodes together into a single string output.\n            for (var i = 0, key = 0; i < arr.length; i++, key++) {\n                // `key` is our numerical `state.key`, which we increment for\n                // every output node, but don't change for joined text nodes.\n                // (i, however, must change for joined text nodes)\n                state.key = '' + i;\n\n                var node = arr[i];\n                if (node.type === 'text') {\n                    node = { type: 'text', content: node.content };\n                    for (; i + 1 < arr.length && arr[i + 1].type === 'text'; i++) {\n                        node.content += arr[i + 1].content;\n                    }\n                }\n\n                result.push(output(node, state));\n            }\n\n            state.key = oldKey;\n            return result;\n        },\n        html: function(arr, output, state) {\n            var result = \"\";\n\n            // map output over the ast, except group any text\n            // nodes together into a single string output.\n            for (var i = 0; i < arr.length; i++) {\n\n                var node = arr[i];\n                if (node.type === 'text') {\n                    node = { type: 'text', content: node.content };\n                    for (; i + 1 < arr.length && arr[i + 1].type === 'text'; i++) {\n                        node.content += arr[i + 1].content;\n                    }\n                }\n\n                result += output(node, state);\n            }\n            return result;\n        }\n    },\n    heading: {\n        order: currOrder++,\n        match: blockRegex(/^ *(#{1,6})([^\\n]+?)#* *(?:\\n *)+\\n/),\n        parse: function(capture, parse, state) {\n            return {\n                level: capture[1].length,\n                content: parseInline(parse, capture[2].trim(), state)\n            };\n        },\n        react: function(node, output, state) {\n            return reactElement(\n                'h' + node.level,\n                state.key,\n                {\n                    children: output(node.content, state)\n                }\n            );\n        },\n        html: function(node, output, state) {\n            return htmlTag(\"h\" + node.level, output(node.content, state));\n        }\n    },\n    nptable: {\n        order: currOrder++,\n        match: blockRegex(TABLES.NPTABLE_REGEX),\n        parse: TABLES.parseNpTable,\n        react: null,\n        html: null\n    },\n    lheading: {\n        order: currOrder++,\n        match: blockRegex(/^([^\\n]+)\\n *(=|-){3,} *(?:\\n *)+\\n/),\n        parse: function(capture, parse, state) {\n            return {\n                type: \"heading\",\n                level: capture[2] === '=' ? 1 : 2,\n                content: parseInline(parse, capture[1], state)\n            };\n        },\n        react: null,\n        html: null\n    },\n    hr: {\n        order: currOrder++,\n        match: blockRegex(/^( *[-*_]){3,} *(?:\\n *)+\\n/),\n        parse: ignoreCapture,\n        react: function(node, output, state) {\n            return reactElement(\n                'hr',\n                state.key,\n                EMPTY_PROPS\n            );\n        },\n        html: function(node, output, state) {\n            return \"<hr>\";\n        }\n    },\n    codeBlock: {\n        order: currOrder++,\n        match: blockRegex(/^(?:    [^\\n]+\\n*)+(?:\\n *)+\\n/),\n        parse: function(capture, parse, state) {\n            var content = capture[0]\n                .replace(/^    /gm, '')\n                .replace(/\\n+$/, '');\n            return {\n                lang: undefined,\n                content: content\n            };\n        },\n        react: function(node, output, state) {\n            var className = node.lang ?\n                \"markdown-code-\" + node.lang :\n                undefined;\n\n            return reactElement(\n                'pre',\n                state.key,\n                {\n                    children: reactElement(\n                        'code',\n                        null,\n                        {\n                            className: className,\n                            children: node.content\n                        }\n                    )\n                }\n            );\n        },\n        html: function(node, output, state) {\n            var className = node.lang ?\n                \"markdown-code-\" + node.lang :\n                undefined;\n\n            var codeBlock = htmlTag(\"code\", sanitizeText(node.content), {\n                class: className\n            });\n            return htmlTag(\"pre\", codeBlock);\n        }\n    },\n    fence: {\n        order: currOrder++,\n        match: blockRegex(/^ *(`{3,}|~{3,}) *(?:(\\S+) *)?\\n([\\s\\S]+?)\\n?\\1 *(?:\\n *)+\\n/),\n        parse: function(capture, parse, state) {\n            return {\n                type: \"codeBlock\",\n                lang: capture[2] || undefined,\n                content: capture[3]\n            };\n        },\n        react: null,\n        html: null\n    },\n    blockQuote: {\n        order: currOrder++,\n        match: blockRegex(/^( *>[^\\n]+(\\n[^\\n]+)*\\n*)+\\n{2,}/),\n        parse: function(capture, parse, state) {\n            var content = capture[0].replace(/^ *> ?/gm, '');\n            return {\n                content: parse(content, state)\n            };\n        },\n        react: function(node, output, state) {\n            return reactElement(\n                'blockquote',\n                state.key,\n                {\n                    children: output(node.content, state)\n                }\n            );\n        },\n        html: function(node, output, state) {\n            return htmlTag(\"blockquote\", output(node.content, state));\n        }\n    },\n    list: {\n        order: currOrder++,\n        match: function(source, state) {\n            // We only want to break into a list if we are at the start of a\n            // line. This is to avoid parsing \"hi * there\" with \"* there\"\n            // becoming a part of a list.\n            // You might wonder, \"but that's inline, so of course it wouldn't\n            // start a list?\". You would be correct! Except that some of our\n            // lists can be inline, because they might be inside another list,\n            // in which case we can parse with inline scope, but need to allow\n            // nested lists inside this inline scope.\n            var prevCaptureStr = state.prevCapture == null ? \"\" : state.prevCapture[0];\n            var isStartOfLineCapture = LIST_LOOKBEHIND_R.exec(prevCaptureStr);\n            var isListBlock = state._list || !state.inline;\n\n            if (isStartOfLineCapture && isListBlock) {\n                source = isStartOfLineCapture[1] + source;\n                return LIST_R.exec(source);\n            } else {\n                return null;\n            }\n        },\n        parse: function(capture, parse, state) {\n            var bullet = capture[2];\n            var ordered = bullet.length > 1;\n            var start = ordered ? +bullet : undefined;\n            var items = /** @type {string[]} */ (\n                capture[0]\n                    .replace(LIST_BLOCK_END_R, \"\\n\")\n                    .match(LIST_ITEM_R)\n            );\n\n            // We know this will match here, because of how the regexes are\n            // defined\n            /*:: items = ((items : any) : Array<string>) */\n\n            var lastItemWasAParagraph = false;\n            var itemContent = items.map(function(/** @type {string} */ item, /** @type {number} */ i) {\n                // We need to see how far indented this item is:\n                var prefixCapture = LIST_ITEM_PREFIX_R.exec(item);\n                var space = prefixCapture ? prefixCapture[0].length : 0;\n                // And then we construct a regex to \"unindent\" the subsequent\n                // lines of the items by that amount:\n                var spaceRegex = new RegExp(\"^ {1,\" + space + \"}\", \"gm\");\n\n                // Before processing the item, we need a couple things\n                var content = item\n                         // remove indents on trailing lines:\n                        .replace(spaceRegex, '')\n                         // remove the bullet:\n                        .replace(LIST_ITEM_PREFIX_R, '');\n\n                // I'm not sur4 why this is necessary again?\n                /*:: items = ((items : any) : Array<string>) */\n\n                // Handling \"loose\" lists, like:\n                //\n                //  * this is wrapped in a paragraph\n                //\n                //  * as is this\n                //\n                //  * as is this\n                var isLastItem = (i === items.length - 1);\n                var containsBlocks = content.indexOf(\"\\n\\n\") !== -1;\n\n                // Any element in a list is a block if it contains multiple\n                // newlines. The last element in the list can also be a block\n                // if the previous item in the list was a block (this is\n                // because non-last items in the list can end with \\n\\n, but\n                // the last item can't, so we just \"inherit\" this property\n                // from our previous element).\n                var thisItemIsAParagraph = containsBlocks ||\n                        (isLastItem && lastItemWasAParagraph);\n                lastItemWasAParagraph = thisItemIsAParagraph;\n\n                // backup our state for restoration afterwards. We're going to\n                // want to set state._list to true, and state.inline depending\n                // on our list's looseness.\n                var oldStateInline = state.inline;\n                var oldStateList = state._list;\n                state._list = true;\n\n                // Parse inline if we're in a tight list, or block if we're in\n                // a loose list.\n                var adjustedContent;\n                if (thisItemIsAParagraph) {\n                    state.inline = false;\n                    adjustedContent = content.replace(LIST_ITEM_END_R, \"\\n\\n\");\n                } else {\n                    state.inline = true;\n                    adjustedContent = content.replace(LIST_ITEM_END_R, \"\");\n                }\n\n                var result = parse(adjustedContent, state);\n\n                // Restore our state before returning\n                state.inline = oldStateInline;\n                state._list = oldStateList;\n                return result;\n            });\n\n            return {\n                ordered: ordered,\n                start: start,\n                items: itemContent\n            };\n        },\n        react: function(node, output, state) {\n            var ListWrapper = node.ordered ? \"ol\" : \"ul\";\n\n            return reactElement(\n                ListWrapper,\n                state.key,\n                {\n                    start: node.start,\n                    children: node.items.map(function(\n                        /** @type {SimpleMarkdown.ASTNode} */ item,\n                        /** @type {number} */ i\n                    ) {\n                        return reactElement(\n                            'li',\n                            '' + i,\n                            {\n                                children: output(item, state)\n                            }\n                        );\n                    })\n                }\n            );\n        },\n        html: function(node, output, state) {\n            var listItems = node.items.map(function(/** @type {SimpleMarkdown.ASTNode} */ item) {\n                return htmlTag(\"li\", output(item, state));\n            }).join(\"\");\n\n            var listTag = node.ordered ? \"ol\" : \"ul\";\n            var attributes = {\n                start: node.start\n            };\n            return htmlTag(listTag, listItems, attributes);\n        }\n    },\n    def: {\n        order: currOrder++,\n        // TODO(aria): This will match without a blank line before the next\n        // block element, which is inconsistent with most of the rest of\n        // simple-markdown.\n        match: blockRegex(\n            /^ *\\[([^\\]]+)\\]: *<?([^\\s>]*)>?(?: +[\"(]([^\\n]+)[\")])? *\\n(?: *\\n)*/\n        ),\n        parse: function(capture, parse, state) {\n            var def = capture[1]\n                .replace(/\\s+/g, ' ')\n                .toLowerCase();\n            var target = capture[2];\n            var title = capture[3];\n\n            // Look for previous links/images using this def\n            // If any links/images using this def have already been declared,\n            // they will have added themselves to the state._refs[def] list\n            // (_ to deconflict with client-defined state). We look through\n            // that list of reflinks for this def, and modify those AST nodes\n            // with our newly found information now.\n            // Sorry :(.\n            if (state._refs && state._refs[def]) {\n                // `refNode` can be a link or an image\n                state._refs[def].forEach(function(/** @type {SimpleMarkdown.RefNode} */ refNode) {\n                    refNode.target = target;\n                    refNode.title = title;\n                });\n            }\n\n            // Add this def to our map of defs for any future links/images\n            // In case we haven't found any or all of the refs referring to\n            // this def yet, we add our def to the table of known defs, so\n            // that future reflinks can modify themselves appropriately with\n            // this information.\n            state._defs = state._defs || {};\n            state._defs[def] = {\n                target: target,\n                title: title,\n            };\n\n            // return the relevant parsed information\n            // for debugging only.\n            return {\n                def: def,\n                target: target,\n                title: title,\n            };\n        },\n        react: function() { return null; },\n        html: function() { return \"\"; }\n    },\n    table: {\n        order: currOrder++,\n        match: blockRegex(TABLES.TABLE_REGEX),\n        parse: TABLES.parseTable,\n        react: function(node, output, state) {\n            /**\n             * @param {number} colIndex\n             * @returns {{ [attr: string]: SimpleMarkdown.Attr }}\n             */\n            var getStyle = function(colIndex) {\n                return node.align[colIndex] == null ? {} : {\n                    textAlign: node.align[colIndex]\n                };\n            };\n\n            var headers = node.header.map(function(\n                /** @type {SimpleMarkdown.ASTNode} */ content,\n                /** @type {number} */ i\n            ) {\n                return reactElement(\n                    'th',\n                    '' + i,\n                    {\n                        style: getStyle(i),\n                        scope: 'col',\n                        children: output(content, state)\n                    }\n                );\n            });\n\n            var rows = node.cells.map(function(\n                    /** @type {SimpleMarkdown.ASTNode[]} */ row,\n                    /** @type {number} */ r\n            ) {\n                return reactElement(\n                    'tr',\n                    '' + r,\n                    {\n                        children: row.map(function(\n                            /** @type {SimpleMarkdown.ASTNode} */ content,\n                            /** @type {number} */ c\n                        ) {\n                            return reactElement(\n                                'td',\n                                '' + c,\n                                {\n                                    style: getStyle(c),\n                                    children: output(content, state)\n                                }\n                            );\n                        })\n                    }\n                );\n            });\n\n            return reactElement(\n                'table',\n                state.key,\n                {\n                    children: [reactElement(\n                        'thead',\n                        'thead',\n                        {\n                            children: reactElement(\n                                'tr',\n                                null,\n                                {\n                                    children: headers\n                                }\n                            )\n                        }\n                    ), reactElement(\n                        'tbody',\n                        'tbody',\n                        {\n                            children: rows\n                        }\n                    )]\n                }\n            );\n        },\n        html: function(node, output, state) {\n            /**\n             * @param {number} colIndex\n             * @returns {string}\n             */\n            var getStyle = function(colIndex) {\n                return node.align[colIndex] == null ? \"\" :\n                    \"text-align:\" + node.align[colIndex] + \";\";\n            };\n\n            var headers = node.header.map(function(\n                /** @type {SimpleMarkdown.ASTNode} */ content,\n                /** @type {number} */ i\n            ) {\n                return htmlTag(\"th\", output(content, state),\n                    { style: getStyle(i), scope: \"col\" });\n            }).join(\"\");\n\n            var rows = node.cells.map(function(/** @type {SimpleMarkdown.ASTNode[]} */ row) {\n                var cols = row.map(function(\n                    /** @type {SimpleMarkdown.ASTNode} */ content,\n                    /** @type {number} */ c\n                ) {\n                    return htmlTag(\"td\", output(content, state),\n                        { style: getStyle(c) });\n                }).join(\"\");\n\n                return htmlTag(\"tr\", cols);\n            }).join(\"\");\n\n            var thead = htmlTag(\"thead\", htmlTag(\"tr\", headers));\n            var tbody = htmlTag(\"tbody\", rows);\n\n            return htmlTag(\"table\", thead + tbody);\n        }\n    },\n    newline: {\n        order: currOrder++,\n        match: blockRegex(/^(?:\\n *)*\\n/),\n        parse: ignoreCapture,\n        react: function(node, output, state) { return \"\\n\"; },\n        html: function(node, output, state) { return \"\\n\"; }\n    },\n    paragraph: {\n        order: currOrder++,\n        match: blockRegex(/^((?:[^\\n]|\\n(?! *\\n))+)(?:\\n *)+\\n/),\n        parse: parseCaptureInline,\n        react: function(node, output, state) {\n            return reactElement(\n                'div',\n                state.key,\n                {\n                    className: 'paragraph',\n                    children: output(node.content, state)\n                }\n            );\n        },\n        html: function(node, output, state) {\n            var attributes = {\n                class: 'paragraph'\n            };\n            return htmlTag(\"div\", output(node.content, state), attributes);\n        }\n    },\n    escape: {\n        order: currOrder++,\n        // We don't allow escaping numbers, letters, or spaces here so that\n        // backslashes used in plain text still get rendered. But allowing\n        // escaping anything else provides a very flexible escape mechanism,\n        // regardless of how this grammar is extended.\n        match: inlineRegex(/^\\\\([^0-9A-Za-z\\s])/),\n        parse: function(capture, parse, state) {\n            return {\n                type: \"text\",\n                content: capture[1]\n            };\n        },\n        react: null,\n        html: null\n    },\n    tableSeparator: {\n        order: currOrder++,\n        match: function(source, state) {\n            if (!state.inTable) {\n                return null;\n            }\n            return /^ *\\| */.exec(source);\n        },\n        parse: function() {\n            return { type: 'tableSeparator' };\n        },\n        // These shouldn't be reached, but in case they are, be reasonable:\n        react: function() { return ' | '; },\n        html: function() { return ' &vert; '; },\n    },\n    autolink: {\n        order: currOrder++,\n        match: inlineRegex(/^<([^: >]+:\\/[^ >]+)>/),\n        parse: function(capture, parse, state) {\n            return {\n                type: \"link\",\n                content: [{\n                    type: \"text\",\n                    content: capture[1]\n                }],\n                target: capture[1]\n            };\n        },\n        react: null,\n        html: null\n    },\n    mailto: {\n        order: currOrder++,\n        match: inlineRegex(/^<([^ >]+@[^ >]+)>/),\n        parse: function(capture, parse, state) {\n            var address = capture[1];\n            var target = capture[1];\n\n            // Check for a `mailto:` already existing in the link:\n            if (!AUTOLINK_MAILTO_CHECK_R.test(target)) {\n                target = \"mailto:\" + target;\n            }\n\n            return {\n                type: \"link\",\n                content: [{\n                    type: \"text\",\n                    content: address\n                }],\n                target: target\n            };\n        },\n        react: null,\n        html: null\n    },\n    url: {\n        order: currOrder++,\n        match: inlineRegex(/^(https?:\\/\\/[^\\s<]+[^<.,:;\"')\\]\\s])/),\n        parse: function(capture, parse, state) {\n            return {\n                type: \"link\",\n                content: [{\n                    type: \"text\",\n                    content: capture[1]\n                }],\n                target: capture[1],\n                title: undefined\n            };\n        },\n        react: null,\n        html: null\n    },\n    link: {\n        order: currOrder++,\n        match: inlineRegex(new RegExp(\n            \"^\\\\[(\" + LINK_INSIDE + \")\\\\]\\\\(\" + LINK_HREF_AND_TITLE + \"\\\\)\"\n        )),\n        parse: function(capture, parse, state) {\n            var link ={\n                content: parse(capture[1], state),\n                target: unescapeUrl(capture[2]),\n                title: capture[3]\n            };\n            return link;\n        },\n        react: function(node, output, state) {\n            return reactElement(\n                'a',\n                state.key,\n                {\n                    href: sanitizeUrl(node.target),\n                    title: node.title,\n                    children: output(node.content, state)\n                }\n            );\n        },\n        html: function(node, output, state) {\n            var attributes = {\n                href: sanitizeUrl(node.target),\n                title: node.title\n            };\n\n            return htmlTag(\"a\", output(node.content, state), attributes);\n        }\n    },\n    image: {\n        order: currOrder++,\n        match: inlineRegex(new RegExp(\n            \"^!\\\\[(\" + LINK_INSIDE + \")\\\\]\\\\(\" + LINK_HREF_AND_TITLE + \"\\\\)\"\n        )),\n        parse: function(capture, parse, state) {\n            var image = {\n                alt: capture[1],\n                target: unescapeUrl(capture[2]),\n                title: capture[3]\n            };\n            return image;\n        },\n        react: function(node, output, state) {\n            return reactElement(\n                'img',\n                state.key,\n                {\n                    src: sanitizeUrl(node.target),\n                    alt: node.alt,\n                    title: node.title\n                }\n            );\n        },\n        html: function(node, output, state) {\n            var attributes = {\n                src: sanitizeUrl(node.target),\n                alt: node.alt,\n                title: node.title\n            };\n\n            return htmlTag(\"img\", \"\", attributes, false);\n        }\n    },\n    reflink: {\n        order: currOrder++,\n        match: inlineRegex(new RegExp(\n            // The first [part] of the link\n            \"^\\\\[(\" + LINK_INSIDE + \")\\\\]\" +\n            // The [ref] target of the link\n            \"\\\\s*\\\\[([^\\\\]]*)\\\\]\"\n        )),\n        parse: function(capture, parse, state) {\n            return parseRef(capture, state, {\n                type: \"link\",\n                content: parse(capture[1], state)\n            });\n        },\n        react: null,\n        html: null\n    },\n    refimage: {\n        order: currOrder++,\n        match: inlineRegex(new RegExp(\n            // The first [part] of the link\n            \"^!\\\\[(\" + LINK_INSIDE + \")\\\\]\" +\n            // The [ref] target of the link\n            \"\\\\s*\\\\[([^\\\\]]*)\\\\]\"\n        )),\n        parse: function(capture, parse, state) {\n            return parseRef(capture, state, {\n                type: \"image\",\n                alt: capture[1]\n            });\n        },\n        react: null,\n        html: null\n    },\n    em: {\n        order: currOrder /* same as strong/u */,\n        match: inlineRegex(\n            new RegExp(\n                // only match _s surrounding words.\n                \"^\\\\b_\" +\n                \"((?:__|\\\\\\\\[\\\\s\\\\S]|[^\\\\\\\\_])+?)_\" +\n                \"\\\\b\" +\n                // Or match *s:\n                \"|\" +\n                // Only match *s that are followed by a non-space:\n                \"^\\\\*(?=\\\\S)(\" +\n                // Match at least one of:\n                \"(?:\" +\n                  //  - `**`: so that bolds inside italics don't close the\n                  //          italics\n                  \"\\\\*\\\\*|\" +\n                  //  - escape sequence: so escaped *s don't close us\n                  \"\\\\\\\\[\\\\s\\\\S]|\" +\n                  //  - whitespace: followed by a non-* (we don't\n                  //          want ' *' to close an italics--it might\n                  //          start a list)\n                  \"\\\\s+(?:\\\\\\\\[\\\\s\\\\S]|[^\\\\s\\\\*\\\\\\\\]|\\\\*\\\\*)|\" +\n                  //  - non-whitespace, non-*, non-backslash characters\n                  \"[^\\\\s\\\\*\\\\\\\\]\" +\n                \")+?\" +\n                // followed by a non-space, non-* then *\n                \")\\\\*(?!\\\\*)\"\n            )\n        ),\n        quality: function(capture) {\n            // precedence by length, `em` wins ties:\n            return capture[0].length + 0.2;\n        },\n        parse: function(capture, parse, state) {\n            return {\n                content: parse(capture[2] || capture[1], state)\n            };\n        },\n        react: function(node, output, state) {\n            return reactElement(\n                'em',\n                state.key,\n                {\n                    children: output(node.content, state)\n                }\n            );\n        },\n        html: function(node, output, state) {\n            return htmlTag(\"em\", output(node.content, state));\n        }\n    },\n    strong: {\n        order: currOrder /* same as em */,\n        match: inlineRegex(/^\\*\\*((?:\\\\[\\s\\S]|[^\\\\])+?)\\*\\*(?!\\*)/),\n        quality: function(capture) {\n            // precedence by length, wins ties vs `u`:\n            return capture[0].length + 0.1;\n        },\n        parse: parseCaptureInline,\n        react: function(node, output, state) {\n            return reactElement(\n                'strong',\n                state.key,\n                {\n                    children: output(node.content, state)\n                }\n            );\n        },\n        html: function(node, output, state) {\n            return htmlTag(\"strong\", output(node.content, state));\n        }\n    },\n    u: {\n        order: currOrder++ /* same as em&strong; increment for next rule */,\n        match: inlineRegex(/^__((?:\\\\[\\s\\S]|[^\\\\])+?)__(?!_)/),\n        quality: function(capture) {\n            // precedence by length, loses all ties\n            return capture[0].length;\n        },\n        parse: parseCaptureInline,\n        react: function(node, output, state) {\n            return reactElement(\n                'u',\n                state.key,\n                {\n                    children: output(node.content, state)\n                }\n            );\n        },\n        html: function(node, output, state) {\n            return htmlTag(\"u\", output(node.content, state));\n        }\n    },\n    del: {\n        order: currOrder++,\n        match: inlineRegex(/^~~(?=\\S)((?:\\\\[\\s\\S]|~(?!~)|[^\\s~\\\\]|\\s(?!~~))+?)~~/),\n        parse: parseCaptureInline,\n        react: function(node, output, state) {\n            return reactElement(\n                'del',\n                state.key,\n                {\n                    children: output(node.content, state)\n                }\n            );\n        },\n        html: function(node, output, state) {\n            return htmlTag(\"del\", output(node.content, state));\n        }\n    },\n    inlineCode: {\n        order: currOrder++,\n        match: inlineRegex(/^(`+)([\\s\\S]*?[^`])\\1(?!`)/),\n        parse: function(capture, parse, state) {\n            return {\n                content: capture[2].replace(INLINE_CODE_ESCAPE_BACKTICKS_R, \"$1\")\n            };\n        },\n        react: function(node, output, state) {\n            return reactElement(\n                'code',\n                state.key,\n                {\n                    children: node.content\n                }\n            );\n        },\n        html: function(node, output, state) {\n            return htmlTag(\"code\", sanitizeText(node.content));\n        }\n    },\n    br: {\n        order: currOrder++,\n        match: anyScopeRegex(/^ {2,}\\n/),\n        parse: ignoreCapture,\n        react: function(node, output, state) {\n            return reactElement(\n                'br',\n                state.key,\n                EMPTY_PROPS\n            );\n        },\n        html: function(node, output, state) {\n            return \"<br>\";\n        }\n    },\n    text: {\n        order: currOrder++,\n        // Here we look for anything followed by non-symbols,\n        // double newlines, or double-space-newlines\n        // We break on any symbol characters so that this grammar\n        // is easy to extend without needing to modify this regex\n        match: anyScopeRegex(\n            /^[\\s\\S]+?(?=[^0-9A-Za-z\\s\\u00c0-\\uffff]|\\n\\n| {2,}\\n|\\w+:\\S|$)/\n        ),\n        parse: function(capture, parse, state) {\n            return {\n                content: capture[0]\n            };\n        },\n        react: function(node, output, state) {\n            return node.content;\n        },\n        html: function(node, output, state) {\n            return sanitizeText(node.content);\n        }\n    }\n};\n\n/** (deprecated)\n * @param {any} rules\n * @param {any} property\n * @returns {any}\n */\nvar ruleOutput = function/* :: <Rule : Object> */(\n    rules /* : OutputRules<Rule> */,\n    property /* : $Keys<Rule> */\n) {\n    if (!property && typeof console !== \"undefined\") {\n        console.warn(\"simple-markdown ruleOutput should take 'react' or \" +\n            \"'html' as the second argument.\"\n        );\n    }\n\n    /** @type {SimpleMarkdown.NodeOutput<any>} */\n    var nestedRuleOutput /* : NodeOutput<any> */ = function(\n        ast /* : SingleASTNode */,\n        outputFunc /* : Output<any> */,\n        state /* : State */\n    ) {\n        return rules[ast.type][property](ast, outputFunc, state);\n    };\n    return nestedRuleOutput;\n};\n\n/** (deprecated)\n * @param {any} outputFunc\n * @returns {any}\n */\nvar reactFor = function(outputFunc /* : ReactNodeOutput */) /* : ReactOutput */ {\n    /** @type {SimpleMarkdown.ReactOutput} */\n    var nestedOutput /* : ReactOutput */ = function(ast, state) {\n        state = state || {};\n        if (Array.isArray(ast)) {\n            var oldKey = state.key;\n            var result /* : Array<ReactElements> */ = [];\n\n            // map nestedOutput over the ast, except group any text\n            // nodes together into a single string output.\n            var lastResult = null;\n            for (var i = 0; i < ast.length; i++) {\n                state.key = '' + i;\n                var nodeOut = nestedOutput(ast[i], state);\n                if (typeof nodeOut === \"string\" && typeof lastResult === \"string\") {\n                    lastResult = lastResult + nodeOut;\n                    result[result.length - 1] = lastResult;\n                } else {\n                    result.push(nodeOut);\n                    lastResult = nodeOut;\n                }\n            }\n\n            state.key = oldKey;\n            return result;\n        } else {\n            return outputFunc(ast, nestedOutput, state);\n        }\n    };\n    return nestedOutput;\n};\n\n/** (deprecated)\n * @param {any} outputFunc\n * @returns {any}\n */\nvar htmlFor = function(outputFunc /* : HtmlNodeOutput */) /* : HtmlOutput */ {\n    /** @type {SimpleMarkdown.HtmlOutput} */\n    var nestedOutput /* : HtmlOutput */ = function(ast, state) {\n        state = state || {};\n        if (Array.isArray(ast)) {\n            return ast.map(function(node) {\n                return nestedOutput(node, state);\n            }).join(\"\");\n        } else {\n            return outputFunc(ast, nestedOutput, state);\n        }\n    };\n    return nestedOutput;\n};\n\n/**\n * @type {SimpleMarkdown.OutputFor}\n */\nvar outputFor = function/* :: <Rule : Object> */(\n    rules /* : OutputRules<Rule> */,\n    property /* : $Keys<Rule> */,\n    defaultState /* : ?State */\n) {\n    if (!property) {\n        throw new Error('simple-markdown: outputFor: `property` must be ' +\n            'defined. ' +\n            'if you just upgraded, you probably need to replace `outputFor` ' +\n            'with `reactFor`'\n        );\n    }\n\n    /** @type {SimpleMarkdown.State} */\n    var latestState;\n    /** @type {SimpleMarkdown.ArrayRule} */\n    var arrayRule = rules.Array || defaultRules.Array;\n\n    // Tricks to convince tsc that this var is not null:\n    var arrayRuleCheck = arrayRule[property];\n    if (!arrayRuleCheck) {\n        throw new Error('simple-markdown: outputFor: to join nodes of type `' +\n            property + '` you must provide an `Array:` joiner rule with that type, ' +\n            'Please see the docs for details on specifying an Array rule.'\n        );\n    }\n    var arrayRuleOutput = arrayRuleCheck;\n\n    /** @type {SimpleMarkdown.Output<any>} */\n    var nestedOutput /* : Output<any> */ = function(ast, state) {\n        state = state || latestState;\n        latestState = state;\n        if (Array.isArray(ast)) {\n            return arrayRuleOutput(ast, nestedOutput, state);\n        } else {\n            return rules[ast.type][property](ast, nestedOutput, state);\n        }\n    };\n\n    /** @type {SimpleMarkdown.Output<any>} */\n    var outerOutput = function(ast, state) {\n        latestState = populateInitialState(state, defaultState);\n        return nestedOutput(ast, latestState);\n    };\n    return outerOutput;\n};\n\nvar defaultRawParse = parserFor(defaultRules);\n/**\n * @param {string} source\n * @param {SimpleMarkdown.OptionalState} [state]\n * @returns {Array<SimpleMarkdown.SingleASTNode>}\n */\nvar defaultBlockParse = function(source, state) {\n    state = state || {};\n    state.inline = false;\n    return defaultRawParse(source, state);\n};\n/**\n * @param {string} source\n * @param {SimpleMarkdown.OptionalState} [state]\n * @returns {Array<SimpleMarkdown.SingleASTNode>}\n */\nvar defaultInlineParse = function(source, state) {\n    state = state || {};\n    state.inline = true;\n    return defaultRawParse(source, state);\n};\n/**\n * @param {string} source\n * @param {SimpleMarkdown.OptionalState} [state]\n * @returns {Array<SimpleMarkdown.SingleASTNode>}\n */\nvar defaultImplicitParse = function(source, state) {\n    var isBlock = BLOCK_END_R.test(source);\n    state = state || {};\n    state.inline = !isBlock;\n    return defaultRawParse(source, state);\n};\n\n/** @type {SimpleMarkdown.ReactOutput} */\nvar defaultReactOutput /* : ReactOutput */ = outputFor(defaultRules, \"react\");\n/** @type {SimpleMarkdown.HtmlOutput} */\nvar defaultHtmlOutput /* : HtmlOutput */ = outputFor(defaultRules, \"html\");\n\n/**\n * @param {string} source\n * @param {SimpleMarkdown.OptionalState} [state]\n * @returns {SimpleMarkdown.ReactElements}\n */\nvar markdownToReact = function(source, state) /* : ReactElements */ {\n    return defaultReactOutput(defaultBlockParse(source, state), state);\n};\n/**\n * @param {string} source\n * @param {SimpleMarkdown.OptionalState} [state]\n * @returns {string}\n */\nvar markdownToHtml = function(source, state) /* : string */ {\n    return defaultHtmlOutput(defaultBlockParse(source, state), state);\n};\n\n/**\n * @param {SimpleMarkdown.ReactMarkdownProps} props\n * @returns {SimpleMarkdown.ReactElement}\n */\nvar ReactMarkdown = function(props) {\n    /** @type {Object} */\n    var divProps = {};\n\n    for (var prop in props) {\n        if (prop !== 'source' &&\n            Object.prototype.hasOwnProperty.call(props, prop)\n        ) {\n            divProps[prop] = props[prop];\n        }\n    }\n    divProps.children = markdownToReact(props.source);\n\n    return reactElement(\n        'div',\n        null,\n        divProps\n    );\n};\n\n\n/*:: // Flow exports:\ntype Exports = {\n    +defaultRules: DefaultRules,\n    +parserFor: (rules: ParserRules, defaultState?: ?State) => Parser,\n    +outputFor: <Rule : Object>(rules: OutputRules<Rule>, param: $Keys<Rule>, defaultState?: ?State) => Output<any>,\n\n    +ruleOutput: <Rule : Object>(rules: OutputRules<Rule>, param: $Keys<Rule>) => NodeOutput<any>,\n    +reactFor: (ReactNodeOutput) => ReactOutput,\n    +htmlFor: (HtmlNodeOutput) => HtmlOutput,\n\n    +inlineRegex: (regex: RegExp) => MatchFunction,\n    +blockRegex: (regex: RegExp) => MatchFunction,\n    +anyScopeRegex: (regex: RegExp) => MatchFunction,\n    +parseInline: (parse: Parser, content: string, state: State) => ASTNode,\n    +parseBlock: (parse: Parser, content: string, state: State) => ASTNode,\n\n    +markdownToReact: (source: string, state?: ?State) => ReactElements,\n    +markdownToHtml: (source: string, state?: ?State) => string,\n    +ReactMarkdown: (props: { source: string, [string]: any }) => ReactElement,\n\n    +defaultRawParse: (source: string, state?: ?State) => Array<SingleASTNode>,\n    +defaultBlockParse: (source: string, state?: ?State) => Array<SingleASTNode>,\n    +defaultInlineParse: (source: string, state?: ?State) => Array<SingleASTNode>,\n    +defaultImplicitParse: (source: string, state?: ?State) => Array<SingleASTNode>,\n\n    +defaultReactOutput: ReactOutput,\n    +defaultHtmlOutput: HtmlOutput,\n\n    +preprocess: (source: string) => string,\n    +sanitizeText: (text: Attr) => string,\n    +sanitizeUrl: (url: ?string) => ?string,\n    +unescapeUrl: (url: string) => string,\n    +htmlTag: (tagName: string, content: string, attributes: ?{ [any]: ?Attr }, isClosed: ?boolean) => string,\n    +reactElement: (type: string, key: string | null, props: { [string]: any }) => ReactElement,\n};\n\nexport type {\n    // Hopefully you shouldn't have to use these, but they're here if you need!\n    // Top-level API:\n    State,\n    Parser,\n    Output,\n    ReactOutput,\n    HtmlOutput,\n\n    // Most of the following types should be considered experimental and\n    // subject to change or change names. Again, they shouldn't be necessary,\n    // but if they are I'd love to hear how so I can better support them!\n\n    // Individual Rule fields:\n    Capture,\n    MatchFunction,\n    ParseFunction,\n    NodeOutput,\n    ArrayNodeOutput,\n    ReactNodeOutput,\n\n    // Single rules:\n    ParserRule,\n    ReactOutputRule,\n    HtmlOutputRule,\n\n    // Sets of rules:\n    ParserRules,\n    OutputRules,\n    Rules,\n    ReactRules,\n    HtmlRules,\n};\n*/\n\nvar SimpleMarkdown /* : Exports */ = {\n    defaultRules: defaultRules,\n    parserFor: parserFor,\n    outputFor: outputFor,\n\n    inlineRegex: inlineRegex,\n    blockRegex: blockRegex,\n    anyScopeRegex: anyScopeRegex,\n    parseInline: parseInline,\n    parseBlock: parseBlock,\n\n    // default wrappers:\n    markdownToReact: markdownToReact,\n    markdownToHtml: markdownToHtml,\n    ReactMarkdown: ReactMarkdown,\n\n    defaultBlockParse: defaultBlockParse,\n    defaultInlineParse: defaultInlineParse,\n    defaultImplicitParse: defaultImplicitParse,\n\n    defaultReactOutput: defaultReactOutput,\n    defaultHtmlOutput: defaultHtmlOutput,\n\n    preprocess: preprocess,\n    sanitizeText: sanitizeText,\n    sanitizeUrl: sanitizeUrl,\n    unescapeUrl: unescapeUrl,\n    htmlTag: htmlTag,\n    reactElement: reactElement,\n\n    // deprecated:\n    defaultRawParse: defaultRawParse,\n    ruleOutput: ruleOutput,\n    reactFor: reactFor,\n    htmlFor: htmlFor,\n\n    defaultParse: function() {\n        if (typeof console !== 'undefined') {\n            console.warn('defaultParse is deprecated, please use `defaultImplicitParse`');\n        }\n        return defaultImplicitParse.apply(null, /** @type {any} */ (arguments));\n    },\n    defaultOutput: function() {\n        if (typeof console !== 'undefined') {\n            console.warn('defaultOutput is deprecated, please use `defaultReactOutput`');\n        }\n        return defaultReactOutput.apply(null, /** @type {any} */ (arguments));\n    }\n};\n\nreturn SimpleMarkdown;\n\n})));\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TypeName = undefined;\nexports.parse = parse;\nexports.toCodePoints = toCodePoints;\n\nvar _regex = require('./lib/regex');\n\nvar _regex2 = _interopRequireDefault(_regex);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar TypeName = exports.TypeName = 'emoji';\n// Copyright Twitter Inc. Licensed under MIT\n// https://github.com/twitter/twemoji-parser/blob/master/LICENSE.md\nfunction parse(text, options) {\n  var assetType = options && options.assetType ? options.assetType : 'svg';\n  var getTwemojiUrl = options && options.buildUrl ? options.buildUrl : function (codepoints, assetType) {\n    return assetType === 'png' ? 'https://twemoji.maxcdn.com/v/latest/72x72/' + codepoints + '.png' : 'https://twemoji.maxcdn.com/v/latest/svg/' + codepoints + '.svg';\n  };\n\n  var entities = [];\n\n  _regex2.default.lastIndex = 0;\n  while (true) {\n    var result = _regex2.default.exec(text);\n    if (!result) {\n      break;\n    }\n\n    var emojiText = result[0];\n    var codepoints = toCodePoints(removeVS16s(emojiText)).join('-');\n\n    entities.push({\n      url: codepoints ? getTwemojiUrl(codepoints, assetType) : '',\n      indices: [result.index, _regex2.default.lastIndex],\n      text: emojiText,\n      type: TypeName\n    });\n  }\n  return entities;\n}\n\nvar vs16RegExp = /\\uFE0F/g;\n// avoid using a string literal like '\\u200D' here because minifiers expand it inline\nvar zeroWidthJoiner = String.fromCharCode(0x200d);\n\nvar removeVS16s = function removeVS16s(rawEmoji) {\n  return rawEmoji.indexOf(zeroWidthJoiner) < 0 ? rawEmoji.replace(vs16RegExp, '') : rawEmoji;\n};\n\nfunction toCodePoints(unicodeSurrogates) {\n  var points = [];\n  var char = 0;\n  var previous = 0;\n  var i = 0;\n  while (i < unicodeSurrogates.length) {\n    char = unicodeSurrogates.charCodeAt(i++);\n    if (previous) {\n      points.push((0x10000 + (previous - 0xd800 << 10) + (char - 0xdc00)).toString(16));\n      previous = 0;\n    } else if (char > 0xd800 && char <= 0xdbff) {\n      previous = char;\n    } else {\n      points.push(char.toString(16));\n    }\n  }\n  return points;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n// Copyright Twitter Inc. Licensed under MIT\n// https://github.com/twitter/twemoji-parser/blob/master/LICENSE.md\n\n// This file is generated by source/emoji/scripts/generate.sh\nexports.default = /(?:\\ud83d\\udc68\\ud83c\\udffb\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffc-\\udfff]|\\ud83d\\udc68\\ud83c\\udffc\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83d\\udc68\\ud83c\\udffd\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83d\\udc68\\ud83c\\udffe\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83d\\udc68\\ud83c\\udfff\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udffe]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffc-\\udfff]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc69\\ud83c[\\udffc-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc69\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc69\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udffe]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udffe]|\\ud83e\\uddd1\\ud83c\\udffb\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffc\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffd\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffe\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udfff]|\\ud83e\\uddd1\\ud83c\\udfff\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udfff]|\\ud83e\\uddd1\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1|\\ud83d\\udc6b\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc6c\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc6d\\ud83c[\\udffb-\\udfff]|\\ud83d[\\udc6b-\\udc6d])|(?:\\ud83d[\\udc68\\udc69]|\\ud83e\\uddd1)(?:\\ud83c[\\udffb-\\udfff])?\\u200d(?:\\u2695\\ufe0f|\\u2696\\ufe0f|\\u2708\\ufe0f|\\ud83c[\\udf3e\\udf73\\udf7c\\udf84\\udf93\\udfa4\\udfa8\\udfeb\\udfed]|\\ud83d[\\udcbb\\udcbc\\udd27\\udd2c\\ude80\\ude92]|\\ud83e[\\uddaf-\\uddb3\\uddbc\\uddbd])|(?:\\ud83c[\\udfcb\\udfcc]|\\ud83d[\\udd74\\udd75]|\\u26f9)((?:\\ud83c[\\udffb-\\udfff]|\\ufe0f)\\u200d[\\u2640\\u2642]\\ufe0f)|(?:\\ud83c[\\udfc3\\udfc4\\udfca]|\\ud83d[\\udc6e\\udc70\\udc71\\udc73\\udc77\\udc81\\udc82\\udc86\\udc87\\ude45-\\ude47\\ude4b\\ude4d\\ude4e\\udea3\\udeb4-\\udeb6]|\\ud83e[\\udd26\\udd35\\udd37-\\udd39\\udd3d\\udd3e\\uddb8\\uddb9\\uddcd-\\uddcf\\uddd6-\\udddd])(?:\\ud83c[\\udffb-\\udfff])?\\u200d[\\u2640\\u2642]\\ufe0f|(?:\\ud83d\\udc68\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68|\\ud83d\\udc68\\u200d\\ud83d\\udc68\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc68\\u200d\\ud83d\\udc68\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc68\\u200d\\ud83d\\udc69\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc68\\u200d\\ud83d\\udc69\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc69\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d[\\udc68\\udc69]|\\ud83d\\udc69\\u200d\\ud83d\\udc69\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc69\\u200d\\ud83d\\udc69\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc68\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68|\\ud83d\\udc68\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc68\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc68\\u200d\\ud83d\\udc68\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc68\\u200d\\ud83d\\udc69\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc69\\u200d\\u2764\\ufe0f\\u200d\\ud83d[\\udc68\\udc69]|\\ud83d\\udc69\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc69\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc69\\u200d\\ud83d\\udc69\\u200d\\ud83d[\\udc66\\udc67]|\\ud83c\\udff3\\ufe0f\\u200d\\u26a7\\ufe0f|\\ud83c\\udff3\\ufe0f\\u200d\\ud83c\\udf08|\\ud83c\\udff4\\u200d\\u2620\\ufe0f|\\ud83d\\udc15\\u200d\\ud83e\\uddba|\\ud83d\\udc3b\\u200d\\u2744\\ufe0f|\\ud83d\\udc41\\u200d\\ud83d\\udde8|\\ud83d\\udc68\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc69\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc6f\\u200d\\u2640\\ufe0f|\\ud83d\\udc6f\\u200d\\u2642\\ufe0f|\\ud83e\\udd3c\\u200d\\u2640\\ufe0f|\\ud83e\\udd3c\\u200d\\u2642\\ufe0f|\\ud83e\\uddde\\u200d\\u2640\\ufe0f|\\ud83e\\uddde\\u200d\\u2642\\ufe0f|\\ud83e\\udddf\\u200d\\u2640\\ufe0f|\\ud83e\\udddf\\u200d\\u2642\\ufe0f|\\ud83d\\udc08\\u200d\\u2b1b)|[#*0-9]\\ufe0f?\\u20e3|(?:[©®\\u2122\\u265f]\\ufe0f)|(?:\\ud83c[\\udc04\\udd70\\udd71\\udd7e\\udd7f\\ude02\\ude1a\\ude2f\\ude37\\udf21\\udf24-\\udf2c\\udf36\\udf7d\\udf96\\udf97\\udf99-\\udf9b\\udf9e\\udf9f\\udfcd\\udfce\\udfd4-\\udfdf\\udff3\\udff5\\udff7]|\\ud83d[\\udc3f\\udc41\\udcfd\\udd49\\udd4a\\udd6f\\udd70\\udd73\\udd76-\\udd79\\udd87\\udd8a-\\udd8d\\udda5\\udda8\\uddb1\\uddb2\\uddbc\\uddc2-\\uddc4\\uddd1-\\uddd3\\udddc-\\uddde\\udde1\\udde3\\udde8\\uddef\\uddf3\\uddfa\\udecb\\udecd-\\udecf\\udee0-\\udee5\\udee9\\udef0\\udef3]|[\\u203c\\u2049\\u2139\\u2194-\\u2199\\u21a9\\u21aa\\u231a\\u231b\\u2328\\u23cf\\u23ed-\\u23ef\\u23f1\\u23f2\\u23f8-\\u23fa\\u24c2\\u25aa\\u25ab\\u25b6\\u25c0\\u25fb-\\u25fe\\u2600-\\u2604\\u260e\\u2611\\u2614\\u2615\\u2618\\u2620\\u2622\\u2623\\u2626\\u262a\\u262e\\u262f\\u2638-\\u263a\\u2640\\u2642\\u2648-\\u2653\\u2660\\u2663\\u2665\\u2666\\u2668\\u267b\\u267f\\u2692-\\u2697\\u2699\\u269b\\u269c\\u26a0\\u26a1\\u26a7\\u26aa\\u26ab\\u26b0\\u26b1\\u26bd\\u26be\\u26c4\\u26c5\\u26c8\\u26cf\\u26d1\\u26d3\\u26d4\\u26e9\\u26ea\\u26f0-\\u26f5\\u26f8\\u26fa\\u26fd\\u2702\\u2708\\u2709\\u270f\\u2712\\u2714\\u2716\\u271d\\u2721\\u2733\\u2734\\u2744\\u2747\\u2757\\u2763\\u2764\\u27a1\\u2934\\u2935\\u2b05-\\u2b07\\u2b1b\\u2b1c\\u2b50\\u2b55\\u3030\\u303d\\u3297\\u3299])(?:\\ufe0f|(?!\\ufe0e))|(?:(?:\\ud83c[\\udfcb\\udfcc]|\\ud83d[\\udd74\\udd75\\udd90]|[\\u261d\\u26f7\\u26f9\\u270c\\u270d])(?:\\ufe0f|(?!\\ufe0e))|(?:\\ud83c[\\udf85\\udfc2-\\udfc4\\udfc7\\udfca]|\\ud83d[\\udc42\\udc43\\udc46-\\udc50\\udc66-\\udc69\\udc6e\\udc70-\\udc78\\udc7c\\udc81-\\udc83\\udc85-\\udc87\\udcaa\\udd7a\\udd95\\udd96\\ude45-\\ude47\\ude4b-\\ude4f\\udea3\\udeb4-\\udeb6\\udec0\\udecc]|\\ud83e[\\udd0c\\udd0f\\udd18-\\udd1c\\udd1e\\udd1f\\udd26\\udd30-\\udd39\\udd3d\\udd3e\\udd77\\uddb5\\uddb6\\uddb8\\uddb9\\uddbb\\uddcd-\\uddcf\\uddd1-\\udddd]|[\\u270a\\u270b]))(?:\\ud83c[\\udffb-\\udfff])?|(?:\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40\\udc65\\udb40\\udc6e\\udb40\\udc67\\udb40\\udc7f|\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40\\udc73\\udb40\\udc63\\udb40\\udc74\\udb40\\udc7f|\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40\\udc77\\udb40\\udc6c\\udb40\\udc73\\udb40\\udc7f|\\ud83c\\udde6\\ud83c[\\udde8-\\uddec\\uddee\\uddf1\\uddf2\\uddf4\\uddf6-\\uddfa\\uddfc\\uddfd\\uddff]|\\ud83c\\udde7\\ud83c[\\udde6\\udde7\\udde9-\\uddef\\uddf1-\\uddf4\\uddf6-\\uddf9\\uddfb\\uddfc\\uddfe\\uddff]|\\ud83c\\udde8\\ud83c[\\udde6\\udde8\\udde9\\uddeb-\\uddee\\uddf0-\\uddf5\\uddf7\\uddfa-\\uddff]|\\ud83c\\udde9\\ud83c[\\uddea\\uddec\\uddef\\uddf0\\uddf2\\uddf4\\uddff]|\\ud83c\\uddea\\ud83c[\\udde6\\udde8\\uddea\\uddec\\udded\\uddf7-\\uddfa]|\\ud83c\\uddeb\\ud83c[\\uddee-\\uddf0\\uddf2\\uddf4\\uddf7]|\\ud83c\\uddec\\ud83c[\\udde6\\udde7\\udde9-\\uddee\\uddf1-\\uddf3\\uddf5-\\uddfa\\uddfc\\uddfe]|\\ud83c\\udded\\ud83c[\\uddf0\\uddf2\\uddf3\\uddf7\\uddf9\\uddfa]|\\ud83c\\uddee\\ud83c[\\udde8-\\uddea\\uddf1-\\uddf4\\uddf6-\\uddf9]|\\ud83c\\uddef\\ud83c[\\uddea\\uddf2\\uddf4\\uddf5]|\\ud83c\\uddf0\\ud83c[\\uddea\\uddec-\\uddee\\uddf2\\uddf3\\uddf5\\uddf7\\uddfc\\uddfe\\uddff]|\\ud83c\\uddf1\\ud83c[\\udde6-\\udde8\\uddee\\uddf0\\uddf7-\\uddfb\\uddfe]|\\ud83c\\uddf2\\ud83c[\\udde6\\udde8-\\udded\\uddf0-\\uddff]|\\ud83c\\uddf3\\ud83c[\\udde6\\udde8\\uddea-\\uddec\\uddee\\uddf1\\uddf4\\uddf5\\uddf7\\uddfa\\uddff]|\\ud83c\\uddf4\\ud83c\\uddf2|\\ud83c\\uddf5\\ud83c[\\udde6\\uddea-\\udded\\uddf0-\\uddf3\\uddf7-\\uddf9\\uddfc\\uddfe]|\\ud83c\\uddf6\\ud83c\\udde6|\\ud83c\\uddf7\\ud83c[\\uddea\\uddf4\\uddf8\\uddfa\\uddfc]|\\ud83c\\uddf8\\ud83c[\\udde6-\\uddea\\uddec-\\uddf4\\uddf7-\\uddf9\\uddfb\\uddfd-\\uddff]|\\ud83c\\uddf9\\ud83c[\\udde6\\udde8\\udde9\\uddeb-\\udded\\uddef-\\uddf4\\uddf7\\uddf9\\uddfb\\uddfc\\uddff]|\\ud83c\\uddfa\\ud83c[\\udde6\\uddec\\uddf2\\uddf3\\uddf8\\uddfe\\uddff]|\\ud83c\\uddfb\\ud83c[\\udde6\\udde8\\uddea\\uddec\\uddee\\uddf3\\uddfa]|\\ud83c\\uddfc\\ud83c[\\uddeb\\uddf8]|\\ud83c\\uddfd\\ud83c\\uddf0|\\ud83c\\uddfe\\ud83c[\\uddea\\uddf9]|\\ud83c\\uddff\\ud83c[\\udde6\\uddf2\\uddfc]|\\ud83c[\\udccf\\udd8e\\udd91-\\udd9a\\udde6-\\uddff\\ude01\\ude32-\\ude36\\ude38-\\ude3a\\ude50\\ude51\\udf00-\\udf20\\udf2d-\\udf35\\udf37-\\udf7c\\udf7e-\\udf84\\udf86-\\udf93\\udfa0-\\udfc1\\udfc5\\udfc6\\udfc8\\udfc9\\udfcf-\\udfd3\\udfe0-\\udff0\\udff4\\udff8-\\udfff]|\\ud83d[\\udc00-\\udc3e\\udc40\\udc44\\udc45\\udc51-\\udc65\\udc6a\\udc6f\\udc79-\\udc7b\\udc7d-\\udc80\\udc84\\udc88-\\udca9\\udcab-\\udcfc\\udcff-\\udd3d\\udd4b-\\udd4e\\udd50-\\udd67\\udda4\\uddfb-\\ude44\\ude48-\\ude4a\\ude80-\\udea2\\udea4-\\udeb3\\udeb7-\\udebf\\udec1-\\udec5\\uded0-\\uded2\\uded5-\\uded7\\udeeb\\udeec\\udef4-\\udefc\\udfe0-\\udfeb]|\\ud83e[\\udd0d\\udd0e\\udd10-\\udd17\\udd1d\\udd20-\\udd25\\udd27-\\udd2f\\udd3a\\udd3c\\udd3f-\\udd45\\udd47-\\udd76\\udd78\\udd7a-\\uddb4\\uddb7\\uddba\\uddbc-\\uddcb\\uddd0\\uddde-\\uddff\\ude70-\\ude74\\ude78-\\ude7a\\ude80-\\ude86\\ude90-\\udea8\\udeb0-\\udeb6\\udec0-\\udec2\\uded0-\\uded6]|[\\u23e9-\\u23ec\\u23f0\\u23f3\\u267e\\u26ce\\u2705\\u2728\\u274c\\u274e\\u2753-\\u2755\\u2795-\\u2797\\u27b0\\u27bf\\ue50a])|\\ufe0f/g;","// Bind an object/factory of actions to the store and wrap them.\nexport function mapActions(actions, store) {\n\tif (typeof actions==='function') actions = actions(store);\n\tlet mapped = {};\n\tfor (let i in actions) {\n\t\tmapped[i] = store.action(actions[i]);\n\t}\n\treturn mapped;\n}\n\n\n// select('foo,bar') creates a function of the form: ({ foo, bar }) => ({ foo, bar })\nexport function select(properties) {\n\tif (typeof properties==='string') properties = properties.split(/\\s*,\\s*/);\n\treturn state => {\n\t\tlet selected = {};\n\t\tfor (let i=0; i<properties.length; i++) {\n\t\t\tselected[properties[i]] = state[properties[i]];\n\t\t}\n\t\treturn selected;\n\t};\n}\n\n\n// Lighter Object.assign stand-in\nexport function assign(obj, props) {\n\tfor (let i in props) obj[i] = props[i];\n\treturn obj;\n}\n","import { h, Component } from 'preact';\nimport { assign, mapActions, select } from '../util';\n\n/**\n * Wire a component up to the store. Passes state as props, re-renders on change.\n * @param {Function|Array|String} mapStateToProps  A function mapping of store state to prop values, or an array/CSV of properties to map.\n * @param {Function|Object} [actions] \t\t\t\tAction functions (pure state mappings), or a factory returning them. Every action function gets current state as the first parameter and any other params next\n * @returns {Component} ConnectedComponent\n * @example\n * const Foo = connect('foo,bar')( ({ foo, bar }) => <div /> )\n * @example\n * const actions = { someAction }\n * const Foo = connect('foo,bar', actions)( ({ foo, bar, someAction }) => <div /> )\n * @example\n * @connect( state => ({ foo: state.foo, bar: state.bar }) )\n * export class Foo { render({ foo, bar }) { } }\n */\nexport function connect(mapStateToProps, actions) {\n\tif (typeof mapStateToProps!='function') {\n\t\tmapStateToProps = select(mapStateToProps || {});\n\t}\n\treturn Child => {\n\t\tfunction Wrapper(props, context) {\n\t\t\tconst store = context.store;\n\t\t\tlet state = mapStateToProps(store ? store.getState() : {}, props);\n\t\t\tconst boundActions = actions ? mapActions(actions, store) : { store };\n\t\t\tlet update = () => {\n\t\t\t\tlet mapped = mapStateToProps(store ? store.getState() : {}, props);\n\t\t\t\tfor (let i in mapped) if (mapped[i]!==state[i]) {\n\t\t\t\t\tstate = mapped;\n\t\t\t\t\treturn this.setState({});\n\t\t\t\t}\n\t\t\t\tfor (let i in state) if (!(i in mapped)) {\n\t\t\t\t\tstate = mapped;\n\t\t\t\t\treturn this.setState({});\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis.componentWillReceiveProps = p => {\n\t\t\t\tprops = p;\n\t\t\t\tupdate();\n\t\t\t};\n\t\t\tthis.componentDidMount = () => {\n\t\t\t\tstore.subscribe(update);\n\t\t\t};\n\t\t\tthis.componentWillUnmount = () => {\n\t\t\t\tstore.unsubscribe(update);\n\t\t\t};\n\t\t\tthis.render = props => h(Child, assign(assign(assign({}, boundActions), props), state));\n\t\t}\n\t\treturn (Wrapper.prototype = new Component()).constructor = Wrapper;\n\t};\n}\n\n\n/**\n * Provider exposes a store (passed as `props.store`) into context.\n *\n * Generally, an entire application is wrapped in a single `<Provider>` at the root.\n * @class\n * @extends Component\n * @param {Object} props\n * @param {Store} props.store\tA {Store} instance to expose via context.\n */\nexport function Provider(props) {\n\tthis.getChildContext = () => ({ store: props.store });\n}\nProvider.prototype.render = props => props.children && props.children[0] || props.children;\n","/* unzipit@1.3.3, license MIT */\n/* global SharedArrayBuffer, process */\n\nfunction readBlobAsArrayBuffer(blob) {\n  if (blob.arrayBuffer) {\n    return blob.arrayBuffer();\n  }\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.addEventListener('loadend', () => {\n      resolve(reader.result);\n    });\n    reader.addEventListener('error', reject);\n    reader.readAsArrayBuffer(blob);\n  });\n}\n\nasync function readBlobAsUint8Array(blob) {\n  const arrayBuffer = await readBlobAsArrayBuffer(blob);\n  return new Uint8Array(arrayBuffer);\n}\n\nfunction isBlob(v) {\n  return typeof Blob !== 'undefined' && v instanceof Blob;\n}\n\nfunction isSharedArrayBuffer(b) {\n  return typeof SharedArrayBuffer !== 'undefined' && b instanceof SharedArrayBuffer;\n}\n\nconst isNode =\n    (typeof process !== 'undefined') &&\n    process.versions &&\n    (typeof process.versions.node !== 'undefined') &&\n    (typeof process.versions.electron === 'undefined');\n\nfunction isTypedArraySameAsArrayBuffer(typedArray) {\n  return typedArray.byteOffset === 0 && typedArray.byteLength === typedArray.buffer.byteLength;\n}\n\nclass ArrayBufferReader {\n  constructor(arrayBufferOrView) {\n    this.typedArray = (arrayBufferOrView instanceof ArrayBuffer || isSharedArrayBuffer(arrayBufferOrView))\n       ? new Uint8Array(arrayBufferOrView)\n       : new Uint8Array(arrayBufferOrView.buffer, arrayBufferOrView.byteOffset, arrayBufferOrView.byteLength);\n  }\n  async getLength() {\n    return this.typedArray.byteLength;\n  }\n  async read(offset, length) {\n    return new Uint8Array(this.typedArray.buffer, this.typedArray.byteOffset + offset, length);\n  }\n}\n\nclass BlobReader {\n  constructor(blob) {\n    this.blob = blob;\n  }\n  async getLength() {\n    return this.blob.size;\n  }\n  async read(offset, length) {\n    const blob = this.blob.slice(offset, offset + length);\n    const arrayBuffer = await readBlobAsArrayBuffer(blob);\n    return new Uint8Array(arrayBuffer);\n  }\n  async sliceAsBlob(offset, length, type = '') {\n    return this.blob.slice(offset, offset + length, type);\n  }\n}\n\nclass HTTPRangeReader {\n  constructor(url) {\n    this.url = url;\n  }\n  async getLength() {\n    if (this.length === undefined) {\n      const req = await fetch(this.url, { method: 'HEAD' });\n      if (!req.ok) {\n        throw new Error(`failed http request ${this.url}, status: ${req.status}: ${req.statusText}`);\n      }\n      this.length = parseInt(req.headers.get('content-length'));\n      if (Number.isNaN(this.length)) {\n        throw Error('could not get length');\n      }\n    }\n    return this.length;\n  }\n  async read(offset, size) {\n    if (size === 0) {\n      return new Uint8Array(0);\n    }\n    const req = await fetch(this.url, {\n      headers: {\n        Range: `bytes=${offset}-${offset + size - 1}`,\n      },\n    });\n    if (!req.ok) {\n      throw new Error(`failed http request ${this.url}, status: ${req.status} offset: ${offset} size: ${size}: ${req.statusText}`);\n    }\n    const buffer = await req.arrayBuffer();\n    return new Uint8Array(buffer);\n  }\n}\n\nfunction inflate(data, buf) {\n\tvar u8=Uint8Array;\n\tif(data[0]==3 && data[1]==0) return (buf ? buf : new u8(0));\n\tvar bitsF = _bitsF, bitsE = _bitsE, decodeTiny = _decodeTiny, get17 = _get17;\n\t\n\tvar noBuf = (buf==null);\n\tif(noBuf) buf = new u8((data.length>>>2)<<3);\n\t\n\tvar BFINAL=0, BTYPE=0, HLIT=0, HDIST=0, HCLEN=0, ML=0, MD=0; \t\n\tvar off = 0, pos = 0;\n\tvar lmap, dmap;\n\t\n\twhile(BFINAL==0) {\t\t\n\t\tBFINAL = bitsF(data, pos  , 1);\n\t\tBTYPE  = bitsF(data, pos+1, 2);  pos+=3;\n\t\t//console.log(BFINAL, BTYPE);\n\t\t\n\t\tif(BTYPE==0) {\n\t\t\tif((pos&7)!=0) pos+=8-(pos&7);\n\t\t\tvar p8 = (pos>>>3)+4, len = data[p8-4]|(data[p8-3]<<8);  //console.log(len);//bitsF(data, pos, 16), \n\t\t\tif(noBuf) buf=_check(buf, off+len);\n\t\t\tbuf.set(new u8(data.buffer, data.byteOffset+p8, len), off);\n\t\t\t//for(var i=0; i<len; i++) buf[off+i] = data[p8+i];\n\t\t\t//for(var i=0; i<len; i++) if(buf[off+i] != data[p8+i]) throw \"e\";\n\t\t\tpos = ((p8+len)<<3);  off+=len;  continue;\n\t\t}\n\t\tif(noBuf) buf=_check(buf, off+(1<<17));  // really not enough in many cases (but PNG and ZIP provide buffer in advance)\n\t\tif(BTYPE==1) {  lmap = U.flmap;  dmap = U.fdmap;  ML = (1<<9)-1;  MD = (1<<5)-1;   }\n\t\tif(BTYPE==2) {\n\t\t\tHLIT  = bitsE(data, pos   , 5)+257;  \n\t\t\tHDIST = bitsE(data, pos+ 5, 5)+  1;  \n\t\t\tHCLEN = bitsE(data, pos+10, 4)+  4;  pos+=14;\n\t\t\tfor(var i=0; i<38; i+=2) {  U.itree[i]=0;  U.itree[i+1]=0;  }\n\t\t\tvar tl = 1;\n\t\t\tfor(var i=0; i<HCLEN; i++) {  var l=bitsE(data, pos+i*3, 3);  U.itree[(U.ordr[i]<<1)+1] = l;  if(l>tl)tl=l;  }     pos+=3*HCLEN;  //console.log(itree);\n\t\t\tmakeCodes(U.itree, tl);\n\t\t\tcodes2map(U.itree, tl, U.imap);\n\t\t\t\n\t\t\tlmap = U.lmap;  dmap = U.dmap;\n\t\t\t\n\t\t\tpos = decodeTiny(U.imap, (1<<tl)-1, HLIT+HDIST, data, pos, U.ttree);\n\t\t\tvar mx0 = _copyOut(U.ttree,    0, HLIT , U.ltree);  ML = (1<<mx0)-1;\n\t\t\tvar mx1 = _copyOut(U.ttree, HLIT, HDIST, U.dtree);  MD = (1<<mx1)-1;\n\t\t\t\n\t\t\t//var ml = decodeTiny(U.imap, (1<<tl)-1, HLIT , data, pos, U.ltree); ML = (1<<(ml>>>24))-1;  pos+=(ml&0xffffff);\n\t\t\tmakeCodes(U.ltree, mx0);\n\t\t\tcodes2map(U.ltree, mx0, lmap);\n\t\t\t\n\t\t\t//var md = decodeTiny(U.imap, (1<<tl)-1, HDIST, data, pos, U.dtree); MD = (1<<(md>>>24))-1;  pos+=(md&0xffffff);\n\t\t\tmakeCodes(U.dtree, mx1);\n\t\t\tcodes2map(U.dtree, mx1, dmap);\n\t\t}\n\t\t//var ooff=off, opos=pos;\n\t\twhile(true) {\n\t\t\tvar code = lmap[get17(data, pos) & ML];  pos += code&15;\n\t\t\tvar lit = code>>>4;  //U.lhst[lit]++;  \n\t\t\tif((lit>>>8)==0) {  buf[off++] = lit;  }\n\t\t\telse if(lit==256) {  break;  }\n\t\t\telse {\n\t\t\t\tvar end = off+lit-254;\n\t\t\t\tif(lit>264) { var ebs = U.ldef[lit-257];  end = off + (ebs>>>3) + bitsE(data, pos, ebs&7);  pos += ebs&7;  }\n\t\t\t\t//dst[end-off]++;\n\t\t\t\t\n\t\t\t\tvar dcode = dmap[get17(data, pos) & MD];  pos += dcode&15;\n\t\t\t\tvar dlit = dcode>>>4;\n\t\t\t\tvar dbs = U.ddef[dlit], dst = (dbs>>>4) + bitsF(data, pos, dbs&15);  pos += dbs&15;\n\t\t\t\t\n\t\t\t\t//var o0 = off-dst, stp = Math.min(end-off, dst);\n\t\t\t\t//if(stp>20) while(off<end) {  buf.copyWithin(off, o0, o0+stp);  off+=stp;  }  else\n\t\t\t\t//if(end-dst<=off) buf.copyWithin(off, off-dst, end-dst);  else\n\t\t\t\t//if(dst==1) buf.fill(buf[off-1], off, end);  else\n\t\t\t\tif(noBuf) buf=_check(buf, off+(1<<17));\n\t\t\t\twhile(off<end) {  buf[off]=buf[off++-dst];    buf[off]=buf[off++-dst];  buf[off]=buf[off++-dst];  buf[off]=buf[off++-dst];  }   \n\t\t\t\toff=end;\n\t\t\t\t//while(off!=end) {  buf[off]=buf[off++-dst];  }\n\t\t\t}\n\t\t}\n\t\t//console.log(off-ooff, (pos-opos)>>>3);\n\t}\n\t//console.log(dst);\n\t//console.log(tlen, dlen, off-tlen+tcnt);\n\treturn buf.length==off ? buf : buf.slice(0,off);\n}\nfunction _check(buf, len) {\n\tvar bl=buf.length;  if(len<=bl) return buf;\n\tvar nbuf = new Uint8Array(Math.max(bl<<1,len));  nbuf.set(buf,0);\n\t//for(var i=0; i<bl; i+=4) {  nbuf[i]=buf[i];  nbuf[i+1]=buf[i+1];  nbuf[i+2]=buf[i+2];  nbuf[i+3]=buf[i+3];  }\n\treturn nbuf;\n}\n\nfunction _decodeTiny(lmap, LL, len, data, pos, tree) {\n\tvar bitsE = _bitsE, get17 = _get17;\n\tvar i = 0;\n\twhile(i<len) {\n\t\tvar code = lmap[get17(data, pos)&LL];  pos+=code&15;\n\t\tvar lit = code>>>4; \n\t\tif(lit<=15) {  tree[i]=lit;  i++;  }\n\t\telse {\n\t\t\tvar ll = 0, n = 0;\n\t\t\tif(lit==16) {\n\t\t\t\tn = (3  + bitsE(data, pos, 2));  pos += 2;  ll = tree[i-1];\n\t\t\t}\n\t\t\telse if(lit==17) {\n\t\t\t\tn = (3  + bitsE(data, pos, 3));  pos += 3;\n\t\t\t}\n\t\t\telse if(lit==18) {\n\t\t\t\tn = (11 + bitsE(data, pos, 7));  pos += 7;\n\t\t\t}\n\t\t\tvar ni = i+n;\n\t\t\twhile(i<ni) {  tree[i]=ll;  i++; }\n\t\t}\n\t}\n\treturn pos;\n}\nfunction _copyOut(src, off, len, tree) {\n\tvar mx=0, i=0, tl=tree.length>>>1;\n\twhile(i<len) {  var v=src[i+off];  tree[(i<<1)]=0;  tree[(i<<1)+1]=v;  if(v>mx)mx=v;  i++;  }\n\twhile(i<tl ) {  tree[(i<<1)]=0;  tree[(i<<1)+1]=0;  i++;  }\n\treturn mx;\n}\n\nfunction makeCodes(tree, MAX_BITS) {  // code, length\n\tvar max_code = tree.length;\n\tvar code, bits, n, i, len;\n\t\n\tvar bl_count = U.bl_count;  for(var i=0; i<=MAX_BITS; i++) bl_count[i]=0;\n\tfor(i=1; i<max_code; i+=2) bl_count[tree[i]]++;\n\t\n\tvar next_code = U.next_code;\t// smallest code for each length\n\t\n\tcode = 0;\n\tbl_count[0] = 0;\n\tfor (bits = 1; bits <= MAX_BITS; bits++) {\n\t\tcode = (code + bl_count[bits-1]) << 1;\n\t\tnext_code[bits] = code;\n\t}\n\t\n\tfor (n = 0; n < max_code; n+=2) {\n\t\tlen = tree[n+1];\n\t\tif (len != 0) {\n\t\t\ttree[n] = next_code[len];\n\t\t\tnext_code[len]++;\n\t\t}\n\t}\n}\nfunction codes2map(tree, MAX_BITS, map) {\n\tvar max_code = tree.length;\n\tvar r15 = U.rev15;\n\tfor(var i=0; i<max_code; i+=2) if(tree[i+1]!=0)  {\n\t\tvar lit = i>>1;\n\t\tvar cl = tree[i+1], val = (lit<<4)|cl; // :  (0x8000 | (U.of0[lit-257]<<7) | (U.exb[lit-257]<<4) | cl);\n\t\tvar rest = (MAX_BITS-cl), i0 = tree[i]<<rest, i1 = i0 + (1<<rest);\n\t\t//tree[i]=r15[i0]>>>(15-MAX_BITS);\n\t\twhile(i0!=i1) {\n\t\t\tvar p0 = r15[i0]>>>(15-MAX_BITS);\n\t\t\tmap[p0]=val;  i0++;\n\t\t}\n\t}\n}\nfunction revCodes(tree, MAX_BITS) {\n\tvar r15 = U.rev15, imb = 15-MAX_BITS;\n\tfor(var i=0; i<tree.length; i+=2) {  var i0 = (tree[i]<<(MAX_BITS-tree[i+1]));  tree[i] = r15[i0]>>>imb;  }\n}\n\nfunction _bitsE(dt, pos, length) {  return ((dt[pos>>>3] | (dt[(pos>>>3)+1]<<8)                        )>>>(pos&7))&((1<<length)-1);  }\nfunction _bitsF(dt, pos, length) {  return ((dt[pos>>>3] | (dt[(pos>>>3)+1]<<8) | (dt[(pos>>>3)+2]<<16))>>>(pos&7))&((1<<length)-1);  }\n/*\nfunction _get9(dt, pos) {\n\treturn ((dt[pos>>>3] | (dt[(pos>>>3)+1]<<8))>>>(pos&7))&511;\n} */\nfunction _get17(dt, pos) {\t// return at least 17 meaningful bytes\n\treturn (dt[pos>>>3] | (dt[(pos>>>3)+1]<<8) | (dt[(pos>>>3)+2]<<16) )>>>(pos&7);\n}\nconst U = function(){\n\tvar u16=Uint16Array, u32=Uint32Array;\n\treturn {\n\t\tnext_code : new u16(16),\n\t\tbl_count  : new u16(16),\n\t\tordr : [ 16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15 ],\n\t\tof0  : [3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],\n\t\texb  : [0,0,0,0,0,0,0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4,  4,  5,  5,  5,  5,  0,  0,  0,  0],\n\t\tldef : new u16(32),\n\t\tdf0  : [1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577, 65535, 65535],\n\t\tdxb  : [0,0,0,0,1,1,2, 2, 3, 3, 4, 4, 5, 5,  6,  6,  7,  7,  8,  8,   9,   9,  10,  10,  11,  11,  12,   12,   13,   13,     0,     0],\n\t\tddef : new u32(32),\n\t\tflmap: new u16(  512),  fltree: [],\n\t\tfdmap: new u16(   32),  fdtree: [],\n\t\tlmap : new u16(32768),  ltree : [],  ttree:[],\n\t\tdmap : new u16(32768),  dtree : [],\n\t\timap : new u16(  512),  itree : [],\n\t\t//rev9 : new u16(  512)\n\t\trev15: new u16(1<<15),\n\t\tlhst : new u32(286), dhst : new u32( 30), ihst : new u32(19),\n\t\tlits : new u32(15000),\n\t\tstrt : new u16(1<<16),\n\t\tprev : new u16(1<<15)\n\t};  \n} ();\n\n(function(){\t\n\tvar len = 1<<15;\n\tfor(var i=0; i<len; i++) {\n\t\tvar x = i;\n\t\tx = (((x & 0xaaaaaaaa) >>> 1) | ((x & 0x55555555) << 1));\n\t\tx = (((x & 0xcccccccc) >>> 2) | ((x & 0x33333333) << 2));\n\t\tx = (((x & 0xf0f0f0f0) >>> 4) | ((x & 0x0f0f0f0f) << 4));\n\t\tx = (((x & 0xff00ff00) >>> 8) | ((x & 0x00ff00ff) << 8));\n\t\tU.rev15[i] = (((x >>> 16) | (x << 16)))>>>17;\n\t}\n\t\n\tfunction pushV(tgt, n, sv) {  while(n--!=0) tgt.push(0,sv);  }\n\t\n\tfor(var i=0; i<32; i++) {  U.ldef[i]=(U.of0[i]<<3)|U.exb[i];  U.ddef[i]=(U.df0[i]<<4)|U.dxb[i];  }\n\t\n\tpushV(U.fltree, 144, 8);  pushV(U.fltree, 255-143, 9);  pushV(U.fltree, 279-255, 7);  pushV(U.fltree,287-279,8);\n\t/*\n\tvar i = 0;\n\tfor(; i<=143; i++) U.fltree.push(0,8);\n\tfor(; i<=255; i++) U.fltree.push(0,9);\n\tfor(; i<=279; i++) U.fltree.push(0,7);\n\tfor(; i<=287; i++) U.fltree.push(0,8);\n\t*/\n\tmakeCodes(U.fltree, 9);\n\tcodes2map(U.fltree, 9, U.flmap);\n\trevCodes (U.fltree, 9);\n\t\n\tpushV(U.fdtree,32,5);\n\t//for(i=0;i<32; i++) U.fdtree.push(0,5);\n\tmakeCodes(U.fdtree, 5);\n\tcodes2map(U.fdtree, 5, U.fdmap);\n\trevCodes (U.fdtree, 5);\n\t\n\tpushV(U.itree,19,0);  pushV(U.ltree,286,0);  pushV(U.dtree,30,0);  pushV(U.ttree,320,0);\n\t/*\n\tfor(var i=0; i< 19; i++) U.itree.push(0,0);\n\tfor(var i=0; i<286; i++) U.ltree.push(0,0);\n\tfor(var i=0; i< 30; i++) U.dtree.push(0,0);\n\tfor(var i=0; i<320; i++) U.ttree.push(0,0);\n\t*/\n})();\n\nconst crc = {\n\ttable : ( function() {\n\t   var tab = new Uint32Array(256);\n\t   for (var n=0; n<256; n++) {\n\t\t\tvar c = n;\n\t\t\tfor (var k=0; k<8; k++) {\n\t\t\t\tif (c & 1)  c = 0xedb88320 ^ (c >>> 1);\n\t\t\t\telse        c = c >>> 1;\n\t\t\t}\n\t\t\ttab[n] = c;  }    \n\t\treturn tab;  })(),\n\tupdate : function(c, buf, off, len) {\n\t\tfor (var i=0; i<len; i++)  c = crc.table[(c ^ buf[off+i]) & 0xff] ^ (c >>> 8);\n\t\treturn c;\n\t},\n\tcrc : function(b,o,l)  {  return crc.update(0xffffffff,b,o,l) ^ 0xffffffff;  }\n};\n\nfunction inflateRaw(file, buf) {  return inflate(file, buf);  }\n\n/* global module */\n\nconst config = {\n  numWorkers: 1,\n  workerURL: '',\n  useWorkers: false,\n};\n\nlet nextId = 0;\n\n// Requests are put on a queue.\n// We don't send the request to the worker until the worker\n// is finished. This probably adds a small amount of latency\n// but the issue is imagine you have 2 workers. You give worker\n// A x seconds of work to do and worker B y seconds of work to\n// do. You don't know which will finish first. If you give\n// the worker with more work to do the request then you'll\n// waste time.\n\n// note: we can't check `workers.length` for deciding if\n// we've reached `config.numWorkers` because creation the worker\n// is async which means other requests to make workers might\n// come in before a worker gets added to `workers`\nlet numWorkers = 0;\nlet canUseWorkers = true;   // gets set to false if we can't start a worker\nconst workers = [];\nconst availableWorkers = [];\nconst waitingForWorkerQueue = [];\nconst currentlyProcessingIdToRequestMap = new Map();\n\nfunction handleResult(e) {\n  makeWorkerAvailable(e.target);\n  const {id, error, data} = e.data;\n  const request = currentlyProcessingIdToRequestMap.get(id);\n  currentlyProcessingIdToRequestMap.delete(id);\n  if (error) {\n    request.reject(error);\n  } else {\n    request.resolve(data);\n  }\n}\n\n// Because Firefox uses non-standard onerror to signal an error.\nfunction startWorker(url) {\n  return new Promise((resolve, reject) => {\n    const worker = new Worker(url);\n    worker.onmessage = (e) => {\n      if (e.data === 'start') {\n        worker.onerror = undefined;\n        worker.onmessage = undefined;\n        resolve(worker);\n      } else {\n        reject(new Error(`unexpected message: ${e.data}`));\n      }\n    };\n    worker.onerror = reject;\n  });\n}\n\nfunction dynamicRequire(mod, request) {\n  return mod.require(request);\n}\n\nconst workerHelper = (function() {\n  if (isNode) {\n    // We need to use `dynamicRequire` because `require` on it's own will be optimized by webpack.\n    const {Worker} = dynamicRequire(module, 'worker_threads');\n    return {\n      async createWorker(url) {\n        return new Worker(url);\n      },\n      addEventListener(worker, fn) {\n        worker.on('message', (data) => {\n          fn({target: worker, data});\n        });\n      },\n      async terminate(worker) {\n        await worker.terminate();\n      },\n    };\n  } else {\n    return {\n      async createWorker(url) {\n        // I don't understand this security issue\n        // Apparently there is some iframe setting or http header\n        // that prevents cross domain workers. But, I can manually\n        // download the text and do it. I reported this to Chrome\n        // and they said it was fine so ¯\\_(ツ)_/¯\n        try {\n          const worker = await startWorker(url);\n          return worker;\n        } catch (e) {\n          console.warn('could not load worker:', url);\n        }\n\n        let text;\n        try {\n          const req = await fetch(url, {mode: 'cors'});\n          if (!req.ok) {\n            throw new Error(`could not load: ${url}`);\n          }\n          text = await req.text();\n          url = URL.createObjectURL(new Blob([text], {type: 'application/javascript'}));\n          const worker = await startWorker(url);\n          config.workerURL = url;  // this is a hack. What's a better way to structure this code?\n          return worker;\n        } catch (e) {\n          console.warn('could not load worker via fetch:', url);\n        }\n\n        if (text !== undefined) {\n          try {\n            url = `data:application/javascript;base64,${btoa(text)}`;\n            const worker = await startWorker(url);\n            config.workerURL = url;\n            return worker;\n          } catch (e) {\n            console.warn('could not load worker via dataURI');\n          }\n        }\n\n        console.warn('workers will not be used');\n        throw new Error('can not start workers');\n      },\n      addEventListener(worker, fn) {\n        worker.addEventListener('message', fn);\n      },\n      async terminate(worker) {\n        worker.terminate();\n      },\n    };\n  }\n}());\n\nfunction makeWorkerAvailable(worker) {\n  availableWorkers.push(worker);\n  processWaitingForWorkerQueue();\n}\n\nasync function getAvailableWorker() {\n  if (availableWorkers.length === 0 && numWorkers < config.numWorkers) {\n    ++numWorkers;  // see comment at numWorkers declaration\n    try {\n      const worker = await workerHelper.createWorker(config.workerURL);\n      workers.push(worker);\n      availableWorkers.push(worker);\n      workerHelper.addEventListener(worker, handleResult);\n    } catch (e) {\n      // set this global out-of-band (needs refactor)\n      canUseWorkers = false;\n    }\n  }\n  return availableWorkers.pop();\n}\n\n// @param {Uint8Array} src\n// @param {number} uncompressedSize\n// @param {string} [type] mime-type\n// @returns {ArrayBuffer|Blob} ArrayBuffer if type is falsy or Blob otherwise.\nfunction inflateRawLocal(src, uncompressedSize, type, resolve) {\n  const dst = new Uint8Array(uncompressedSize);\n  inflateRaw(src, dst);\n  resolve(type\n     ? new Blob([dst], {type})\n     : dst.buffer);\n}\n\nasync function processWaitingForWorkerQueue() {\n  if (waitingForWorkerQueue.length === 0) {\n    return;\n  }\n\n  if (config.useWorkers && canUseWorkers) {\n    const worker = await getAvailableWorker();\n    // canUseWorkers might have been set out-of-band (need refactor)\n    if (canUseWorkers) {\n      if (worker) {\n        if (waitingForWorkerQueue.length === 0) {\n          // the queue might be empty while we awaited for a worker.\n          makeWorkerAvailable(worker);\n          return;\n        }\n        const {id, src, uncompressedSize, type, resolve, reject} = waitingForWorkerQueue.shift();\n        currentlyProcessingIdToRequestMap.set(id, {id, resolve, reject});\n        const transferables = [];\n        // NOTE: Originally I thought you could transfer an ArrayBuffer.\n        // The code on this side is often using views into the entire file\n        // which means if we transferred we'd lose the entire file. That sucks\n        // because it means there's an expensive copy to send the uncompressed\n        // data to the worker.\n        //\n        // Also originally I thought we could send a Blob but we'd need to refactor\n        // the code in unzipit/readEntryData as currently it reads the uncompressed\n        // bytes.\n        //\n        //if (!isBlob(src) && !isSharedArrayBuffer(src)) {\n        //  transferables.push(src);\n        //}\n        worker.postMessage({\n          type: 'inflate',\n          data: {\n            id,\n            type,\n            src,\n            uncompressedSize,\n          },\n        }, transferables);\n      }\n      return;\n    }\n  }\n\n  // inflate locally\n  // We loop here because what happens if many requests happen at once\n  // the first N requests will try to async make a worker. Other requests\n  // will then be on the queue. But if we fail to make workers then there\n  // are pending requests.\n  while (waitingForWorkerQueue.length) {\n    const {src, uncompressedSize, type, resolve} = waitingForWorkerQueue.shift();\n    let data = src;\n    if (isBlob(src)) {\n      data = await readBlobAsUint8Array(src);\n    }\n    inflateRawLocal(data, uncompressedSize, type, resolve);\n  }\n}\n\nfunction setOptions(options) {\n  config.workerURL = options.workerURL || config.workerURL;\n  // there's no reason to set the workerURL if you're not going to use workers\n  if (options.workerURL) {\n    config.useWorkers = true;\n  }\n  config.useWorkers = options.useWorkers !== undefined ? options.useWorkers : config.useWorkers;\n  config.numWorkers = options.numWorkers || config.numWorkers;\n}\n\n// It has to take non-zero time to put a large typed array in a Blob since the very\n// next instruction you could change the contents of the array. So, if you're reading\n// the zip file for images/video/audio then all you want is a Blob on which to get a URL.\n// so that operation of putting the data in a Blob should happen in the worker.\n//\n// Conversely if you want the data itself then you want an ArrayBuffer immediately\n// since the worker can transfer its ArrayBuffer zero copy.\n//\n// @param {Uint8Array|Blob} src\n// @param {number} uncompressedSize\n// @param {string} [type] falsy or mimeType string (eg: 'image/png')\n// @returns {ArrayBuffer|Blob} ArrayBuffer if type is falsy or Blob otherwise.\nfunction inflateRawAsync(src, uncompressedSize, type) {\n  return new Promise((resolve, reject) => {\n    // note: there is potential an expensive copy here. In order for the data\n    // to make it into the worker we need to copy the data to the worker unless\n    // it's a Blob or a SharedArrayBuffer.\n    //\n    // Solutions:\n    //\n    // 1. A minor enhancement, if `uncompressedSize` is small don't call the worker.\n    //\n    //    might be a win period as their is overhead calling the worker\n    //\n    // 2. Move the entire library to the worker\n    //\n    //    Good, Maybe faster if you pass a URL, Blob, or SharedArrayBuffer? Not sure about that\n    //    as those are also easy to transfer. Still slow if you pass an ArrayBuffer\n    //    as the ArrayBuffer has to be copied to the worker.\n    //\n    // I guess benchmarking is really the only thing to try.\n    waitingForWorkerQueue.push({src, uncompressedSize, type, resolve, reject, id: nextId++});\n    processWaitingForWorkerQueue();\n  });\n}\n\nfunction clearArray(arr) {\n  arr.splice(0, arr.length);\n}\n\nasync function cleanup() {\n  for (const worker of workers) {\n    await workerHelper.terminate(worker);\n  }\n  clearArray(workers);\n  clearArray(availableWorkers);\n  clearArray(waitingForWorkerQueue);\n  currentlyProcessingIdToRequestMap.clear();\n  numWorkers = 0;\n  canUseWorkers = true;\n}\n\n/*\nclass Zip {\n  constructor(reader) {\n    comment,  // the comment for this entry\n    commentBytes, // the raw comment for this entry\n  }\n}\n*/\n\nfunction dosDateTimeToDate(date, time) {\n  const day = date & 0x1f; // 1-31\n  const month = (date >> 5 & 0xf) - 1; // 1-12, 0-11\n  const year = (date >> 9 & 0x7f) + 1980; // 0-128, 1980-2108\n\n  const millisecond = 0;\n  const second = (time & 0x1f) * 2; // 0-29, 0-58 (even numbers)\n  const minute = time >> 5 & 0x3f; // 0-59\n  const hour = time >> 11 & 0x1f; // 0-23\n\n  return new Date(year, month, day, hour, minute, second, millisecond);\n}\n\nclass ZipEntry {\n  constructor(reader, rawEntry) {\n    this._reader = reader;\n    this._rawEntry = rawEntry;\n    this.name = rawEntry.name;\n    this.nameBytes = rawEntry.nameBytes;\n    this.size = rawEntry.uncompressedSize;\n    this.compressedSize = rawEntry.compressedSize;\n    this.comment = rawEntry.comment;\n    this.commentBytes = rawEntry.commentBytes;\n    this.compressionMethod = rawEntry.compressionMethod;\n    this.lastModDate = dosDateTimeToDate(rawEntry.lastModFileDate, rawEntry.lastModFileTime);\n    this.isDirectory = rawEntry.uncompressedSize === 0 && rawEntry.name.endsWith('/');\n    this.encrypted = !!(rawEntry.generalPurposeBitFlag & 0x1);\n  }\n  // returns a promise that returns a Blob for this entry\n  async blob(type = 'application/octet-stream') {\n    return await readEntryDataAsBlob(this._reader, this._rawEntry, type);\n  }\n  // returns a promise that returns an ArrayBuffer for this entry\n  async arrayBuffer() {\n    return await readEntryDataAsArrayBuffer(this._reader, this._rawEntry);\n  }\n  // returns text, assumes the text is valid utf8. If you want more options decode arrayBuffer yourself\n  async text() {\n    const buffer = await this.arrayBuffer();\n    return decodeBuffer(new Uint8Array(buffer));\n  }\n  // returns text with JSON.parse called on it. If you want more options decode arrayBuffer yourself\n  async json() {\n    const text = await this.text();\n    return JSON.parse(text);\n  }\n}\n\nconst EOCDR_WITHOUT_COMMENT_SIZE = 22;\nconst MAX_COMMENT_SIZE = 0xffff; // 2-byte size\nconst EOCDR_SIGNATURE = 0x06054b50;\nconst ZIP64_EOCDR_SIGNATURE = 0x06064b50;\n\nasync function readAs(reader, offset, length) {\n  return await reader.read(offset, length);\n}\n\n// The point of this function is we want to be able to pass the data\n// to a worker as fast as possible so when decompressing if the data\n// is already a blob and we can get a blob then get a blob.\n//\n// I'm not sure what a better way to refactor this is. We've got examples\n// of multiple readers. Ideally, for every type of reader we could ask\n// it, \"give me a type that is zero copy both locally and when sent to a worker\".\n//\n// The problem is the worker would also have to know the how to handle this\n// opaque type. I suppose the correct solution is to register different\n// reader handlers in the worker so BlobReader would register some\n// `handleZeroCopyType<BlobReader>`. At the moment I don't feel like\n// refactoring. As it is you just pass in an instance of the reader\n// but instead you'd have to register the reader and some how get the\n// source for the `handleZeroCopyType` handler function into the worker.\n// That sounds like a huge PITA, requiring you to put the implementation\n// in a separate file so the worker can load it or some other workaround\n// hack.\n//\n// For now this hack works even if it's not generic.\nasync function readAsBlobOrTypedArray(reader, offset, length, type) {\n  if (reader.sliceAsBlob) {\n    return await reader.sliceAsBlob(offset, length, type);\n  }\n  return await reader.read(offset, length);\n}\n\nconst crc$1 = {\n  unsigned() {\n    return 0;\n  },\n};\n\nfunction getUint16LE(uint8View, offset) {\n  return uint8View[offset    ] +\n         uint8View[offset + 1] * 0x100;\n}\n\nfunction getUint32LE(uint8View, offset) {\n  return uint8View[offset    ] +\n         uint8View[offset + 1] * 0x100 +\n         uint8View[offset + 2] * 0x10000 +\n         uint8View[offset + 3] * 0x1000000;\n}\n\nfunction getUint64LE(uint8View, offset) {\n  return getUint32LE(uint8View, offset) +\n         getUint32LE(uint8View, offset + 4) * 0x100000000;\n}\n\n/* eslint-disable no-irregular-whitespace */\n// const decodeCP437 = (function() {\n//   const cp437 = '\\u0000☺☻♥♦♣♠•◘○◙♂♀♪♫☼►◄↕‼¶§▬↨↑↓→←∟↔▲▼ !\"#$%&\\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~⌂ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜ¢£¥₧ƒáíóúñÑªº¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ ';\n//\n//   return function(uint8view) {\n//     return Array.from(uint8view).map(v => cp437[v]).join('');\n//   };\n// }());\n/* eslint-enable no-irregular-whitespace */\n\nconst utf8Decoder = new TextDecoder();\nfunction decodeBuffer(uint8View, isUTF8) {  /* eslint-disable-line no-unused-vars */ /* lgtm [js/superfluous-trailing-arguments] */\n  if (isSharedArrayBuffer(uint8View.buffer)) {\n    uint8View = new Uint8Array(uint8View);\n  }\n  return utf8Decoder.decode(uint8View);\n  /*\n  AFAICT the UTF8 flat is not set so it's 100% up to the user\n  to self decode if their file is not utf8 filenames\n  return isUTF8\n      ? utf8Decoder.decode(uint8View)\n      : decodeCP437(uint8View);\n  */\n}\n\nasync function findEndOfCentralDirector(reader, totalLength) {\n  const size = Math.min(EOCDR_WITHOUT_COMMENT_SIZE + MAX_COMMENT_SIZE, totalLength);\n  const readStart = totalLength - size;\n  const data = await readAs(reader, readStart, size);\n  for (let i = size - EOCDR_WITHOUT_COMMENT_SIZE; i >= 0; --i) {\n    if (getUint32LE(data, i) !== EOCDR_SIGNATURE) {\n      continue;\n    }\n\n    // 0 - End of central directory signature\n    const eocdr = new Uint8Array(data.buffer, data.byteOffset + i, data.byteLength - i);\n    // 4 - Number of this disk\n    const diskNumber = getUint16LE(eocdr, 4);\n    if (diskNumber !== 0) {\n      throw new Error(`multi-volume zip files are not supported. This is volume: ${diskNumber}`);\n    }\n\n    // 6 - Disk where central directory starts\n    // 8 - Number of central directory records on this disk\n    // 10 - Total number of central directory records\n    const entryCount = getUint16LE(eocdr, 10);\n    // 12 - Size of central directory (bytes)\n    const centralDirectorySize = getUint32LE(eocdr, 12);\n    // 16 - Offset of start of central directory, relative to start of archive\n    const centralDirectoryOffset = getUint32LE(eocdr, 16);\n    // 20 - Comment length\n    const commentLength = getUint16LE(eocdr, 20);\n    const expectedCommentLength = eocdr.length - EOCDR_WITHOUT_COMMENT_SIZE;\n    if (commentLength !== expectedCommentLength) {\n      throw new Error(`invalid comment length. expected: ${expectedCommentLength}, actual: ${commentLength}`);\n    }\n\n    // 22 - Comment\n    // the encoding is always cp437.\n    const commentBytes = new Uint8Array(eocdr.buffer, eocdr.byteOffset + 22, commentLength);\n    const comment = decodeBuffer(commentBytes);\n\n    if (entryCount === 0xffff || centralDirectoryOffset === 0xffffffff) {\n      return await readZip64CentralDirectory(reader, readStart + i, comment, commentBytes);\n    } else {\n      return await readEntries(reader, centralDirectoryOffset, centralDirectorySize, entryCount, comment, commentBytes);\n    }\n  }\n\n  throw new Error('could not find end of central directory. maybe not zip file');\n}\n\nconst END_OF_CENTRAL_DIRECTORY_LOCATOR_SIGNATURE = 0x07064b50;\n\nasync function readZip64CentralDirectory(reader, offset, comment, commentBytes) {\n  // ZIP64 Zip64 end of central directory locator\n  const zip64EocdlOffset = offset - 20;\n  const eocdl = await readAs(reader, zip64EocdlOffset, 20);\n\n  // 0 - zip64 end of central dir locator signature\n  if (getUint32LE(eocdl, 0) !== END_OF_CENTRAL_DIRECTORY_LOCATOR_SIGNATURE) {\n    throw new Error('invalid zip64 end of central directory locator signature');\n  }\n\n  // 4 - number of the disk with the start of the zip64 end of central directory\n  // 8 - relative offset of the zip64 end of central directory record\n  const zip64EocdrOffset = getUint64LE(eocdl, 8);\n  // 16 - total number of disks\n\n  // ZIP64 end of central directory record\n  const zip64Eocdr = await readAs(reader, zip64EocdrOffset, 56);\n\n  // 0 - zip64 end of central dir signature                           4 bytes  (0x06064b50)\n  if (getUint32LE(zip64Eocdr, 0) !== ZIP64_EOCDR_SIGNATURE) {\n    throw new Error('invalid zip64 end of central directory record signature');\n  }\n  // 4 - size of zip64 end of central directory record                8 bytes\n  // 12 - version made by                                             2 bytes\n  // 14 - version needed to extract                                   2 bytes\n  // 16 - number of this disk                                         4 bytes\n  // 20 - number of the disk with the start of the central directory  4 bytes\n  // 24 - total number of entries in the central directory on this disk         8 bytes\n  // 32 - total number of entries in the central directory            8 bytes\n  const entryCount = getUint64LE(zip64Eocdr, 32);\n  // 40 - size of the central directory                               8 bytes\n  const centralDirectorySize = getUint64LE(zip64Eocdr, 40);\n  // 48 - offset of start of central directory with respect to the starting disk number     8 bytes\n  const centralDirectoryOffset = getUint64LE(zip64Eocdr, 48);\n  // 56 - zip64 extensible data sector                                (variable size)\n  return readEntries(reader, centralDirectoryOffset, centralDirectorySize, entryCount, comment, commentBytes);\n}\n\nconst CENTRAL_DIRECTORY_FILE_HEADER_SIGNATURE = 0x02014b50;\n\nasync function readEntries(reader, centralDirectoryOffset, centralDirectorySize, rawEntryCount, comment, commentBytes) {\n  let readEntryCursor = 0;\n  const allEntriesBuffer = await readAs(reader, centralDirectoryOffset, centralDirectorySize);\n  const rawEntries = [];\n\n  for (let e = 0; e < rawEntryCount; ++e) {\n    const buffer = allEntriesBuffer.subarray(readEntryCursor, readEntryCursor + 46);\n    // 0 - Central directory file header signature\n    const signature = getUint32LE(buffer, 0);\n    if (signature !== CENTRAL_DIRECTORY_FILE_HEADER_SIGNATURE) {\n      throw new Error(`invalid central directory file header signature: 0x${signature.toString(16)}`);\n    }\n    const rawEntry = {\n      // 4 - Version made by\n      versionMadeBy: getUint16LE(buffer, 4),\n      // 6 - Version needed to extract (minimum)\n      versionNeededToExtract: getUint16LE(buffer, 6),\n      // 8 - General purpose bit flag\n      generalPurposeBitFlag: getUint16LE(buffer, 8),\n      // 10 - Compression method\n      compressionMethod: getUint16LE(buffer, 10),\n      // 12 - File last modification time\n      lastModFileTime: getUint16LE(buffer, 12),\n      // 14 - File last modification date\n      lastModFileDate: getUint16LE(buffer, 14),\n      // 16 - CRC-32\n      crc32: getUint32LE(buffer, 16),\n      // 20 - Compressed size\n      compressedSize: getUint32LE(buffer, 20),\n      // 24 - Uncompressed size\n      uncompressedSize: getUint32LE(buffer, 24),\n      // 28 - File name length (n)\n      fileNameLength: getUint16LE(buffer, 28),\n      // 30 - Extra field length (m)\n      extraFieldLength: getUint16LE(buffer, 30),\n      // 32 - File comment length (k)\n      fileCommentLength: getUint16LE(buffer, 32),\n      // 34 - Disk number where file starts\n      // 36 - Internal file attributes\n      internalFileAttributes: getUint16LE(buffer, 36),\n      // 38 - External file attributes\n      externalFileAttributes: getUint32LE(buffer, 38),\n      // 42 - Relative offset of local file header\n      relativeOffsetOfLocalHeader: getUint32LE(buffer, 42),\n    };\n\n    if (rawEntry.generalPurposeBitFlag & 0x40) {\n      throw new Error('strong encryption is not supported');\n    }\n\n    readEntryCursor += 46;\n\n    const data = allEntriesBuffer.subarray(readEntryCursor, readEntryCursor + rawEntry.fileNameLength + rawEntry.extraFieldLength + rawEntry.fileCommentLength);\n    rawEntry.nameBytes = data.slice(0, rawEntry.fileNameLength);\n    rawEntry.name = decodeBuffer(rawEntry.nameBytes);\n\n    // 46+n - Extra field\n    const fileCommentStart = rawEntry.fileNameLength + rawEntry.extraFieldLength;\n    const extraFieldBuffer = data.slice(rawEntry.fileNameLength, fileCommentStart);\n    rawEntry.extraFields = [];\n    let i = 0;\n    while (i < extraFieldBuffer.length - 3) {\n      const headerId = getUint16LE(extraFieldBuffer, i + 0);\n      const dataSize = getUint16LE(extraFieldBuffer, i + 2);\n      const dataStart = i + 4;\n      const dataEnd = dataStart + dataSize;\n      if (dataEnd > extraFieldBuffer.length) {\n        throw new Error('extra field length exceeds extra field buffer size');\n      }\n      rawEntry.extraFields.push({\n        id: headerId,\n        data: extraFieldBuffer.slice(dataStart, dataEnd),\n      });\n      i = dataEnd;\n    }\n\n    // 46+n+m - File comment\n    rawEntry.commentBytes = data.slice(fileCommentStart, fileCommentStart + rawEntry.fileCommentLength);\n    rawEntry.comment = decodeBuffer(rawEntry.commentBytes);\n\n    readEntryCursor += data.length;\n\n    if (rawEntry.uncompressedSize            === 0xffffffff ||\n        rawEntry.compressedSize              === 0xffffffff ||\n        rawEntry.relativeOffsetOfLocalHeader === 0xffffffff) {\n      // ZIP64 format\n      // find the Zip64 Extended Information Extra Field\n      const zip64ExtraField = rawEntry.extraFields.find(e => e.id === 0x0001);\n      if (!zip64ExtraField) {\n        return new Error('expected zip64 extended information extra field');\n      }\n      const zip64EiefBuffer = zip64ExtraField.data;\n      let index = 0;\n      // 0 - Original Size          8 bytes\n      if (rawEntry.uncompressedSize === 0xffffffff) {\n        if (index + 8 > zip64EiefBuffer.length) {\n          throw new Error('zip64 extended information extra field does not include uncompressed size');\n        }\n        rawEntry.uncompressedSize = getUint64LE(zip64EiefBuffer, index);\n        index += 8;\n      }\n      // 8 - Compressed Size        8 bytes\n      if (rawEntry.compressedSize === 0xffffffff) {\n        if (index + 8 > zip64EiefBuffer.length) {\n          throw new Error('zip64 extended information extra field does not include compressed size');\n        }\n        rawEntry.compressedSize = getUint64LE(zip64EiefBuffer, index);\n        index += 8;\n      }\n      // 16 - Relative Header Offset 8 bytes\n      if (rawEntry.relativeOffsetOfLocalHeader === 0xffffffff) {\n        if (index + 8 > zip64EiefBuffer.length) {\n          throw new Error('zip64 extended information extra field does not include relative header offset');\n        }\n        rawEntry.relativeOffsetOfLocalHeader = getUint64LE(zip64EiefBuffer, index);\n        index += 8;\n      }\n      // 24 - Disk Start Number      4 bytes\n    }\n\n    // check for Info-ZIP Unicode Path Extra Field (0x7075)\n    // see https://github.com/thejoshwolfe/yauzl/issues/33\n    const nameField = rawEntry.extraFields.find(e =>\n        e.id === 0x7075 &&\n        e.data.length >= 6 && // too short to be meaningful\n        e.data[0] === 1 &&    // Version       1 byte      version of this extra field, currently 1\n        getUint32LE(e.data, 1), crc$1.unsigned(rawEntry.nameBytes)); // NameCRC32     4 bytes     File Name Field CRC32 Checksum\n                                                                   // > If the CRC check fails, this UTF-8 Path Extra Field should be\n                                                                   // > ignored and the File Name field in the header should be used instead.\n    if (nameField) {\n        // UnicodeName Variable UTF-8 version of the entry File Name\n        rawEntry.fileName = decodeBuffer(nameField.data.slice(5));\n    }\n\n    // validate file size\n    if (rawEntry.compressionMethod === 0) {\n      let expectedCompressedSize = rawEntry.uncompressedSize;\n      if ((rawEntry.generalPurposeBitFlag & 0x1) !== 0) {\n        // traditional encryption prefixes the file data with a header\n        expectedCompressedSize += 12;\n      }\n      if (rawEntry.compressedSize !== expectedCompressedSize) {\n        throw new Error(`compressed size mismatch for stored file: ${rawEntry.compressedSize} != ${expectedCompressedSize}`);\n      }\n    }\n    rawEntries.push(rawEntry);\n  }\n  const zip = {\n    comment,\n    commentBytes,\n  };\n  return {\n    zip,\n    entries: rawEntries.map(e => new ZipEntry(reader, e)),\n  };\n}\n\nasync function readEntryDataHeader(reader, rawEntry) {\n  if (rawEntry.generalPurposeBitFlag & 0x1) {\n    throw new Error('encrypted entries not supported');\n  }\n  const buffer = await readAs(reader, rawEntry.relativeOffsetOfLocalHeader, 30);\n  // note: maybe this should be passed in or cached on entry\n  // as it's async so there will be at least one tick (not sure about that)\n  const totalLength = await reader.getLength();\n\n  // 0 - Local file header signature = 0x04034b50\n  const signature = getUint32LE(buffer, 0);\n  if (signature !== 0x04034b50) {\n    throw new Error(`invalid local file header signature: 0x${signature.toString(16)}`);\n  }\n\n  // all this should be redundant\n  // 4 - Version needed to extract (minimum)\n  // 6 - General purpose bit flag\n  // 8 - Compression method\n  // 10 - File last modification time\n  // 12 - File last modification date\n  // 14 - CRC-32\n  // 18 - Compressed size\n  // 22 - Uncompressed size\n  // 26 - File name length (n)\n  const fileNameLength = getUint16LE(buffer, 26);\n  // 28 - Extra field length (m)\n  const extraFieldLength = getUint16LE(buffer, 28);\n  // 30 - File name\n  // 30+n - Extra field\n  const localFileHeaderEnd = rawEntry.relativeOffsetOfLocalHeader + buffer.length + fileNameLength + extraFieldLength;\n  let decompress;\n  if (rawEntry.compressionMethod === 0) {\n    // 0 - The file is stored (no compression)\n    decompress = false;\n  } else if (rawEntry.compressionMethod === 8) {\n    // 8 - The file is Deflated\n    decompress = true;\n  } else {\n    throw new Error(`unsupported compression method: ${rawEntry.compressionMethod}`);\n  }\n  const fileDataStart = localFileHeaderEnd;\n  const fileDataEnd = fileDataStart + rawEntry.compressedSize;\n  if (rawEntry.compressedSize !== 0) {\n    // bounds check now, because the read streams will probably not complain loud enough.\n    // since we're dealing with an unsigned offset plus an unsigned size,\n    // we only have 1 thing to check for.\n    if (fileDataEnd > totalLength) {\n      throw new Error(`file data overflows file bounds: ${fileDataStart} +  ${rawEntry.compressedSize}  > ${totalLength}`);\n    }\n  }\n  return {\n    decompress,\n    fileDataStart,\n  };\n}\n\nasync function readEntryDataAsArrayBuffer(reader, rawEntry) {\n  const {decompress, fileDataStart} = await readEntryDataHeader(reader, rawEntry);\n  if (!decompress) {\n    const dataView = await readAs(reader, fileDataStart, rawEntry.compressedSize);\n    // make copy?\n    //\n    // 1. The source is a Blob/file. In this case we'll get back TypedArray we can just hand to the user\n    // 2. The source is a TypedArray. In this case we'll get back TypedArray that is a view into a larger buffer\n    //    but because ultimately this is used to return an ArrayBuffer to `someEntry.arrayBuffer()`\n    //    we need to return copy since we need the `ArrayBuffer`, not the TypedArray to exactly match the data.\n    //    Note: We could add another API function `bytes()` or something that returned a `Uint8Array`\n    //    instead of an `ArrayBuffer`. This would let us skip a copy here. But this case only happens for uncompressed\n    //    data. That seems like a rare enough case that adding a new API is not worth it? Or is it? A zip of jpegs or mp3s\n    //    might not be compressed. For now that's a TBD.\n    return isTypedArraySameAsArrayBuffer(dataView) ? dataView.buffer : dataView.slice().buffer;\n  }\n  // see comment in readEntryDateAsBlob\n  const typedArrayOrBlob = await readAsBlobOrTypedArray(reader, fileDataStart, rawEntry.compressedSize);\n  const result = await inflateRawAsync(typedArrayOrBlob, rawEntry.uncompressedSize);\n  return result;\n}\n\nasync function readEntryDataAsBlob(reader, rawEntry, type) {\n  const {decompress, fileDataStart} = await readEntryDataHeader(reader, rawEntry);\n  if (!decompress) {\n    const typedArrayOrBlob = await readAsBlobOrTypedArray(reader, fileDataStart, rawEntry.compressedSize, type);\n    if (isBlob(typedArrayOrBlob)) {\n      return typedArrayOrBlob;\n    }\n    return new Blob([isSharedArrayBuffer(typedArrayOrBlob.buffer) ? new Uint8Array(typedArrayOrBlob) : typedArrayOrBlob], {type});\n  }\n  // Here's the issue with this mess (should refactor?)\n  // if the source is a blob then we really want to pass a blob to inflateRawAsync to avoid a large\n  // copy if we're going to a worker.\n  const typedArrayOrBlob = await readAsBlobOrTypedArray(reader, fileDataStart, rawEntry.compressedSize);\n  const result = await inflateRawAsync(typedArrayOrBlob, rawEntry.uncompressedSize, type);\n  return result;\n}\n\nfunction setOptions$1(options) {\n  setOptions(options);\n}\n\nasync function unzipRaw(source) {\n  let reader;\n  if (typeof Blob !== 'undefined' && source instanceof Blob) {\n    reader = new BlobReader(source);\n  } else if (source instanceof ArrayBuffer || (source && source.buffer && source.buffer instanceof ArrayBuffer)) {\n    reader = new ArrayBufferReader(source);\n  } else if (isSharedArrayBuffer(source) || isSharedArrayBuffer(source.buffer)) {\n    reader = new ArrayBufferReader(source);\n  } else if (typeof source === 'string') {\n    const req = await fetch(source);\n    if (!req.ok) {\n      throw new Error(`failed http request ${source}, status: ${req.status}: ${req.statusText}`);\n    }\n    const blob = await req.blob();\n    reader = new BlobReader(blob);\n  } else if (typeof source.getLength === 'function' && typeof source.read === 'function') {\n    reader = source;\n  } else {\n    throw new Error('unsupported source type');\n  }\n\n  const totalLength = await reader.getLength();\n\n  if (totalLength > Number.MAX_SAFE_INTEGER) {\n    throw new Error(`file too large. size: ${totalLength}. Only file sizes up 4503599627370496 bytes are supported`);\n  }\n\n  return await findEndOfCentralDirector(reader, totalLength);\n}\n\n// If the names are not utf8 you should use unzipitRaw\nasync function unzip(source) {\n  const {zip, entries} = await unzipRaw(source);\n  return {\n    zip,\n    entries: Object.fromEntries(entries.map(v => [v.name, v])),\n  };\n}\n\nfunction cleanup$1() {\n  cleanup();\n}\n\nexport { HTTPRangeReader, cleanup$1 as cleanup, setOptions$1 as setOptions, unzip, unzipRaw };\n","// extracted by mini-css-extract-plugin\nexport default {\"app\":\"style_app_3v5cP\",\"channels-and-messages\":\"style_channels-and-messages_127by\",\"channel-list-panel\":\"style_channel-list-panel_FYZ7i\"};","class Archive {\n\tconstructor () {\n\t\t/**\n\t\t * The archive type (server or channel).\n\t\t * @type {string}\n\t\t */\n\t\tthis.type = null;\n\n\t\t/**\n\t\t * Map of all users encountered during archiving, keyed by ID.\n\t\t * @type {Map<Snowflake, User>}\n\t\t */\n\t\tthis.users = new Map();\n\n\t\t/**\n\t\t * Map of all emojis encountered during archiving, keyed by ID.\n\t\t * @type {Map<Snowflake, CustomEmoji>}\n\t\t */\n\t\tthis.emojis = new Map();\n\n\t\t/**\n\t\t * Map of all channels encountered during archiving, keyed by ID.\n\t\t * @type {Map<Snowflake, Channel>}\n\t\t */\n\t\tthis.channels = new Map();\n\n\t\t/**\n\t\t * @type {Server|Channel}\n\t\t */\n\t\tthis.data = null;\n\n\t\t/**\n\t\t * Blob URLs for every saved avatar.\n\t\t * @type {Map<Snowflake, string>}\n\t\t */\n\t\tthis.avatars = new Map();\n\n\t\t/**\n\t\t * Blob URLs for every saved emoji.\n\t\t * @type {Map<Snowflake, string>}\n\t\t */\n\t\tthis.emojiURLs = new Map();\n\t}\n\n\t/**\n\t * Call this method once you're done using the archive\n\t */\n\tdispose () {\n\t\tfor (const avatar of this.avatars.values()) {\n\t\t\tURL.revokeObjectURL(avatar);\n\t\t}\n\t}\n}\n\nclass Server {\n\tconstructor () {\n\t\t/**\n\t\t * The server ID.\n\t\t * @type {Snowflake}\n\t\t */\n\t\tthis.id = null;\n\n\t\t/**\n\t\t * The server name.\n\t\t * @type {string}\n\t\t */\n\t\tthis.name = null;\n\n\t\t/**\n\t\t * The server's icon URL.\n\t\t * @type {string}\n\t\t */\n\t\tthis.iconURL = null;\n\n\t\t/**\n\t\t * Map of current server members, keyed by ID.\n\t\t * @type {Map<Snowflake, Member>}\n\t\t */\n\t\tthis.members = new Map();\n\n\t\t/**\n\t\t * Map of server-specific custom emojis, keyed by ID.\n\t\t * @type {Map<Snowflake, CustomEmoji>}\n\t\t */\n\t\tthis.emojis = new Map();\n\n\t\t/**\n\t\t * Map of roles in the server, keyed by ID.\n\t\t * @type {Map<Snowflake, Role>}\n\t\t */\n\t\tthis.roles = new Map();\n\n\t\t/**\n\t\t * Set of channels in the server, keyed by ID.\n\t\t * @type {Set<Snowflake>}\n\t\t */\n\t\tthis.channels = new Set();\n\n\t\t/**\n\t\t * The ID of this server's owner. Only present in Archivebot >=v11 archives.\n\t\t * @type {?Snowflake}\n\t\t */\n\t\tthis.owner = null;\n\t}\n}\n\nclass Channel {\n\tconstructor () {\n\t\t/**\n\t\t * The channel ID.\n\t\t * @type {Snowflake}\n\t\t */\n\t\tthis.id = null;\n\n\t\t/**\n\t\t * The channel name.\n\t\t * @type {string}\n\t\t */\n\t\tthis.name = null;\n\n\t\t/**\n\t\t * The ID of the parent channel (category) this channel belongs to, null if no parent\n\t\t * @type {?Snowflake}\n\t\t */\n\t\tthis.parentID = null;\n\n\t\t/**\n\t\t * Array of messages in this channel.\n\t\t * @type {Array<Message>}\n\t\t */\n\t\tthis.messages = [];\n\n\t\t/**\n\t\t * Whether this channel is an NSFW channel.\n\t\t * @type {Boolean}\n\t\t */\n\t\tthis.nsfw = false;\n\n\t\t/**\n\t\t * The channel topic.\n\t\t * @type {?string}\n\t\t */\n\t\tthis.topic = null;\n\n\t\t/**\n\t\t * The position of the channel in the channel list.\n\t\t * @type {number}\n\t\t */\n\t\tthis.position = 0;\n\n\t\t/**\n\t\t * The channel type (voice, text, etc).\n\t\t * @type {?string}\n\t\t */\n\t\tthis.type = null;\n\n\t\t/**\n\t\t * This channel's pinned messages, if this is a text channel and the archive supports them.\n\t\t * @type {?Array<Message>}\n\t\t */\n\t\tthis.pinnedMessages = null;\n\n\t\t/**\n\t\t * This channel's current members, if this is a group channel.\n\t\t * @type {?Array<Snowflake>}\n\t\t */\n\t\tthis.recipients = null;\n\n\t\t/**\n\t\t * This channel's current owner, if this is a group channel.\n\t\t * @type {?Snowflake}\n\t\t */\n\t\tthis.owner = null;\n\t}\n}\n\nclass Message {\n\tconstructor () {\n\t\t/**\n\t\t * The message ID.\n\t\t * @type {Snowflake}\n\t\t */\n\t\tthis.id = null;\n\n\t\t/**\n\t\t * The message author's user/member ID.\n\t\t * @type {Snowflake}\n\t\t */\n\t\tthis.authorID = null;\n\n\t\t/**\n\t\t * The message contents.\n\t\t * @type {?string}\n\t\t */\n\t\tthis.content = null;\n\n\t\t/**\n\t\t * The time at which the message was posted.\n\t\t * @type {number}\n\t\t */\n\t\tthis.createdTimestamp = null;\n\n\t\t/**\n\t\t * The time at which the message was last edited, or null if unedited.\n\t\t * @type {?number}\n\t\t */\n\t\tthis.editedTimestamp = null;\n\n\t\t/**\n\t\t * Array of message attachments.\n\t\t * @type {?Array<Attachment>}\n\t\t */\n\t\tthis.attachments = null;\n\n\t\t/**\n\t\t * The type of message (e.g. DEFAULT, USER_GUILD_JOIN).\n\t\t * @type {?string}\n\t\t */\n\t\tthis.type = null;\n\n\t\t/**\n\t\t * Array of reactions to this message.\n\t\t * @type {?Array<MessageReaction>}\n\t\t */\n\t\tthis.reactions = null;\n\n\t\t/**\n\t\t * If this message is a reply, the message it's replying to. Not an ID for performance reasons.\n\t\t * @type {?Message}\n\t\t */\n\t\tthis.referencedMessage = null;\n\t}\n}\n\nclass MessageReaction {\n\tconstructor () {\n\t\t/**\n\t\t * The number of people who have reacted with this reaction.\n\t\t * @type {number}\n\t\t */\n\t\tthis.count = 0;\n\n\t\t/**\n\t\t * This reaction's emoji. An ID if this is a custom emoji, or its Unicode representation if not.\n\t\t * @type {Snowflake|string}\n\t\t */\n\t\tthis.emoji = null;\n\n\t\t/**\n\t\t * Whether this reaction uses a custom emoji.\n\t\t * @type {boolean}\n\t\t */\n\t\tthis.emojiIsCustom = false;\n\n\t\t/**\n\t\t * The IDs of the users which have reacted with this reaction. The length may be less than `count`.\n\t\t * @type {?Array<Snowflake>}\n\t\t */\n\t\tthis.users = null;\n\t}\n}\n\nclass Member {\n\tconstructor () {\n\t\t/**\n\t\t * The member ID. Same as the member's user's ID.\n\t\t * @type {Snowflake}\n\t\t */\n\t\tthis.id = null;\n\n\t\t/**\n\t\t * The member's nickname, or null if they have none.\n\t\t * @type {?string}\n\t\t */\n\t\tthis.nickname = null;\n\n\t\t/**\n\t\t * Array of roles this member belongs to, ordered highest to lowest.\n\t\t * @type {Array<Role>}\n\t\t */\n\t\tthis.roles = [];\n\n\t\t/**\n\t\t * Time at which this member joined the server.\n\t\t * Null if the archive is too old to store it.\n\t\t * @type {?number}\n\t\t */\n\t\tthis.joinedTimestamp = null;\n\t}\n}\n\nclass User {\n\tconstructor () {\n\t\t/**\n\t\t * The user ID.\n\t\t * @type {Snowflake}\n\t\t */\n\t\tthis.id = null;\n\n\t\t/**\n\t\t * The user's avatar URL.\n\t\t * @type {?string}\n\t\t */\n\t\tthis.avatarURL = null;\n\n\t\t/**\n\t\t * The user's username.\n\t\t * @type {string}\n\t\t */\n\t\tthis.username = null;\n\n\t\t/**\n\t\t * The user's discriminator (a 4-digit number used to distinguish between identical usernames).\n\t\t * The leading hash mark is not included here.\n\t\t * @type {string}\n\t\t */\n\t\tthis.discriminator = null;\n\t}\n\n\tget tag () {\n\t\treturn this.username + '#' + this.discriminator;\n\t}\n}\n\nclass Role {\n\tconstructor () {\n\t\t/**\n\t\t * The role ID.\n\t\t * @type {Snowflake}\n\t\t */\n\t\tthis.id = null;\n\n\t\t/**\n\t\t * The role name.\n\t\t * @type {string}\n\t\t */\n\t\tthis.name = null;\n\n\t\t/**\n\t\t * The role color.\n\t\t * @type {string}\n\t\t */\n\t\tthis.color = null;\n\n\t\t/**\n\t\t * The role permissions bitmask.\n\t\t * @type {number}\n\t\t */\n\t\tthis.permissions = null;\n\n\t\t/**\n\t\t * The position/rank of the role in the role list.\n\t\t * @type {number}\n\t\t */\n\t\tthis.position = null;\n\n\t\t/**\n\t\t * Whether the role creates a new separate category under the users list.\n\t\t * @type {boolean}\n\t\t */\n\t\tthis.hoist = true;\n\t}\n}\n\nclass Attachment {\n\tconstructor () {\n\t\t/**\n\t\t * The attachment ID.\n\t\t * @type {Snowflake}\n\t\t */\n\t\tthis.id = null;\n\n\t\t/**\n\t\t * The name of the attachment.\n\t\t * @type {string}\n\t\t */\n\t\tthis.name = null;\n\n\t\t/**\n\t\t * The size of the attachment, in bytes.\n\t\t * @type {number}\n\t\t */\n\t\tthis.size = 0;\n\n\t\t/**\n\t\t * The URL of the attachment.\n\t\t * @type {string}\n\t\t */\n\t\tthis.url = null;\n\n\t\t/**\n\t\t * If this attachment is an image, that image's width.\n\t\t * @type {?string}\n\t\t */\n\t\tthis.width = null;\n\n\t\t/**\n\t\t * If this attachment is an image, that image's height.\n\t\t * @type {?string}\n\t\t */\n\t\tthis.height = null;\n\t}\n}\n\nclass CustomEmoji {\n\tconstructor () {\n\t\t/**\n\t\t * Whether this is an animated emoji. Only present in Archivebot >=v11 archives.\n\t\t * @type {?boolean}\n\t\t */\n\t\tthis.animated = null;\n\n\t\t/**\n\t\t * The time at which this emoji was created. Only present in Archivebot >=v11 archives.\n\t\t * @type {?number}\n\t\t */\n\t\tthis.createdTimestamp = null;\n\n\t\t/**\n\t\t * The ID of the guild that this emoji belongs to.\n\t\t * @type {Snowflake}\n\t\t */\n\t\tthis.guild = null;\n\n\t\t/**\n\t\t * The emoji ID.\n\t\t * @type {Snowflake}\n\t\t */\n\t\tthis.id = null;\n\n\t\t/**\n\t\t * The identifier of this emoji, used for message reactions. Only present in Archivebot >=v11 archives.\n\t\t * @type {?string}\n\t\t */\n\t\tthis.identifier = null;\n\n\t\t/**\n\t\t * The emoji name.\n\t\t * @type {string}\n\t\t */\n\t\tthis.name = null;\n\n\t\t/**\n\t\t * The emoji URL.\n\t\t * @type {string}\n\t\t */\n\t\tthis.url = null;\n\t}\n}\n\nexport {Archive, Server, Channel, Message, MessageReaction, Member, User, Role, Attachment, CustomEmoji};\n","import * as Prims from './primitives';\n\nconst deserializeChannel = channel => {\n\tconst parsedChannel = new Prims.Channel();\n\n\tparsedChannel.id = channel.id;\n\tparsedChannel.name = channel.name;\n\tparsedChannel.parentID = channel.parentID || null; // *not* explicitly null if unset\n\tparsedChannel.nsfw = channel.nsfw === true; // sometimes is null, so explicitly cast to boolean\n\tparsedChannel.topic = channel.topic;\n\tparsedChannel.position = channel.position;\n\tparsedChannel.type = channel.type;\n\tlet pinnedMessageIDs;\n\tconst hasPinnedMessages = 'pinnedMessages' in channel;\n\tif (hasPinnedMessages) {\n\t\tparsedChannel.pinnedMessages = [];\n\t\tpinnedMessageIDs = new Set();\n\t\tfor (const pinnedMessageID of channel.pinnedMessages) {\n\t\t\tpinnedMessageIDs.add(pinnedMessageID);\n\t\t}\n\t}\n\n\tif (channel.hasOwnProperty('messages')) {\n\t\tconst channelMessages = parsedChannel.messages;\n\n\t\t// possible tight loop?\n\t\tfor (let i = 0; i < channel.messages.length; i++) {\n\t\t\tconst message = channel.messages[i];\n\n\t\t\tconst parsedMessage = new Prims.Message();\n\n\t\t\tparsedMessage.id = message.id;\n\t\t\tparsedMessage.authorID = message.author;\n\t\t\tparsedMessage.content = message.content;\n\t\t\tparsedMessage.createdTimestamp = message.createdTimestamp;\n\t\t\tparsedMessage.editedTimestamp = message.editedTimestamp || null;\n\t\t\tparsedMessage.type = message.type || 'DEFAULT'; // if DEFAULT, not explicitly set to save space\n\t\t\tif (message.referencedMessage) {\n\t\t\t\t// Scan backwards to find the referenced message\n\t\t\t\t// TODO: binary search based on timestamps? or just map messages by ID\n\t\t\t\tfor (let j = i - 1; j >= 0; j--) {\n\t\t\t\t\tif (channelMessages[j].id === message.referencedMessage) {\n\t\t\t\t\t\tparsedMessage.referencedMessage = channelMessages[j];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (message.hasOwnProperty('attachments') && message.attachments.length > 0) {\n\t\t\t\tparsedMessage.attachments = [];\n\t\t\t\tfor (const attachment of message.attachments) {\n\t\t\t\t\tconst parsedAttachment = new Prims.Attachment();\n\n\t\t\t\t\tparsedAttachment.id = attachment.id;\n\t\t\t\t\tparsedAttachment.name = attachment.name;\n\t\t\t\t\tparsedAttachment.size = attachment.size;\n\t\t\t\t\tparsedAttachment.url = attachment.url;\n\n\t\t\t\t\tif (attachment.hasOwnProperty('width')) parsedAttachment.width = attachment.width;\n\t\t\t\t\tif (attachment.hasOwnProperty('height')) parsedAttachment.height = attachment.height;\n\n\t\t\t\t\tparsedMessage.attachments.push(parsedAttachment);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (message.hasOwnProperty('reactions') && message.reactions.length > 0) {\n\t\t\t\tparsedMessage.reactions = [];\n\t\t\t\tfor (const reaction of message.reactions) {\n\t\t\t\t\tconst parsedReaction = new Prims.MessageReaction();\n\n\t\t\t\t\tparsedReaction.count = reaction.count;\n\t\t\t\t\tparsedReaction.emoji = reaction.emoji;\n\t\t\t\t\tparsedReaction.emojiIsCustom = reaction.emojiIsCustom;\n\t\t\t\t\tif (reaction.hasOwnProperty('users')) parsedReaction.users = reaction.users;\n\t\t\t\t\tparsedMessage.reactions.push(parsedReaction);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (hasPinnedMessages && pinnedMessageIDs.has(message.id)) {\n\t\t\t\tparsedChannel.pinnedMessages.push(parsedMessage);\n\t\t\t}\n\n\t\t\tchannelMessages.push(parsedMessage);\n\t\t}\n\t}\n\n\tif (channel.type === 'group') {\n\t\tparsedChannel.recipients = channel.recipients;\n\t\tparsedChannel.owner = channel.owner;\n\t}\n\n\treturn parsedChannel;\n};\n\nconst deserializeServer = (server, archive, archiveVersion) => {\n\tconst parsedServer = new Prims.Server();\n\n\tparsedServer.id = server.id;\n\tparsedServer.name = server.name;\n\tparsedServer.iconURL = server.iconURL;\n\tif (server.hasOwnProperty('owner')) parsedServer.owner = server.owner;\n\n\t// Parse roles\n\tconst serverRoles = parsedServer.roles;\n\tfor (const role of server.roles) {\n\t\tconst parsedRole = new Prims.Role();\n\n\t\tparsedRole.id = role.id;\n\t\tparsedRole.name = role.name;\n\t\tparsedRole.color = role.color;\n\t\tparsedRole.permissions = role.permissions;\n\t\tparsedRole.position = role.position;\n\t\tparsedRole.hoist = role.hoist;\n\n\t\tserverRoles.set(parsedRole.id, parsedRole);\n\t}\n\n\t// Parse members\n\tconst serverMembers = parsedServer.members;\n\tfor (const member of server.members) {\n\t\tconst parsedMember = new Prims.Member();\n\n\t\tparsedMember.id = member.id;\n\t\tparsedMember.nickname = member.nickname; // explicitly null in serialized format if unset\n\t\tparsedMember.joinedTimestamp = member.joinedTimestamp; // explicitly null in serialized format if unset\n\n\t\tfor (const roleID of member.roles) {\n\t\t\tparsedMember.roles.push(serverRoles.get(roleID));\n\t\t}\n\n\t\tparsedMember.roles.sort((a, b) => b.position - a.position);\n\n\t\tserverMembers.set(parsedMember.id, parsedMember);\n\t}\n\n\t// Parse emojis\n\tconst serverEmojis = parsedServer.emojis;\n\tif (archiveVersion < 11) {\n\t\tfor (const emoji of server.emojis) {\n\t\t\tconst parsedEmoji = new Prims.CustomEmoji();\n\t\n\t\t\tparsedEmoji.id = emoji.id;\n\t\t\tparsedEmoji.name = emoji.name;\n\t\t\tparsedEmoji.url = emoji.url || `https://cdn.discordapp.com/emojis/${emoji.id}`;\n\t\n\t\t\tserverEmojis.set(parsedEmoji.id, parsedEmoji);\n\t\t\tarchive.emojis.set(parsedEmoji.id, parsedEmoji);\n\t\t}\n\t} else {\n\t\tfor (const emojiID of server.emojis) {\n\t\t\tserverEmojis.set(emojiID, archive.emojis.get(emojiID));\n\t\t}\n\t}\n\t\n\n\t// Parse channels\n\tconst serverChannels = parsedServer.channels;\n\tfor (const channel of server.channels) {\n\t\tconst parsedChannel = deserializeChannel(channel);\n\t\tarchive.channels.set(parsedChannel.id, parsedChannel);\n\t\tserverChannels.add(parsedChannel.id);\n\t}\n\n\treturn parsedServer;\n};\n\nconst deserializeArchiveBotArchive = async (json, zip) => {\n\tconst archiveVersion = json.version ? parseInt(json.version.replace('archivebot-v', '')) : 1;\n\n\tconst archive = new Prims.Archive();\n\twindow.archive = archive;\n\n\tarchive.type = json.archiveType;\n\n\tfor (const user of json.users) {\n\t\tconst parsedUser = new Prims.User();\n\n\t\tparsedUser.id = user.id;\n\t\tparsedUser.username = user.username;\n\t\tparsedUser.avatarURL = user.avatarURL;\n\t\tparsedUser.discriminator = user.discriminator;\n\n\t\tarchive.users.set(user.id, parsedUser);\n\t}\n\n\tif (archiveVersion >= 11) {\n\t\tfor (const emoji of json.emojis) {\n\t\t\tconst parsedEmoji = new Prims.CustomEmoji();\n\t\n\t\t\tparsedEmoji.animated = emoji.animated;\n\t\t\tparsedEmoji.createdTimestamp = emoji.createdTimestamp;\n\t\t\tparsedEmoji.guild = emoji.guild; // explicitly null in serialized format if unset\n\t\t\tparsedEmoji.id = emoji.id;\n\t\t\tparsedEmoji.identifier = emoji.identifier;\n\t\t\tparsedEmoji.name = emoji.name;\n\t\t\tparsedEmoji.url = emoji.url || `https://cdn.discordapp.com/emojis/${emoji.id}`;\n\n\t\t\tarchive.emojis.set(emoji.id, parsedEmoji);\n\t\t}\n\t}\n\n\tswitch (archive.type) {\n\t\tcase 'server': {\n\t\t\tarchive.data = deserializeServer(json.archiveData, archive, archiveVersion);\n\t\t\tbreak;\n\t\t}\n\t\tcase 'channel': {\n\t\t\tarchive.data = deserializeChannel(json.archiveData);\n\t\t\tarchive.channels.set(archive.data.id, archive.data);\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tif (zip) {\n\t\tconst {entries} = zip;\n\t\t// Currently, an avatars folder is created even if no avatars are saved, so it's okay to only check for it.\n\t\tif (Object.prototype.hasOwnProperty.call(entries, 'avatars/')) {\n\t\t\tconst filePromises = [];\n\t\t\tfor (const path of Object.keys(entries)) {\n\t\t\t\t// regex matches the first folder in the path (it must be a folder because it's followed by a slash),\n\t\t\t\t// and the filename after it\n\t\t\t\tconst pathMatch = /^([^/]+)\\/(.+)$/.exec(path);\n\t\t\t\tif (!pathMatch) continue;\n\t\t\t\tconst [__, leadingFolder, filePath] = pathMatch;\n\n\t\t\t\tif (leadingFolder !== 'avatars' && leadingFolder !== 'emojis') continue;\n\n\t\t\t\tconst entry = entries[path];\n\t\t\t\tif (entry.isDirectory) continue;\n\t\t\t\tfilePromises.push(entry.blob().then(blob => {\n\t\t\t\t\tconst blobURL = URL.createObjectURL(blob);\n\t\t\t\t\tswitch (leadingFolder) {\n\t\t\t\t\t\tcase 'avatars':\n\t\t\t\t\t\t\tarchive.avatars.set(filePath, blobURL);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'emojis':\n\t\t\t\t\t\t\tarchive.emojiURLs.set(filePath, blobURL);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}));\n\t\t\t}\n\t\t\tawait Promise.all(filePromises);\n\t\t}\n\t}\n\n\treturn archive;\n};\n\nexport default deserializeArchiveBotArchive;\n","import * as Prims from './primitives';\n\nconst deserializeArchiveBotServer = json => {\n\tconst archive = new Prims.Archive();\n\n\tconst server = new Prims.Server();\n\n\tserver.id = json.id;\n\tserver.name = json.name;\n\tserver.iconURL = json.iconURL;\n\n\tconst archiveVersion = json.version ? parseInt(json.version.replace('archivebot-v', '')) : 1;\n\n\t// Parse roles\n\tconst serverRoles = server.roles;\n\tfor (const role of json.roles) {\n\t\tconst parsedRole = new Prims.Role();\n\n\t\tparsedRole.id = role.id;\n\t\tparsedRole.name = role.name;\n\t\tparsedRole.color = role.color;\n\t\tparsedRole.permissions = role.permissions;\n\t\tparsedRole.position = role.position;\n\t\tparsedRole.hoist = Object.prototype.hasOwnProperty.call(role, 'hoist') ? role.hoist : true;\n\n\t\tObject.freeze(parsedRole);\n\t\tserverRoles.set(parsedRole.id, parsedRole);\n\t}\n\n\t// Parse users\n\tconst archiveUsers = archive.users;\n\n\tconst parseAndAddUser = user => {\n\t\tconst parsedUser = new Prims.User();\n\n\t\tparsedUser.id = user.id;\n\t\tparsedUser.avatarURL = user.avatarURL;\n\t\tparsedUser.username = user.username;\n\t\t// Archives with a version < 3 do not save users' discriminators\n\t\tif (user.discriminator) {\n\t\t\tparsedUser.discriminator = user.discriminator;\n\t\t} else {\n\t\t\tparsedUser.discriminator = user.tag.slice(-4);\n\t\t}\n\n\t\tObject.freeze(parsedUser);\n\t\tarchiveUsers.set(parsedUser.id, parsedUser);\n\t};\n\n\tif (archiveVersion >= 6) {\n\t\tfor (const user of json.users) {\n\t\t\tparseAndAddUser(user);\n\t\t}\n\t}\n\n\t// Parse members\n\tconst serverMembers = server.members;\n\tfor (const member of json.members) {\n\t\tconst parsedMember = new Prims.Member();\n\n\t\tparsedMember.id = member.id;\n\t\tparsedMember.nickname = member.nickname; // explicitly null in serialized format if unset\n\n\t\t// V3 onwards stores role IDs; earlier versions store roles\n\t\tif (archiveVersion < 3) {\n\t\t\tfor (const role of member.roles) {\n\t\t\t\tparsedMember.roles.push(serverRoles.get(role.id));\n\t\t\t}\n\t\t} else {\n\t\t\tfor (const roleID of member.roles) {\n\t\t\t\tparsedMember.roles.push(serverRoles.get(roleID));\n\t\t\t}\n\t\t}\n\n\t\tparsedMember.roles.sort((a, b) => b.position - a.position);\n\n\t\tif (archiveVersion < 6) {\n\t\t\tparseAndAddUser(member.user);\n\t\t}\n\n\t\tObject.freeze(parsedMember);\n\t\tserverMembers.set(parsedMember.id, parsedMember);\n\t}\n\n\t// Older archivebot versions treat offline users as not being members\n\tif (archiveVersion < 7) {\n\t\tlet everyoneRole = null;\n\t\tfor (const role of serverRoles.values()) {\n\t\t\tif (role.name === '@everyone') {\n\t\t\t\teveryoneRole = role;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tfor (const user of archiveUsers.values()) {\n\t\t\tif (!serverMembers.has(user.id)) {\n\t\t\t\tconst fakeMember = new Prims.Member();\n\t\t\t\tfakeMember.id = user.id;\n\t\t\t\tfakeMember.nickname = null;\n\t\t\t\tfakeMember.roles.push(everyoneRole);\n\t\t\t\tserverMembers.set(user.id, fakeMember);\n\t\t\t}\n\t\t}\n\t}\n\n\t// Parse emojis\n\tconst serverEmojis = server.emojis;\n\tfor (const emoji of json.emojis) {\n\t\tconst parsedEmoji = new Prims.CustomEmoji();\n\n\t\tparsedEmoji.id = emoji.id;\n\t\tparsedEmoji.name = emoji.name;\n\t\tparsedEmoji.url = emoji.url; // explicitly null in serialized format if unset\n\n\t\tObject.freeze(parsedEmoji);\n\t\tserverEmojis.set(parsedEmoji.id, parsedEmoji);\n\t}\n\n\t// Parse channels\n\tconst serverChannels = server.channels;\n\tfor (const channel of json.channels) {\n\t\tconst parsedChannel = new Prims.Channel();\n\n\t\tparsedChannel.id = channel.id;\n\t\tparsedChannel.name = channel.name || channel.id; // Earlier versions of ArchiveBot do not save channel names\n\t\tparsedChannel.parentID = channel.parentID || null; // *not* explicitly null if unset\n\t\tparsedChannel.nsfw = channel.nsfw === true; // sometimes is null, so explicitly cast to boolean\n\t\tparsedChannel.topic = channel.topic;\n\t\tparsedChannel.position = channel.position;\n\t\tparsedChannel.type = channel.type;\n\n\t\tif (channel.type === 'text') {\n\t\t\tconst channelMessages = parsedChannel.messages;\n\t\t\t// possible tight loop?\n\t\t\tfor (let i = 0; i < channel.messages.length; i++) {\n\t\t\t\tconst message = channel.messages[i];\n\n\t\t\t\tconst parsedMessage = new Prims.Message();\n\n\t\t\t\tparsedMessage.id = message.id;\n\t\t\t\tparsedMessage.authorID = message.author;\n\t\t\t\tparsedMessage.content = message.content;\n\t\t\t\tparsedMessage.createdTimestamp = message.createdTimestamp;\n\t\t\t\tparsedMessage.editedTimestamp = message.editedTimestamp || null;\n\t\t\t\tparsedMessage.type = message.type || 'DEFAULT'; // if DEFAULT, not explicitly set to save space\n\n\t\t\t\tif (message.hasOwnProperty('attachments') && message.attachments.length > 0) {\n\t\t\t\t\tparsedMessage.attachments = [];\n\t\t\t\t\tfor (const attachment of message.attachments) {\n\t\t\t\t\t\tconst parsedAttachment = new Prims.Attachment();\n\n\t\t\t\t\t\tparsedAttachment.id = attachment.id;\n\t\t\t\t\t\tparsedAttachment.name = attachment.name;\n\t\t\t\t\t\tparsedAttachment.size = attachment.size;\n\t\t\t\t\t\tparsedAttachment.url = attachment.url;\n\n\t\t\t\t\t\tif (attachment.hasOwnProperty('width')) parsedAttachment.width = attachment.width;\n\t\t\t\t\t\tif (attachment.hasOwnProperty('height')) parsedAttachment.height = attachment.height;\n\n\t\t\t\t\t\tparsedMessage.attachments.push(parsedAttachment);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Freezing each message slows things down considerably\n\t\t\t\t// Object.freeze(parsedMessage);\n\t\t\t\tchannelMessages.push(parsedMessage);\n\t\t\t}\n\n\t\t\tObject.freeze(channelMessages);\n\t\t}\n\n\t\tObject.freeze(parsedChannel);\n\t\tserverChannels.add(parsedChannel.id);\n\t\tarchive.channels.set(parsedChannel.id, parsedChannel);\n\t}\n\n\tarchive.type = 'server';\n\tarchive.data = server;\n\n\treturn archive;\n};\n\nexport default deserializeArchiveBotServer;\n","import * as Prims from './primitives';\n\nconst deserializeToonMemeBotServer = json => {\n\tconst archive = new Prims.Archive();\n\n\tconst server = new Prims.Server();\n\n\t// server.id = null; // unsaved\n\t// server.name = null; // unsaved\n\t// server.iconURL = null; // unsaved\n\n\t// Parse members\n\tconst serverMembers = server.members;\n\tconst archiveUsers = archive.users;\n\tfor (const member of json.members) {\n\t\tconst parsedMember = new Prims.Member();\n\n\t\tparsedMember.id = member.user.id;\n\t\tparsedMember.nickname = member.nickname; // explicitly null in serialized format if unset\n\t\tObject.freeze(parsedMember);\n\n\t\tserverMembers.set(parsedMember.id, parsedMember);\n\n\t\t// perhaps store users somewhere else?\n\t\tconst parsedUser = new Prims.User();\n\n\t\tparsedUser.id = member.user.id;\n\t\t// parsedUser.avatarURL = null; // unsaved\n\t\tparsedUser.username = member.user.username;\n\t\tparsedUser.discriminator = member.user.discriminator;\n\t\tObject.freeze(parsedUser);\n\n\t\tarchiveUsers.set(parsedUser.id, parsedUser);\n\t}\n\n\t// Parse emojis\n\tconst archiveEmojis = archive.emojis;\n\tconst serverEmojis = server.emojis;\n\n\tconst parseEmoji = emoji => {\n\t\tif (archiveEmojis.has(emoji.id)) return archiveEmojis.get(emoji.id);\n\n\t\tconst parsedEmoji = new Prims.CustomEmoji();\n\n\t\tparsedEmoji.id = emoji.id;\n\t\tparsedEmoji.name = emoji.name;\n\t\tparsedEmoji.url = emoji.url || `https://cdn.discordapp.com/emojis/${emoji.id}`;\n\n\t\tarchiveEmojis.set(parsedEmoji.id, parsedEmoji);\n\t\treturn parsedEmoji;\n\t};\n\n\tfor (const emoji of json.emojis) {\n\t\tserverEmojis.set(emoji.id, parseEmoji(emoji));\n\t}\n\n\t// Parse channels\n\tconst serverChannels = server.channels;\n\tfor (const channel of json.channels) {\n\t\tconst parsedChannel = new Prims.Channel();\n\n\t\tparsedChannel.id = channel.id;\n\t\tparsedChannel.name = channel.name;\n\t\tparsedChannel.nsfw = false; // unsaved\n\t\tparsedChannel.topic = channel.topic;\n\t\tparsedChannel.position = channel.position;\n\t\tparsedChannel.type = 'text'; // ToonMemeBot only saves text channels\n\n\t\tconst channelMessages = parsedChannel.messages;\n\t\t// possible tight loop?\n\t\tfor (let i = 0; i < channel.messages.length; i++) {\n\t\t\tconst message = channel.messages[i];\n\n\t\t\tconst parsedMessage = new Prims.Message();\n\n\t\t\tparsedMessage.id = message.id;\n\t\t\tparsedMessage.authorID = message.author;\n\t\t\tparsedMessage.content = message.content;\n\t\t\tparsedMessage.createdTimestamp = message.createdTimestamp;\n\t\t\tparsedMessage.editedTimestamp = message.editedTimestamp; // explicitly null in serialized format if unset\n\t\t\tparsedMessage.type = 'DEFAULT'; // unsaved\n\n\t\t\tif (message.attachments.length > 0) {\n\t\t\t\tparsedMessage.attachments = [];\n\t\t\t\tfor (const attachment of message.attachments) {\n\t\t\t\t\tconst parsedAttachment = new Prims.Attachment();\n\n\t\t\t\t\tparsedAttachment.id = attachment.id;\n\t\t\t\t\tparsedAttachment.name = attachment.filename;\n\t\t\t\t\tparsedAttachment.size = attachment.filesize;\n\t\t\t\t\tparsedAttachment.url = attachment.url;\n\n\t\t\t\t\tparsedMessage.attachments.push(parsedAttachment);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (message.reactions.length > 0) {\n\t\t\t\tparsedMessage.reactions = [];\n\t\t\t\tfor (const reaction of message.reactions) {\n\t\t\t\t\tconst parsedReaction = new Prims.MessageReaction();\n\t\t\t\t\t\n\t\t\t\t\tparsedReaction.count = reaction.count;\n\t\t\t\t\tconst emojiIsCustom = !!reaction.emoji.id;\n\t\t\t\t\tparsedReaction.emoji = emojiIsCustom ? parseEmoji(reaction.emoji).id : reaction.emoji.name;\n\t\t\t\t\tparsedMessage.reactions.push(parsedReaction);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tObject.freeze(parsedMessage);\n\t\t\tchannelMessages.push(parsedMessage);\n\t\t}\n\n\t\t// Only reverse the messsages if they're in reverse order\n\t\t// This is needed for one specific archive I created with a faulty conversion tool\n\t\tif (channelMessages.length > 1 &&\n\t\t\tchannelMessages[1].createdTimestamp < channelMessages[0].createdTimestamp) {\n\t\t\tchannelMessages.reverse();\n\t\t}\n\n\t\tObject.freeze(channelMessages);\n\t\tObject.freeze(parsedChannel);\n\t\tarchive.channels.set(parsedChannel.id, parsedChannel);\n\t\tserverChannels.add(parsedChannel.id);\n\t}\n\n\tarchive.type = 'server';\n\tarchive.data = server;\n\n\treturn archive;\n};\n\nexport default deserializeToonMemeBotServer;\n","import * as Prims from './primitives';\n\nconst deserializeToonMemeBotChannel = json => {\n\tconst archive = new Prims.Archive();\n\n\t// Dummy channel\n\tconst channel = new Prims.Channel();\n\tchannel.id = 0;\n\tchannel.name = '<only channel>';\n\tchannel.nsfw = false;\n\tchannel.position = 0;\n\tchannel.type = 'text';\n\n\tconst channelMessages = channel.messages;\n\tfor (const message of json) {\n\t\tconst jsonMessage = JSON.parse(message);\n\n\t\tconst parsedMessage = new Prims.Message();\n\n\t\tparsedMessage.id = jsonMessage.id;\n\t\tparsedMessage.authorID = jsonMessage.user.id;\n\t\tparsedMessage.content = jsonMessage.content;\n\t\tparsedMessage.createdTimestamp = jsonMessage.createdTimestamp;\n\t\tparsedMessage.editedTimestamp = jsonMessage.editedTimestamp; // explicitly null in serialized format if unset\n\t\tparsedMessage.type = 'DEFAULT'; // unsaved\n\n\t\tif (jsonMessage.attachments.length > 0) {\n\t\t\tparsedMessage.attachments = [];\n\t\t\tfor (const attachment of jsonMessage.attachments) {\n\t\t\t\tconst parsedAttachment = new Prims.Attachment();\n\n\t\t\t\tparsedAttachment.id = attachment.id;\n\t\t\t\tparsedAttachment.name = attachment.filename;\n\t\t\t\tparsedAttachment.size = attachment.filesize;\n\t\t\t\tparsedAttachment.url = attachment.url;\n\n\t\t\t\tparsedMessage.attachments.push(parsedAttachment);\n\t\t\t}\n\t\t}\n\n\t\t// Single-channel archives do not contain member lists\n\t\tif (!archive.users.has(jsonMessage.user.id)) {\n\t\t\tconst parsedUser = new Prims.User();\n\n\t\t\tparsedUser.id = jsonMessage.user.id;\n\t\t\tparsedUser.username = jsonMessage.user.username;\n\t\t\tparsedUser.discriminator = jsonMessage.user.discriminator;\n\t\t\tObject.freeze(parsedUser);\n\n\t\t\tarchive.users.set(parsedUser.id, parsedUser);\n\t\t}\n\n\t\tObject.freeze(parsedMessage);\n\t\tchannelMessages.push(parsedMessage);\n\t}\n\tObject.freeze(channelMessages);\n\n\tarchive.type = 'channel';\n\tarchive.data = channel;\n\tarchive.channels.set(channel.id, channel);\n\n\treturn archive;\n};\n\nexport default deserializeToonMemeBotChannel;\n","import {unzip} from 'unzipit';\n\nimport deserializeArchiveBotArchive from './deserialize-archivebot-archive';\nimport deserializeArchiveBotServer from './deserialize-archivebot-server';\nimport deserializeToonMemeBotServer from './deserialize-toonmemebot-server';\nimport deserializeToonMemeBotChannel from './deserialize-toonmemebot-channel';\n\n// Try to determine archive version.\n// Current known versions:\n// 'toonmemebot-channel-snapshot': ToonMemeBot single-channel snapshot\n// 'toonmemebot-server-snapshot': ToonMemeBot server snapshot\n// 'archivebot-v1': ArchiveBot server snapshot v1\n// 'archivebot-v2': ArchiveBot server snapshot v2 (v1 but with version tag)\nconst _getArchiveVersion = parsed => {\n\t// If the archive gives us a version string, use that\n\tif (parsed.version) {\n\t\treturn parsed.version;\n\t}\n\n\t// ToonMemeBot single-channel snapshots are arrays of JSON strings\n\tif (parsed instanceof Array) {\n\t\treturn 'toonmemebot-channel-snapshot';\n\t}\n\n\t// Both ArchiveBot archives and ToonMemeBot snapshots contain these properties\n\tif (parsed.channels && parsed.members && parsed.emojis) {\n\t\t// ArchiveBot archives contain server ID, ToonMemeBot snapshots do not\n\t\tif (parsed.id) {\n\t\t\treturn 'archivebot-v1';\n\t\t} else {\n\t\t\treturn 'toonmemebot-server-snapshot';\n\t\t}\n\t}\n\n\treturn null;\n};\n\n/**\n * Deserialize archive from a file\n * @param {File} file\n */\nconst deserializeArchiveFile = async file => {\n\tconst reader = new FileReader();\n\tconst buffer = await new Promise((resolve, reject) => {\n\t\treader.addEventListener('load', () => {\n\t\t\tresolve(reader.result);\n\t\t});\n\t\treader.addEventListener('error', () => {\n\t\t\treject(reader.error);\n\t\t});\n\t\treader.readAsArrayBuffer(file);\n\t});\n\tconst dv = new DataView(buffer);\n\tlet type, jsonText;\n\tlet zipData = null;\n\tif (\n\t\t// zip file signature\n\t\tdv.getInt8(0) === 0x50 &&\n\t\tdv.getInt8(1) === 0x4b &&\n\t\tdv.getInt8(2) === 0x03 &&\n\t\tdv.getInt8(3) === 0x04\n\t) {\n\t\tconst zip = await unzip(buffer);\n\t\tconst {entries} = zip;\n\t\tconst files = Object.values(entries);\n\t\tif (files.length === 1) {\n\t\t\ttype = 'text';\n\t\t\tjsonText = await files[0].text();\n\t\t} else {\n\t\t\tif (Object.prototype.hasOwnProperty.call(entries, 'archive.json')) {\n\t\t\t\ttype = 'zip';\n\t\t\t\tjsonText = await entries['archive.json'].text();\n\t\t\t\tzipData = zip;\n\t\t\t} else {\n\t\t\t\tthrow 'Invalid .zip archive';\n\t\t\t}\n\t\t}\n\t} else {\n\t\ttype = 'text';\n\t\tjsonText = (new TextDecoder()).decode(buffer);\n\t}\n\tconst json = JSON.parse(jsonText);\n\n\tconst version = _getArchiveVersion(json);\n\n\tswitch (version) {\n\t\tcase 'archivebot-v1':\n\t\tcase 'archivebot-v2':\n\t\tcase 'archivebot-v3':\n\t\tcase 'archivebot-v4':\n\t\tcase 'archivebot-v5':\n\t\tcase 'archivebot-v6':\n\t\tcase 'archivebot-v7':\n\t\tcase 'archivebot-v8': {\n\t\t\treturn deserializeArchiveBotServer(json);\n\t\t}\n\t\tcase 'archivebot-v9':\n\t\tcase 'archivebot-v10':\n\t\tcase 'archivebot-v11': {\n\t\t\treturn deserializeArchiveBotArchive(json, type === 'zip' ? zipData : null);\n\t\t}\n\t\tcase 'toonmemebot-server-snapshot': {\n\t\t\treturn deserializeToonMemeBotServer(json);\n\t\t}\n\t\tcase 'toonmemebot-channel-snapshot': {\n\t\t\treturn deserializeToonMemeBotChannel(json);\n\t\t}\n\t\tdefault:\n\t\t\tthrow new Error(`Unknown archive version ${version}`);\n\t}\n};\n\nexport default deserializeArchiveFile;\n","// extracted by mini-css-extract-plugin\nexport default {\"channel-list\":\"style_channel-list_1Y6TS\",\"collapsed\":\"style_collapsed_PB3Xs\",\"channel\":\"style_channel_1SJ-Q\",\"selected\":\"style_selected_7pzso\",\"text-channel\":\"style_text-channel_QVsHK\",\"voice-channel\":\"style_voice-channel_xWp4A\",\"category-channel\":\"style_category-channel_3rQRf\",\"channel-icon\":\"style_channel-icon_3mJlI\"};","const shouldSplitMessages = (first, second) => {\n\treturn first.authorID !== second.authorID || second.referencedMessage !== null;\n};\n\nexport default shouldSplitMessages;\n","import shouldSplitMessages from './should-split-messages';\n\nconst fixupMessageStart = (start, messages) => {\n\t// Clamp within valid message range\n\tlet fixed = Math.max(0, Math.min(start, messages.length - 1));\n\tif (messages.length === 0) return fixed;\n\n\t// Extend so that all messages in \"string\" from that user are visible\n\twhile (fixed > 0 && !shouldSplitMessages(messages[fixed - 1], messages[fixed])) {\n\t\tfixed--;\n\t}\n\n\treturn fixed;\n};\n\nconst fixupMessageEnd = (end, messages) => {\n\t// Clamp within valid message range\n\tlet fixed = Math.max(0, Math.min(end, messages.length - 1));\n\tif (messages.length === 0) return fixed;\n\n\t// Extend so that all messages in \"string\" from that user are visible\n\twhile (fixed < messages.length - 1 && !shouldSplitMessages(messages[fixed], messages[fixed + 1])) {\n\t\tfixed++;\n\t}\n\n\treturn fixed;\n};\n\nexport {fixupMessageStart, fixupMessageEnd};\n","import {fixupMessageStart, fixupMessageEnd} from '../util/fixup-message-boundaries';\n\nexport default (state, currentChannel) => {\n\tif (currentChannel === null) return {currentChannel};\n\tconst channel = state.archive.channels.get(currentChannel);\n\tconst {messages} = channel;\n\tconst newState = {...state, currentChannel};\n\n\tif (!Object.prototype.hasOwnProperty.call(newState.channelScrollState, currentChannel)) {\n\t\tnewState.channelScrollState = {\n\t\t\t...newState.channelScrollState,\n\t\t\t[currentChannel]: {start: fixupMessageStart(0, messages), end: fixupMessageEnd(50, messages)}\n\t\t};\n\n\t}\n\n\treturn newState;\n};\n","export default classNames => {\n\tconst activeClasses = [];\n\tfor (const name in classNames) {\n\t\tif (Object.prototype.hasOwnProperty.call(classNames, name) &&\n\t\t\tclassNames[name]) {\n\t\t\tactiveClasses.push(name);\n\t\t}\n\t}\n\treturn activeClasses.join(' ');\n};\n","import style from './style';\n\nimport {Component} from 'preact';\nimport {connect} from 'unistore/preact';\n\nimport setCurrentChannel from '../../actions/set-current-channel';\n\nimport classNames from '../../util/class-names';\n\n// Un-flatten a channel hierarchy.\nfunction crawlHierarchy (parent, parentID, channels) {\n\tfor (const channel of channels.values()) {\n\t\tif (channel.parentID === parentID) {\n\t\t\tparent.push({\n\t\t\t\tchannel: channel,\n\t\t\t\tchildChannels: crawlHierarchy([], channel.id, channels)\n\t\t\t});\n\t\t}\n\t}\n\n\tparent.sort((a, b) => {\n\t\tlet chanAPosition = a.channel.position;\n\t\tlet chanBPosition = b.channel.position;\n\n\t\t// for some odd reason, categories and channels positioned above the first category\n\t\t// both have position index of 0. offset category indices by 1 to compensate.\n\t\tif (a.channel.type === 'category') chanAPosition++;\n\t\tif (b.channel.type === 'category') chanBPosition++;\n\n\t\treturn chanAPosition - chanBPosition;\n\t});\n\n\treturn parent;\n}\n\nclass _ChannelItem extends Component {\n\tconstructor (props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tcollapsed: false\n\t\t};\n\n\t\tthis.toggleCollapse = this.toggleCollapse.bind(this);\n\t\tthis.selectChannel = this.selectChannel.bind(this);\n\t}\n\n\ttoggleCollapse () {\n\t\tthis.setState({collapsed: !this.state.collapsed});\n\t}\n\n\tselectChannel () {\n\t\tif (this.props.channel.channel.type !== 'text') return;\n\t\tthis.props.setCurrentChannel(this.props.channel.channel.id);\n\t}\n\n\trender () {\n\t\tconst channel = this.props.channel;\n\t\treturn (\n\t\t\t<li>\n\t\t\t\t<div\n\t\t\t\t\tclassName={classNames({\n\t\t\t\t\t\t[style['channel']]: true,\n\t\t\t\t\t\t[style['text-channel']]: channel.channel.type === 'text',\n\t\t\t\t\t\t[style['voice-channel']]: channel.channel.type === 'voice',\n\t\t\t\t\t\t[style['category-channel']]: channel.channel.type === 'category',\n\t\t\t\t\t\t[style['selected']]: channel.channel.id === this.props.currentChannel,\n\t\t\t\t\t\t[style['collapsed']]: this.state.collapsed\n\t\t\t\t\t})}\n\n\t\t\t\t\tonClick = {channel.channel.type === 'category' ? this.toggleCollapse : this.selectChannel}\n\t\t\t\t>\n\t\t\t\t\t<div className={style['channel-icon']}></div>\n\t\t\t\t\t<div className={style['channel-name']}>{channel.channel.name}</div>\n\t\t\t\t</div>\n\t\t\t\t{channel.childChannels.length > 0 ?\n\t\t\t\t\t<ChannelSublist childChannels={channel.childChannels} collapsed={this.state.collapsed} /> :\n\t\t\t\t\tnull\n\t\t\t\t}\n\t\t\t</li>\n\t\t);\n\t}\n}\n\nconst ChannelItem = connect(['currentChannel'], {setCurrentChannel})(_ChannelItem);\n\nconst ChannelSublist = props => <ul className={classNames({\n\t[style['channel-list']]: true,\n\t[style['collapsed']]: props.collapsed\n})}>\n\t{\n\t\tprops.childChannels.map(channel =>\n\t\t\t<ChannelItem key={channel.channel.id} channel={channel} />\n\t\t)\n\t}\n</ul>;\n\nconst ChannelList = props => {\n\tif (props.channels === null) return null;\n\treturn <ChannelSublist childChannels={crawlHierarchy([], null, props.channels)} />;\n};\n\nexport default ChannelList;\n","// extracted by mini-css-extract-plugin\nexport default {\"channel-view\":\"style_channel-view_12bWD\"};","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"style_header_C501l\",\"channel-info\":\"style_channel-info_i1gwW\",\"channel-topic\":\"style_channel-topic_2OnvJ\",\"buttons\":\"style_buttons_1i6F6\",\"button\":\"style_button_3OMqy\",\"active\":\"style_active_vKRfM\",\"disabled\":\"style_disabled_38jIT\",\"sidebar-open\":\"style_sidebar-open_1Kaeb\",\"sidebar-close\":\"style_sidebar-close_2xEcj\",\"icon-pinned-messages\":\"style_icon-pinned-messages_2mwv4\",\"pinned-messages\":\"style_pinned-messages__MheB\"};","// extracted by mini-css-extract-plugin\nexport default {\"jumpable-message\":\"style_jumpable-message_1JL8E\",\"jump\":\"style_jump_278lq\"};","// extracted by mini-css-extract-plugin\nexport default {\"message-list\":\"style_message-list_2ffo_\",\"message-inner\":\"style_message-inner_2qJrw\",\"message-avatar\":\"style_message-avatar_2vkGe\",\"message-header\":\"style_message-header_3ESV_\",\"message-poster\":\"style_message-poster_ogIL0\",\"message-timestamp\":\"style_message-timestamp_RrFB-\",\"message-id\":\"style_message-id_2ZpJB\",\"edited\":\"style_edited_1mfMK\",\"open\":\"style_open_28BzO\",\"closed\":\"style_closed_1sqtJ\",\"edited-date\":\"style_edited-date_tUzYB\",\"message-content\":\"style_message-content_biUSg\",\"message-reactions\":\"style_message-reactions_1FIr3\",\"reaction\":\"style_reaction_3AnQl\",\"reaction-count\":\"style_reaction-count_3N04A\",\"replied-message\":\"style_replied-message_15W6G\",\"replied-poster\":\"style_replied-poster_hhNAK\",\"replied-content\":\"style_replied-content_2i9f9\",\"replied-attachments-icon\":\"style_replied-attachments-icon_2HHI2\"};","import {\n\tcreateElement,\n\trender as preactRender,\n\tcloneElement as preactCloneElement,\n\tcreateRef,\n\tComponent,\n\tcreateContext,\n\tFragment\n} from 'preact';\nimport {\n\tuseState,\n\tuseReducer,\n\tuseEffect,\n\tuseLayoutEffect,\n\tuseRef,\n\tuseImperativeHandle,\n\tuseMemo,\n\tuseCallback,\n\tuseContext,\n\tuseDebugValue\n} from 'preact/hooks';\nimport { PureComponent } from './PureComponent';\nimport { memo } from './memo';\nimport { forwardRef } from './forwardRef';\nimport { Children } from './Children';\nimport { Suspense, lazy } from './suspense';\nimport { SuspenseList } from './suspense-list';\nimport { createPortal } from './portals';\nimport {\n\thydrate,\n\trender,\n\tREACT_ELEMENT_TYPE,\n\t__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED\n} from './render';\nexport * from './scheduler';\n\nconst version = '16.8.0'; // trick libraries to think we are react\n\n/**\n * Legacy version of createElement.\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component constructor\n */\nfunction createFactory(type) {\n\treturn createElement.bind(null, type);\n}\n\n/**\n * Check if the passed element is a valid (p)react node.\n * @param {*} element The element to check\n * @returns {boolean}\n */\nfunction isValidElement(element) {\n\treturn !!element && element.$$typeof === REACT_ELEMENT_TYPE;\n}\n\n/**\n * Wrap `cloneElement` to abort if the passed element is not a valid element and apply\n * all vnode normalizations.\n * @param {import('./internal').VNode} element The vnode to clone\n * @param {object} props Props to add when cloning\n * @param {Array<import('./internal').ComponentChildren>} rest Optional component children\n */\nfunction cloneElement(element) {\n\tif (!isValidElement(element)) return element;\n\treturn preactCloneElement.apply(null, arguments);\n}\n\n/**\n * Remove a component tree from the DOM, including state and event handlers.\n * @param {import('./internal').PreactElement} container\n * @returns {boolean}\n */\nfunction unmountComponentAtNode(container) {\n\tif (container._children) {\n\t\tpreactRender(null, container);\n\t\treturn true;\n\t}\n\treturn false;\n}\n\n/**\n * Get the matching DOM node for a component\n * @param {import('./internal').Component} component\n * @returns {import('./internal').PreactElement | null}\n */\nfunction findDOMNode(component) {\n\treturn (\n\t\t(component &&\n\t\t\t(component.base || (component.nodeType === 1 && component))) ||\n\t\tnull\n\t);\n}\n\n/**\n * Deprecated way to control batched rendering inside the reconciler, but we\n * already schedule in batches inside our rendering code\n * @template Arg\n * @param {(arg: Arg) => void} callback function that triggers the updated\n * @param {Arg} [arg] Optional argument that can be passed to the callback\n */\n// eslint-disable-next-line camelcase\nconst unstable_batchedUpdates = (callback, arg) => callback(arg);\n\n/**\n * Strict Mode is not implemented in Preact, so we provide a stand-in for it\n * that just renders its children without imposing any restrictions.\n */\nconst StrictMode = Fragment;\n\nexport * from 'preact/hooks';\nexport {\n\tversion,\n\tChildren,\n\trender,\n\thydrate,\n\tunmountComponentAtNode,\n\tcreatePortal,\n\tcreateElement,\n\tcreateContext,\n\tcreateFactory,\n\tcloneElement,\n\tcreateRef,\n\tFragment,\n\tisValidElement,\n\tfindDOMNode,\n\tComponent,\n\tPureComponent,\n\tmemo,\n\tforwardRef,\n\t// eslint-disable-next-line camelcase\n\tunstable_batchedUpdates,\n\tStrictMode,\n\tSuspense,\n\tSuspenseList,\n\tlazy,\n\t__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED\n};\n\n// React copies the named exports to the default one.\nexport default {\n\tuseState,\n\tuseReducer,\n\tuseEffect,\n\tuseLayoutEffect,\n\tuseRef,\n\tuseImperativeHandle,\n\tuseMemo,\n\tuseCallback,\n\tuseContext,\n\tuseDebugValue,\n\tversion,\n\tChildren,\n\trender,\n\thydrate,\n\tunmountComponentAtNode,\n\tcreatePortal,\n\tcreateElement,\n\tcreateContext,\n\tcreateFactory,\n\tcloneElement,\n\tcreateRef,\n\tFragment,\n\tisValidElement,\n\tfindDOMNode,\n\tComponent,\n\tPureComponent,\n\tmemo,\n\tforwardRef,\n\tunstable_batchedUpdates,\n\tStrictMode,\n\tSuspense,\n\tSuspenseList,\n\tlazy,\n\t__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED\n};\n","import { Component } from 'preact';\nimport { shallowDiffers } from './util';\n\n/**\n * Component class with a predefined `shouldComponentUpdate` implementation\n */\nexport function PureComponent(p) {\n\tthis.props = p;\n}\nPureComponent.prototype = new Component();\n// Some third-party libraries check if this property is present\nPureComponent.prototype.isPureReactComponent = true;\nPureComponent.prototype.shouldComponentUpdate = function(props, state) {\n\treturn shallowDiffers(this.props, props) || shallowDiffers(this.state, state);\n};\n","import { createElement } from 'preact';\nimport { shallowDiffers } from './util';\n\n/**\n * Memoize a component, so that it only updates when the props actually have\n * changed. This was previously known as `React.pure`.\n * @param {import('./internal').FunctionComponent} c functional component\n * @param {(prev: object, next: object) => boolean} [comparer] Custom equality function\n * @returns {import('./internal').FunctionComponent}\n */\nexport function memo(c, comparer) {\n\tfunction shouldUpdate(nextProps) {\n\t\tlet ref = this.props.ref;\n\t\tlet updateRef = ref == nextProps.ref;\n\t\tif (!updateRef && ref) {\n\t\t\tref.call ? ref(null) : (ref.current = null);\n\t\t}\n\n\t\tif (!comparer) {\n\t\t\treturn shallowDiffers(this.props, nextProps);\n\t\t}\n\n\t\treturn !comparer(this.props, nextProps) || !updateRef;\n\t}\n\n\tfunction Memoed(props) {\n\t\tthis.shouldComponentUpdate = shouldUpdate;\n\t\treturn createElement(c, props);\n\t}\n\tMemoed.displayName = 'Memo(' + (c.displayName || c.name) + ')';\n\tMemoed.prototype.isReactComponent = true;\n\tMemoed._forwarded = true;\n\treturn Memoed;\n}\n","import { options } from 'preact';\nimport { assign } from './util';\n\nlet oldDiffHook = options._diff;\noptions._diff = vnode => {\n\tif (vnode.type && vnode.type._forwarded && vnode.ref) {\n\t\tvnode.props.ref = vnode.ref;\n\t\tvnode.ref = null;\n\t}\n\tif (oldDiffHook) oldDiffHook(vnode);\n};\n\nexport const REACT_FORWARD_SYMBOL =\n\t(typeof Symbol != 'undefined' &&\n\t\tSymbol.for &&\n\t\tSymbol.for('react.forward_ref')) ||\n\t0xf47;\n\n/**\n * Pass ref down to a child. This is mainly used in libraries with HOCs that\n * wrap components. Using `forwardRef` there is an easy way to get a reference\n * of the wrapped component instead of one of the wrapper itself.\n * @param {import('./index').ForwardFn} fn\n * @returns {import('./internal').FunctionComponent}\n */\nexport function forwardRef(fn) {\n\t// We always have ref in props.ref, except for\n\t// mobx-react. It will call this function directly\n\t// and always pass ref as the second argument.\n\tfunction Forwarded(props, ref) {\n\t\tlet clone = assign({}, props);\n\t\tdelete clone.ref;\n\t\tref = props.ref || ref;\n\t\treturn fn(\n\t\t\tclone,\n\t\t\t!ref || (typeof ref === 'object' && !('current' in ref)) ? null : ref\n\t\t);\n\t}\n\n\t// mobx-react checks for this being present\n\tForwarded.$$typeof = REACT_FORWARD_SYMBOL;\n\t// mobx-react heavily relies on implementation details.\n\t// It expects an object here with a `render` property,\n\t// and prototype.render will fail. Without this\n\t// mobx-react throws.\n\tForwarded.render = Forwarded;\n\n\tForwarded.prototype.isReactComponent = Forwarded._forwarded = true;\n\tForwarded.displayName = 'ForwardRef(' + (fn.displayName || fn.name) + ')';\n\treturn Forwarded;\n}\n","import { toChildArray } from 'preact';\n\nconst mapFn = (children, fn) => {\n\tif (children == null) return null;\n\treturn toChildArray(toChildArray(children).map(fn));\n};\n\n// This API is completely unnecessary for Preact, so it's basically passthrough.\nexport const Children = {\n\tmap: mapFn,\n\tforEach: mapFn,\n\tcount(children) {\n\t\treturn children ? toChildArray(children).length : 0;\n\t},\n\tonly(children) {\n\t\tconst normalized = toChildArray(children);\n\t\tif (normalized.length !== 1) throw 'Children.only';\n\t\treturn normalized[0];\n\t},\n\ttoArray: toChildArray\n};\n","import { Component, createElement, options, Fragment } from 'preact';\nimport { assign } from './util';\n\nconst oldCatchError = options._catchError;\noptions._catchError = function(error, newVNode, oldVNode) {\n\tif (error.then) {\n\t\t/** @type {import('./internal').Component} */\n\t\tlet component;\n\t\tlet vnode = newVNode;\n\n\t\tfor (; (vnode = vnode._parent); ) {\n\t\t\tif ((component = vnode._component) && component._childDidSuspend) {\n\t\t\t\tif (newVNode._dom == null) {\n\t\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\t}\n\t\t\t\t// Don't call oldCatchError if we found a Suspense\n\t\t\t\treturn component._childDidSuspend(error, newVNode);\n\t\t\t}\n\t\t}\n\t}\n\toldCatchError(error, newVNode, oldVNode);\n};\n\nconst oldUnmount = options.unmount;\noptions.unmount = function(vnode) {\n\t/** @type {import('./internal').Component} */\n\tconst component = vnode._component;\n\tif (component && component._onResolve) {\n\t\tcomponent._onResolve();\n\t}\n\n\t// if the component is still hydrating\n\t// most likely it is because the component is suspended\n\t// we set the vnode.type as `null` so that it is not a typeof function\n\t// so the unmount will remove the vnode._dom\n\tif (component && vnode._hydrating === true) {\n\t\tvnode.type = null;\n\t}\n\n\tif (oldUnmount) oldUnmount(vnode);\n};\n\nfunction detachedClone(vnode, detachedParent, parentDom) {\n\tif (vnode) {\n\t\tif (vnode._component && vnode._component.__hooks) {\n\t\t\tvnode._component.__hooks._list.forEach(effect => {\n\t\t\t\tif (typeof effect._cleanup == 'function') effect._cleanup();\n\t\t\t});\n\n\t\t\tvnode._component.__hooks = null;\n\t\t}\n\n\t\tvnode = assign({}, vnode);\n\t\tif (vnode._component != null) {\n\t\t\tif (vnode._component._parentDom === parentDom) {\n\t\t\t\tvnode._component._parentDom = detachedParent;\n\t\t\t}\n\t\t\tvnode._component = null;\n\t\t}\n\n\t\tvnode._children =\n\t\t\tvnode._children &&\n\t\t\tvnode._children.map(child =>\n\t\t\t\tdetachedClone(child, detachedParent, parentDom)\n\t\t\t);\n\t}\n\n\treturn vnode;\n}\n\nfunction removeOriginal(vnode, detachedParent, originalParent) {\n\tif (vnode) {\n\t\tvnode._original = null;\n\t\tvnode._children =\n\t\t\tvnode._children &&\n\t\t\tvnode._children.map(child =>\n\t\t\t\tremoveOriginal(child, detachedParent, originalParent)\n\t\t\t);\n\n\t\tif (vnode._component) {\n\t\t\tif (vnode._component._parentDom === detachedParent) {\n\t\t\t\tif (vnode._dom) {\n\t\t\t\t\toriginalParent.insertBefore(vnode._dom, vnode._nextDom);\n\t\t\t\t}\n\t\t\t\tvnode._component._force = true;\n\t\t\t\tvnode._component._parentDom = originalParent;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn vnode;\n}\n\n// having custom inheritance instead of a class here saves a lot of bytes\nexport function Suspense() {\n\t// we do not call super here to golf some bytes...\n\tthis._pendingSuspensionCount = 0;\n\tthis._suspenders = null;\n\tthis._detachOnNextRender = null;\n}\n\n// Things we do here to save some bytes but are not proper JS inheritance:\n// - call `new Component()` as the prototype\n// - do not set `Suspense.prototype.constructor` to `Suspense`\nSuspense.prototype = new Component();\n\n/**\n * @this {import('./internal').SuspenseComponent}\n * @param {Promise} promise The thrown promise\n * @param {import('./internal').VNode<any, any>} suspendingVNode The suspending component\n */\nSuspense.prototype._childDidSuspend = function(promise, suspendingVNode) {\n\tconst suspendingComponent = suspendingVNode._component;\n\n\t/** @type {import('./internal').SuspenseComponent} */\n\tconst c = this;\n\n\tif (c._suspenders == null) {\n\t\tc._suspenders = [];\n\t}\n\tc._suspenders.push(suspendingComponent);\n\n\tconst resolve = suspended(c._vnode);\n\n\tlet resolved = false;\n\tconst onResolved = () => {\n\t\tif (resolved) return;\n\n\t\tresolved = true;\n\t\tsuspendingComponent._onResolve = null;\n\n\t\tif (resolve) {\n\t\t\tresolve(onSuspensionComplete);\n\t\t} else {\n\t\t\tonSuspensionComplete();\n\t\t}\n\t};\n\n\tsuspendingComponent._onResolve = onResolved;\n\n\tconst onSuspensionComplete = () => {\n\t\tif (!--c._pendingSuspensionCount) {\n\t\t\t// If the suspension was during hydration we don't need to restore the\n\t\t\t// suspended children into the _children array\n\t\t\tif (c.state._suspended) {\n\t\t\t\tconst suspendedVNode = c.state._suspended;\n\t\t\t\tc._vnode._children[0] = removeOriginal(\n\t\t\t\t\tsuspendedVNode,\n\t\t\t\t\tsuspendedVNode._component._parentDom,\n\t\t\t\t\tsuspendedVNode._component._originalParentDom\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tc.setState({ _suspended: (c._detachOnNextRender = null) });\n\n\t\t\tlet suspended;\n\t\t\twhile ((suspended = c._suspenders.pop())) {\n\t\t\t\tsuspended.forceUpdate();\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * We do not set `suspended: true` during hydration because we want the actual markup\n\t * to remain on screen and hydrate it when the suspense actually gets resolved.\n\t * While in non-hydration cases the usual fallback -> component flow would occour.\n\t */\n\tconst wasHydrating = suspendingVNode._hydrating === true;\n\tif (!c._pendingSuspensionCount++ && !wasHydrating) {\n\t\tc.setState({ _suspended: (c._detachOnNextRender = c._vnode._children[0]) });\n\t}\n\tpromise.then(onResolved, onResolved);\n};\n\nSuspense.prototype.componentWillUnmount = function() {\n\tthis._suspenders = [];\n};\n\n/**\n * @this {import('./internal').SuspenseComponent}\n * @param {import('./internal').SuspenseComponent[\"props\"]} props\n * @param {import('./internal').SuspenseState} state\n */\nSuspense.prototype.render = function(props, state) {\n\tif (this._detachOnNextRender) {\n\t\t// When the Suspense's _vnode was created by a call to createVNode\n\t\t// (i.e. due to a setState further up in the tree)\n\t\t// it's _children prop is null, in this case we \"forget\" about the parked vnodes to detach\n\t\tif (this._vnode._children) {\n\t\t\tconst detachedParent = document.createElement('div');\n\t\t\tconst detachedComponent = this._vnode._children[0]._component;\n\t\t\tthis._vnode._children[0] = detachedClone(\n\t\t\t\tthis._detachOnNextRender,\n\t\t\t\tdetachedParent,\n\t\t\t\t(detachedComponent._originalParentDom = detachedComponent._parentDom)\n\t\t\t);\n\t\t}\n\n\t\tthis._detachOnNextRender = null;\n\t}\n\n\t// Wrap fallback tree in a VNode that prevents itself from being marked as aborting mid-hydration:\n\t/** @type {import('./internal').VNode} */\n\tconst fallback =\n\t\tstate._suspended && createElement(Fragment, null, props.fallback);\n\tif (fallback) fallback._hydrating = null;\n\n\treturn [\n\t\tcreateElement(Fragment, null, state._suspended ? null : props.children),\n\t\tfallback\n\t];\n};\n\n/**\n * Checks and calls the parent component's _suspended method, passing in the\n * suspended vnode. This is a way for a parent (e.g. SuspenseList) to get notified\n * that one of its children/descendants suspended.\n *\n * The parent MAY return a callback. The callback will get called when the\n * suspension resolves, notifying the parent of the fact.\n * Moreover, the callback gets function `unsuspend` as a parameter. The resolved\n * child descendant will not actually get unsuspended until `unsuspend` gets called.\n * This is a way for the parent to delay unsuspending.\n *\n * If the parent does not return a callback then the resolved vnode\n * gets unsuspended immediately when it resolves.\n *\n * @param {import('./internal').VNode} vnode\n * @returns {((unsuspend: () => void) => void)?}\n */\nexport function suspended(vnode) {\n\t/** @type {import('./internal').Component} */\n\tlet component = vnode._parent._component;\n\treturn component && component._suspended && component._suspended(vnode);\n}\n\nexport function lazy(loader) {\n\tlet prom;\n\tlet component;\n\tlet error;\n\n\tfunction Lazy(props) {\n\t\tif (!prom) {\n\t\t\tprom = loader();\n\t\t\tprom.then(\n\t\t\t\texports => {\n\t\t\t\t\tcomponent = exports.default || exports;\n\t\t\t\t},\n\t\t\t\te => {\n\t\t\t\t\terror = e;\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tif (error) {\n\t\t\tthrow error;\n\t\t}\n\n\t\tif (!component) {\n\t\t\tthrow prom;\n\t\t}\n\n\t\treturn createElement(component, props);\n\t}\n\n\tLazy.displayName = 'Lazy';\n\tLazy._forwarded = true;\n\treturn Lazy;\n}\n","import { Component, toChildArray } from 'preact';\nimport { suspended } from './suspense.js';\n\n// Indexes to linked list nodes (nodes are stored as arrays to save bytes).\nconst SUSPENDED_COUNT = 0;\nconst RESOLVED_COUNT = 1;\nconst NEXT_NODE = 2;\n\n// Having custom inheritance instead of a class here saves a lot of bytes.\nexport function SuspenseList() {\n\tthis._next = null;\n\tthis._map = null;\n}\n\n// Mark one of child's earlier suspensions as resolved.\n// Some pending callbacks may become callable due to this\n// (e.g. the last suspended descendant gets resolved when\n// revealOrder === 'together'). Process those callbacks as well.\nconst resolve = (list, child, node) => {\n\tif (++node[RESOLVED_COUNT] === node[SUSPENDED_COUNT]) {\n\t\t// The number a child (or any of its descendants) has been suspended\n\t\t// matches the number of times it's been resolved. Therefore we\n\t\t// mark the child as completely resolved by deleting it from ._map.\n\t\t// This is used to figure out when *all* children have been completely\n\t\t// resolved when revealOrder is 'together'.\n\t\tlist._map.delete(child);\n\t}\n\n\t// If revealOrder is falsy then we can do an early exit, as the\n\t// callbacks won't get queued in the node anyway.\n\t// If revealOrder is 'together' then also do an early exit\n\t// if all suspended descendants have not yet been resolved.\n\tif (\n\t\t!list.props.revealOrder ||\n\t\t(list.props.revealOrder[0] === 't' && list._map.size)\n\t) {\n\t\treturn;\n\t}\n\n\t// Walk the currently suspended children in order, calling their\n\t// stored callbacks on the way. Stop if we encounter a child that\n\t// has not been completely resolved yet.\n\tnode = list._next;\n\twhile (node) {\n\t\twhile (node.length > 3) {\n\t\t\tnode.pop()();\n\t\t}\n\t\tif (node[RESOLVED_COUNT] < node[SUSPENDED_COUNT]) {\n\t\t\tbreak;\n\t\t}\n\t\tlist._next = node = node[NEXT_NODE];\n\t}\n};\n\n// Things we do here to save some bytes but are not proper JS inheritance:\n// - call `new Component()` as the prototype\n// - do not set `Suspense.prototype.constructor` to `Suspense`\nSuspenseList.prototype = new Component();\n\nSuspenseList.prototype._suspended = function(child) {\n\tconst list = this;\n\tconst delegated = suspended(list._vnode);\n\n\tlet node = list._map.get(child);\n\tnode[SUSPENDED_COUNT]++;\n\n\treturn unsuspend => {\n\t\tconst wrappedUnsuspend = () => {\n\t\t\tif (!list.props.revealOrder) {\n\t\t\t\t// Special case the undefined (falsy) revealOrder, as there\n\t\t\t\t// is no need to coordinate a specific order or unsuspends.\n\t\t\t\tunsuspend();\n\t\t\t} else {\n\t\t\t\tnode.push(unsuspend);\n\t\t\t\tresolve(list, child, node);\n\t\t\t}\n\t\t};\n\t\tif (delegated) {\n\t\t\tdelegated(wrappedUnsuspend);\n\t\t} else {\n\t\t\twrappedUnsuspend();\n\t\t}\n\t};\n};\n\nSuspenseList.prototype.render = function(props) {\n\tthis._next = null;\n\tthis._map = new Map();\n\n\tconst children = toChildArray(props.children);\n\tif (props.revealOrder && props.revealOrder[0] === 'b') {\n\t\t// If order === 'backwards' (or, well, anything starting with a 'b')\n\t\t// then flip the child list around so that the last child will be\n\t\t// the first in the linked list.\n\t\tchildren.reverse();\n\t}\n\t// Build the linked list. Iterate through the children in reverse order\n\t// so that `_next` points to the first linked list node to be resolved.\n\tfor (let i = children.length; i--; ) {\n\t\t// Create a new linked list node as an array of form:\n\t\t// \t[suspended_count, resolved_count, next_node]\n\t\t// where suspended_count and resolved_count are numeric counters for\n\t\t// keeping track how many times a node has been suspended and resolved.\n\t\t//\n\t\t// Note that suspended_count starts from 1 instead of 0, so we can block\n\t\t// processing callbacks until componentDidMount has been called. In a sense\n\t\t// node is suspended at least until componentDidMount gets called!\n\t\t//\n\t\t// Pending callbacks are added to the end of the node:\n\t\t// \t[suspended_count, resolved_count, next_node, callback_0, callback_1, ...]\n\t\tthis._map.set(children[i], (this._next = [1, 0, this._next]));\n\t}\n\treturn props.children;\n};\n\nSuspenseList.prototype.componentDidUpdate = SuspenseList.prototype.componentDidMount = function() {\n\t// Iterate through all children after mounting for two reasons:\n\t// 1. As each node[SUSPENDED_COUNT] starts from 1, this iteration increases\n\t//    each node[RELEASED_COUNT] by 1, therefore balancing the counters.\n\t//    The nodes can now be completely consumed from the linked list.\n\t// 2. Handle nodes that might have gotten resolved between render and\n\t//    componentDidMount.\n\tthis._map.forEach((node, child) => {\n\t\tresolve(this, child, node);\n\t});\n};\n","// This file includes experimental React APIs exported from the \"scheduler\"\n// npm package. Despite being explicitely marked as unstable some libraries\n// already make use of them. This file is not a full replacement for the\n// scheduler package, but includes the necessary shims to make those libraries\n// work with Preact.\n\nexport const unstable_ImmediatePriority = 1;\nexport const unstable_UserBlockingPriority = 2;\nexport const unstable_NormalPriority = 3;\nexport const unstable_LowPriority = 4;\nexport const unstable_IdlePriority = 5;\n\n/**\n * @param {number} priority\n * @param {() => void} callback\n */\nexport function unstable_runWithPriority(priority, callback) {\n\treturn callback();\n}\n\nexport const unstable_now =\n\ttypeof performance === 'object' && typeof performance.now === 'function'\n\t\t? performance.now.bind(performance)\n\t\t: () => Date.now();\n","// extracted by mini-css-extract-plugin\nexport default {\"attachment\":\"style_attachment_1waLy\",\"attachment-file\":\"style_attachment-file_1ckYT\",\"attachment-image\":\"style_attachment-image_1rWXy\",\"attachment-size\":\"style_attachment-size_l19XM\"};","import style from './style';\n\nconst MAX_IMAGE_SIZE = 500;\n\n// `width: auto; height: auto` overrides unloaded images' \"intrinsic size\", causing the scroll to jump when they load,\n// so use this JS to style them instead\nconst sizeImageAttachment = attachment => {\n\tif (!attachment.width || !attachment.height) {\n\t\t// fall back to CSS for dynamically-sized images\n\t\treturn `max-width: ${MAX_IMAGE_SIZE}px; max-height: ${MAX_IMAGE_SIZE}px; width: auto; height: auto;`;\n\t}\n\n\tconst largestDimension = Math.max(attachment.width, attachment.height);\n\tif (largestDimension <= MAX_IMAGE_SIZE) return '';\n\tconst scaleFactor = MAX_IMAGE_SIZE / largestDimension;\n\n\treturn `width: ${attachment.width * scaleFactor}px; height: ${attachment.height * scaleFactor}px;`;\n};\n\nconst Attachment = props => {\n\treturn (\n\t\t<div className={style.attachment}>\n\t\t\t{\n\t\t\t\t/\\.(jpe?g|png|gif)$/.test(props.attachment.url.toLowerCase()) ?\n\t\t\t\t\t<img\n\t\t\t\t\t\twidth={props.attachment.width || null}\n\t\t\t\t\t\theight={props.attachment.height || null}\n\t\t\t\t\t\tsrc={props.attachment.url}\n\t\t\t\t\t\tclassName={style['attachment-image']}\n\t\t\t\t\t\tstyle={sizeImageAttachment(props.attachment)}\n\t\t\t\t\t/> :\n\t\t\t\t\t<div className={style['attachment-file']}>\n\t\t\t\t\t\t<a href={props.attachment.url}>{props.attachment.name}</a>\n\t\t\t\t\t\t<span className={style['attachment-size']}>{props.attachment.size} bytes</span>\n\t\t\t\t\t</div>\n\t\t\t}\n\n\t\t</div>\n\t);\n};\n\nexport default Attachment;\n","// extracted by mini-css-extract-plugin\nexport default {\"avatar\":\"style_avatar_3GO5K\"};","import style from './style.scss';\n\nimport {Component} from 'preact';\nimport {connect} from 'unistore/preact';\n\n// Keep track of which avatars already failed to load so we don't make a new request to Discord every time they appear.\n// This differs on a per-archive basis (some archives store avatars, some don't, and some store out-of-date avatars),\n// so store a WeakMap mapping archives to their avatar registries.\nconst metaAvatarRegistry = new WeakMap();\n\n// Generate an SVG image for a pseudorandomly-colored default avatar.\nconst defaultAvatar = name => {\n\tlet color = 0;\n\tfor (let i = 0; i < name.length; i++) {\n\t\tcolor = (color + (name.charCodeAt(i) << i)) & 0xffffffff;\n\t}\n\n\tfor (let i = 0; i < 4; i++) {\n\t\tcolor ^= color << 13;\n\t\tcolor ^= color >> 17;\n\t\tcolor ^= color << 5;\n\t}\n\n\tcolor &= 0xffffff;\n\n\tconst luma = (0.2 * ((color & 0xff0000) >> 16)) + (0.7 * ((color & 0x00ff00) >> 8)) + (0.1 * (color & 0x0000ff));\n\n\treturn `<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"128\" height=\"128\">\n\t\t\t<rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" fill=\"#${('000000' + color.toString(16)).slice(-6)}\" />\n\t\t\t<text font-family=\"sans-serif\" x=\"50%\" y=\"50%\" fill=\"${luma > 127 ? 'black' : 'white'}\" text-anchor=\"middle\" dominant-baseline=\"central\" font-size=\"48px\">${'&#' + name.codePointAt(0) +  ';'}</text>\n\t\t</svg>\n\t`;\n};\n\nclass Avatar extends Component {\n\tconstructor (props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\thandledError: false\n\t\t};\n\n\t\tthis.getUserID = this.getUserID.bind(this);\n\t\tthis.handleError = this.handleError.bind(this);\n\t\tthis.getAvatarURL = this.getAvatarURL.bind(this);\n\t\tthis.getDefaultAvatar = this.getDefaultAvatar.bind(this);\n\t\tthis.getAvatarRegistry = this.getAvatarRegistry.bind(this);\n\t}\n\n\tgetUserID () {\n\t\treturn this.props.userID || this.props.user.id;\n\t}\n\n\tgetAvatarURL (size) {\n\t\tif (this.props.archive.avatars.has(this.getUserID())) {\n\t\t\treturn this.props.archive.avatars.get(this.getUserID());\n\t\t}\n\t\treturn this.props.user.avatarURL.replace(/\\?size=\\d+/, '') + `?size=${size}`;\n\t}\n\n\tgetDefaultAvatar () {\n\t\tconst svg =  defaultAvatar(\n\t\t\tthis.props.user ? this.props.user.tag :\n\t\t\t\tthis.props.userID ? this.props.userID :\n\t\t\t\t\t'✖');\n\t\treturn `data:image/svg+xml;utf8,${encodeURIComponent(svg)}`;\n\t}\n\n\tgetAvatarRegistry () {\n\t\tif (metaAvatarRegistry.has(this.props.archive)) {\n\t\t\treturn metaAvatarRegistry.get(this.props.archive);\n\t\t}\n\t\tconst registry = new Map();\n\t\tmetaAvatarRegistry.set(this.props.archive, registry);\n\t\treturn registry;\n\t}\n\n\thandleError (e) {\n\t\tthis.getAvatarRegistry().set(this.getUserID(), false);\n\t\te.target.src = this.getDefaultAvatar();\n\n\t\tthis.setState({handledError: true});\n\t}\n\n\trender () {\n\t\tconst {props} = this;\n\t\tconst registry = this.getAvatarRegistry();\n\n\t\tconst hasAvatar = !!(props.user && props.user.avatarURL);\n\t\tconst avatarURL = hasAvatar && this.getAvatarURL(props.size);\n\t\tconst loadResultKnown = hasAvatar && registry.has(this.getUserID());\n\t\tconst knownUnsuccessful = hasAvatar && loadResultKnown && !registry.get(this.getUserID());\n\n\t\treturn (\n\t\t\t<img\n\t\t\t\tclassName={style['avatar']}\n\t\t\t\tsrc={hasAvatar && !knownUnsuccessful ? avatarURL : this.getDefaultAvatar()}\n\t\t\t\tonError={this.state.handledError ? null : this.handleError}\n\t\t\t\twidth={props.size}\n\t\t\t\theight={props.size}\n\t\t\t\tstyle={`width: ${props.size}; height: ${props.size}`}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default connect('archive')(Avatar);\n","// extracted by mini-css-extract-plugin\nexport default {\"emoji-container\":\"style_emoji-container_4nMgj\",\"emoji\":\"style_emoji_2D18y\",\"reaction-emoji\":\"style_reaction-emoji_22uC9\"};","// extracted by mini-css-extract-plugin\nexport default {\"tooltip\":\"style_tooltip_M75t2\",\"right\":\"style_right_39NJc\",\"left\":\"style_left_neK2R\",\"top\":\"style_top_L4fN9\",\"bottom\":\"style_bottom_2qaLt\"};","import style from './style';\n\nimport {Component} from 'preact';\n\nclass Tooltip extends Component {\n\trender () {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={style['tooltip'] +\n\t\t\t\t\t(this.props.className ? ` ${this.props.className}` : ' ' +\n\t\t\t\t\tstyle[this.props.side || 'right'])}\n\t\t\t>\n\t\t\t\t{this.props.children}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Tooltip;\n","import style from './style';\n\nimport {Component} from 'preact';\nimport {connect} from 'unistore/preact';\nimport {toCodePoints} from 'twemoji-parser';\n\nimport Tooltip from '../Tooltip/Tooltip';\n\nimport getEmojiName from '../../util/get-emoji-name';\n\n// Copied in from twemoji-parser because they don't export it\nconst vs16RegExp = /\\uFE0F/g;\n// avoid using a string literal like '\\u200D' here because minifiers expand it inline\nconst zeroWidthJoiner = String.fromCharCode(0x200d);\n\nconst removeVS16s = rawEmoji => {\n\treturn rawEmoji.indexOf(zeroWidthJoiner) < 0 ? rawEmoji.replace(vs16RegExp, '') : rawEmoji;\n};\n\nconst useEmoji = Component => {\n\treturn connect('archive')(props => {\n\t\tconst {emoji, archive, ...rest} = props;\n\t\tlet emojiName;\n\t\tlet emojiURL;\n\t\tif (typeof emoji === 'string') {\n\t\t\temojiName = getEmojiName(emoji);\n\t\t\t// TODO: self-host twemoji\n\t\t\tconst codepoints = toCodePoints(removeVS16s(emoji)).join('-');\n\t\t\temojiURL = `https://twemoji.maxcdn.com/v/latest/svg/${codepoints}.svg`;\n\t\t} else {\n\t\t\temojiURL = archive.emojiURLs.has(emoji.id) ?\n\t\t\t\tarchive.emojiURLs.get(emoji.id) :\n\t\t\t\t`https://cdn.discordapp.com/emojis/${emoji.id}`;\n\n\t\t\temojiName = archive.emojis.has(emoji.id) ?\n\t\t\t\tarchive.emojis.get(emoji.id).name :\n\t\t\t\temoji.name;\n\t\t}\n\t\treturn <Component emojiName={emojiName} emojiURL={emojiURL} {...rest} />;\n\t});\n};\n\nconst ReactionEmoji = useEmoji(({emojiName, emojiURL}) =>\n\t<img\n\t\tdraggable={false}\n\t\tclassName={`${style['emoji']} ${style['reaction-emoji']}`}\n\t\tsrc={emojiURL}\n\t\talt={`:${emojiName}:`}\n\t/>);\n\nclass _TooltipEmoji extends Component {\n\tconstructor (props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\thover: false\n\t\t};\n\n\t\tthis.onPointerEnter = this.onPointerEnter.bind(this);\n\t\tthis.onPointerOut = this.onPointerOut.bind(this);\n\t}\n\n\tonPointerEnter () {\n\t\tthis.setState({hover: true});\n\t}\n\n\tonPointerOut () {\n\t\tthis.setState({hover: false});\n\t}\n\n\trender () {\n\t\tconst {emojiURL, emojiName} = this.props;\n\t\treturn (\n\t\t\t<span\n\t\t\t\tclassName={style['emoji-container']}\n\t\t\t\tonPointerEnter={this.onPointerEnter}\n\t\t\t\tonPointerOut={this.onPointerOut}\n\t\t\t>\n\t\t\t\t<img draggable={false} className={style['emoji']} src={emojiURL} alt={`:${emojiName}:`}></img>\n\t\t\t\t{this.state.hover ? <Tooltip side=\"top\">{emojiName}</Tooltip> : null}\n\t\t\t</span>\n\t\t);\n\t}\n}\n\nconst TooltipEmoji = useEmoji(_TooltipEmoji);\n\nexport {TooltipEmoji, ReactionEmoji};\n","import emojis from './emojis.json';\n\nexport default str => {\n\tif (Object.prototype.hasOwnProperty.call(emojis, str)) return emojis[str][0];\n\treturn null;\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"spoiler\":\"style_spoiler_1rLLL\",\"open\":\"style_open_20oRy\",\"code\":\"style_code_h5FTs\",\"block-quote\":\"style_block-quote_2QLNt\",\"mention\":\"style_mention_2WGwn\",\"user\":\"style_user_1vyd5\",\"channel\":\"style_channel_3e4zx\"};","export default (state, newID) => {\n\treturn {showInfoOfUserID: newID};\n};\n","export default (memberID, archive, prefixWithAt = false) => {\n\tconst member = archive.type === 'server' && archive.data.members.get(memberID);\n\tconst prefix = prefixWithAt ? '@' : '';\n\tif (member && member.nickname !== null) return prefix + member.nickname;\n\n\tconst user = archive.users.get(memberID);\n\tif (user && user.username !== 'Deleted User') return prefix + user.username;\n\n\treturn `<@${memberID}>`;\n};\n","/* eslint-disable react/display-name */\nimport style from './style.scss';\n\nimport {Component} from 'preact';\nimport {connect} from 'unistore/preact';\nimport {parser, markdownEngine} from 'discord-markdown';\nimport emojiRegex from 'twemoji-parser/dist/lib/regex';\n\nimport {TooltipEmoji} from '../Emoji/Emoji';\n\nimport setUserInfoID from '../../actions/set-user-info-id';\nimport setCurrentChannel from '../../actions/set-current-channel';\n\nimport classNames from '../../util/class-names';\nimport getMemberName from '../../util/get-member-name';\n\nclass Spoiler extends Component {\n\tconstructor (props) {\n\t\tsuper(props);\n\n\t\tthis.state = {spoiled: false};\n\t\tthis.toggleSpoiled = this.toggleSpoiled.bind(this);\n\t}\n\n\ttoggleSpoiled () {\n\t\tthis.setState(state => {\n\t\t\treturn {spoiled: !state.spoiled};\n\t\t});\n\t}\n\n\trender () {\n\t\treturn <span\n\t\t\tclassName={classNames({\n\t\t\t\t[style['spoiler']]: true,\n\t\t\t\t[style['open']]: this.state.spoiled\n\t\t\t})}\n\t\t\tonClick={this.toggleSpoiled}\n\t\t>\n\t\t\t{this.props.children}\n\t\t</span>;\n\t}\n}\n\nconst UserMention = connect('archive', {setUserInfoID})(props =>\n\t<span\n\t\tclassName={`${style['mention']} ${style['user']}`}\n\t\tonClick={() => props.setUserInfoID(props.id)}\n\t>\n\t\t{getMemberName(props.id, props.archive, true)}\n\t</span>\n);\n\nconst ChannelMention = connect('archive', {setCurrentChannel})(props => {\n\tconst hasChannel = props.archive.channels.has(props.id);\n\tconst channel = props.archive.channels.get(props.id);\n\treturn (\n\t\t<span\n\t\t\tclassName={`${style['mention']} ${style['channel']}`}\n\t\t\tonClick={hasChannel ? () => props.setCurrentChannel(props.id) : null}\n\t\t>\n\t\t\t{hasChannel ? `#${channel.name}` : '#deleted-channel'}\n\t\t</span>\n\t);\n});\n\nconst RoleMention = connect('archive')(props => {\n\tconst role = props.archive.data.roles.get(props.id);\n\tif (!role) return '@deleted-role';\n\n\t// If the role has no color, use the default blue. Otherwise, define a custom style.\n\tlet styleString = '';\n\tif (role.color !== '#000000') {\n\t\tconst roleColorInt = parseInt(role.color.slice(1), 16);\n\t\tconst roleColorR = (roleColorInt >> 16) & 0xff;\n\t\tconst roleColorG = (roleColorInt >> 8) & 0xff;\n\t\tconst roleColorB = roleColorInt & 0xff;\n\t\tstyleString = `color: ${role.color}; background-color: rgba(${roleColorR}, ${roleColorG}, ${roleColorB}, 0.1)`;\n\t}\n\n\treturn (\n\t\t<span\n\t\t\tclassName={style['mention']}\n\t\t\tstyle={styleString}\n\t\t>\n\t\t\t@{role.name}\n\t\t</span>\n\t);\n});\n\n// If the URL is \"dangerous\" (cannot be sanitized), return regular text. Otherwise, create a link.\nconst makeLink = (content, node) => {\n\tconst target = markdownEngine.sanitizeUrl(node.target);\n\n\treturn target ?\n\t\t<a href={target}>{content}</a> :\n\t\t<span>{content}</span>;\n};\n\nconst toTwemoji = text => {\n\temojiRegex.lastIndex = 0;\n\tconst nodes = [];\n\tlet result;\n\tlet lastLastIndex = 0;\n\t// eslint-disable-next-line no-cond-assign\n\twhile (result = emojiRegex.exec(text)) {\n\t\tconst emojiText = result[0];\n\t\tnodes.push(text.slice(lastLastIndex, result.index));\n\t\tnodes.push(<TooltipEmoji emoji={emojiText} />);\n\t\tlastLastIndex = emojiRegex.lastIndex;\n\t}\n\n\tif (lastLastIndex !== text.length) {\n\t\tnodes.push(text.slice(lastLastIndex));\n\t}\n\n\treturn nodes;\n};\n\nwindow.toTwemoji = toTwemoji;\n\nconst reactRules = {\n\ttext: content => toTwemoji(content),\n\tem: content => <em>{content}</em>,\n\tstrong: content => <strong>{content}</strong>,\n\tu: content => <u>{content}</u>,\n\tstrike: content => <strike>{content}</strike>,\n\tspoiler: content => <Spoiler>{content}</Spoiler>,\n\tbr: () => <br/>,\n\tinlineCode: content => <code className={style['code']}>{content}</code>,\n\tcodeBlock: content => <pre className={style['code-block']}>{content}</pre>,\n\tblockQuote: content => <blockquote className={style['block-quote']}>{content}</blockquote>,\n\turl: makeLink,\n\tautolink: makeLink,\n\tdiscordUser: (content, node) => <UserMention id={node.id} />,\n\tdiscordEveryone: () => <span className={style['mention']}>@everyone</span>,\n\tdiscordHere: () => <span className={style['mention']}>@here</span>,\n\tdiscordRole: (content, node) => <RoleMention id={node.id} />,\n\tdiscordChannel: (content, node) => <ChannelMention id={node.id} />,\n\tdiscordEmoji: (content, node) => <TooltipEmoji emoji={node} />\n};\n\nconst reactify = nodeArray => nodeArray.map(node => {\n\tconst nodeHasContent = Object.prototype.hasOwnProperty.call(node, 'content');\n\tlet content = node.content;\n\tif (nodeHasContent && Array.isArray(node.content)) {\n\t\tcontent = reactify(node.content);\n\t}\n\n\tif (Object.prototype.hasOwnProperty.call(reactRules, node.type)) {\n\t\treturn reactRules[node.type](content, node);\n\t}\n\n\t// eslint-disable-next-line no-console\n\tconsole.warn(`Unknown Markdown node type: ${node.type}`);\n\treturn nodeHasContent ? reactRules.text(content) : null;\n});\n\n//const Markdown = props => reactify(parser(props.text));\nconst Markdown = props => {\n\tconst parsed = parser(props.text);\n\treturn reactify(parsed);\n};\n\nexport default Markdown;\n","import {fixupMessageStart, fixupMessageEnd} from '../util/fixup-message-boundaries';\n\nexport default (state, channelID, start, end) => {\n\tconst {messages} = state.archive.channels.get(channelID);\n\treturn {\n\t\tchannelScrollState: {\n\t\t\t...state.channelScrollState,\n\t\t\t[channelID]: {\n\t\t\t\tstart: fixupMessageStart(start, messages),\n\t\t\t\tend: fixupMessageEnd(end, messages)\n\t\t\t}\n\t\t}\n\t};\n};\n\nexport {fixupMessageStart, fixupMessageEnd};\n","import {Component} from 'preact';\nimport {connect} from 'unistore/preact';\n\nimport setChannelScrollState from '../../actions/set-channel-scroll-state';\nimport setCurrentChannel from '../../actions/set-current-channel';\n\nconst JumpableMessageHOC = WrappedComponent => {\n\treturn connect(['archive', 'currentChannel'], {setChannelScrollState, setCurrentChannel})(\n\t\tclass JumpableMessage extends Component {\n\t\t\tconstructor (props) {\n\t\t\t\tsuper(props);\n\n\t\t\t\tthis.jumpToMessage = this.jumpToMessage.bind(this);\n\t\t\t}\n\n\t\t\tjumpToMessage (messageID, messageChannel = this.props.currentChannel) {\n\t\t\t\tif (messageChannel !== this.props.currentChannel) {\n\t\t\t\t\tthis.props.setCurrentChannel(messageChannel);\n\t\t\t\t}\n\n\t\t\t\tconst messageIndex = this.props.archive.channels.get(messageChannel).messages.findIndex(\n\t\t\t\t\tmessage => message.id === messageID);\n\t\t\n\t\t\t\tthis.props.setChannelScrollState(messageChannel, messageIndex - 25, messageIndex + 25);\n\t\t\t}\n\n\t\t\trender () {\n\t\t\t\treturn <WrappedComponent jumpToMessage={this.jumpToMessage} {...this.props} />;\n\t\t\t}\n\t\t}\n\t);\n};\n\nexport default JumpableMessageHOC;\n","export default (state, reactions, idx) => {\n\treturn {\n\t\treactionsToShow: reactions,\n\t\tshowReactionIndex: idx\n\t};\n};\n","// TODO: return null if there's no color-- such usernames appear white in chat but grey in Discord's user list\nconst getMemberColor = (memberID, archive) => {\n\tif (archive.type !== 'server' || !archive.data.members.has(memberID)) return 'white';\n\tconst member = archive.data.members.get(memberID);\n\n\tlet highestRolePosition = -1;\n\tlet highestRoleColor = 'white';\n\n\tfor (const role of member.roles) {\n\t\t// Black means \"no color\" for some reason. Fun fact: this is actually how Discord represents it-- try picking\n\t\t// the color black for a role, and it won't work.\n\t\tif (role.color === '#000000') continue;\n\t\tif (role.position > highestRolePosition) {\n\t\t\thighestRolePosition = role.position;\n\t\t\thighestRoleColor = role.color;\n\t\t}\n\t}\n\n\treturn highestRoleColor;\n};\n\nexport default getMemberColor;\n","// TODO: something a bit more user friendly than standard ISO formatting\nconst formatTimestamp = timestamp => new Date(timestamp).toISOString();\n\nexport default formatTimestamp;\n","import style from './style';\n\nimport {Component} from 'preact';\nimport {connect} from 'unistore/preact';\nimport {memo} from 'preact/compat';\n\nimport Attachment from '../Attachment/Attachment';\nimport Avatar from '../Avatar/Avatar';\nimport {ReactionEmoji} from '../Emoji/Emoji';\nimport Markdown from '../Markdown/Markdown';\nimport Tooltip from '../Tooltip/Tooltip';\nimport JumpableMessageHOC from '../JumpableMessage/JumpableMessageHOC';\n\nimport setUserInfoID from '../../actions/set-user-info-id';\nimport setReactionInfo from '../../actions/set-reaction-info';\n\nimport getMemberName from '../../util/get-member-name';\nimport getMemberColor from '../../util/member-role-color';\nimport formatTimestamp from '../../util/format-timestamp';\nimport classNames from '../../util/class-names';\n\nclass Edited extends Component {\n\tconstructor (props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tstayOpen: false\n\t\t};\n\n\t\tthis.toggleStayOpen = this.toggleStayOpen.bind(this);\n\t}\n\n\ttoggleStayOpen () {\n\t\tthis.setState(prevState => {\n\t\t\treturn {\n\t\t\t\tstayOpen: !prevState.stayOpen\n\t\t\t};\n\t\t});\n\t}\n\n\trender () {\n\t\treturn (\n\t\t\t<span className={classNames({\n\t\t\t\t[style['edited']]: true,\n\t\t\t\t[style['open']]: this.state.stayOpen,\n\t\t\t\t[style['closed']]: !this.state.stayOpen\n\t\t\t})}>\n\t\t\t\t<span onClick={this.toggleStayOpen}>(edited)</span>\n\t\t\t\t<Tooltip className={style['edited-date']}>{formatTimestamp(this.props.timestamp)}</Tooltip>\n\t\t\t</span>\n\t\t);\n\t}\n}\n\nconst MessageReaction = connect('archive', {setReactionInfo})(\n\t({reactions, archive, reaction, reactionIndex, setReactionInfo}) => {\n\t\tconst {count, emoji, emojiIsCustom} = reaction;\n\t\treturn (\n\t\t\t<div className={style['reaction']} onClick={() => setReactionInfo(reactions, reactionIndex)}>\n\t\t\t\t<ReactionEmoji emoji={emojiIsCustom ? archive.emojis.get(emoji) : emoji} />\n\t\t\t\t<span className={style['reaction-count']}>{count}</span>\n\t\t\t</div>\n\t\t);\n\t}\n);\n\nconst MessageContents = ({message}) => (\n\t<div className={style.message} key={message.id}>\n\t\t<div className={style['message-content']}>\n\t\t\t<span><Markdown text={message.content} /></span>\n\t\t\t{message.editedTimestamp ?\n\t\t\t\t<Edited timestamp={message.editedTimestamp}></Edited> :\n\t\t\t\tnull\n\t\t\t}\n\t\t</div>\n\t\t{message.attachments === null ? null : message.attachments.map((attachment, index) =>\n\t\t\t<Attachment\n\t\t\t\tkey={index}\n\t\t\t\tattachment={attachment}\n\t\t\t/>\n\t\t)}\n\t\t{message.reactions === null ? null :\n\t\t\t<div className={style['message-reactions']}>\n\t\t\t\t{message.reactions.map((reaction, index) =>\n\t\t\t\t\t<MessageReaction\n\t\t\t\t\t\tkey={reaction.emoji}\n\t\t\t\t\t\treaction={reaction}\n\t\t\t\t\t\treactions={message.reactions}\n\t\t\t\t\t\treactionIndex={index}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t}\n\t</div>\n);\n\n//console.log(JumpableMessageHOC);\n\nconst RepliedContent = JumpableMessageHOC(({text, jumpToMessage, messageID, hasAttachments}) => (\n\t<div className={style['replied-content']} onClick={() => jumpToMessage(messageID)}>\n\t\t{(!text && hasAttachments) ? <i>Click to see attachment</i> : <Markdown text={text} />}\n\t</div>\n));\n\nconst RepliedMessage = connect('archive', {setUserInfoID})(({message, archive, setUserInfoID}) => {\n\tconst hasAttachments = message.attachments && message.attachments.length > 0;\n\treturn (\n\t\t<div className={style['replied-message']}>\n\t\t\t<div className={style['replied-avatar']}>\n\t\t\t\t<Avatar\n\t\t\t\t\tuser={archive.users.get(message.authorID)}\n\t\t\t\t\tsize={16}\n\t\t\t\t\tuserID={message.authorID}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclassName={style['replied-poster']}\n\t\t\t\tstyle={`color: ${getMemberColor(message.authorID, archive)}`}\n\t\t\t\tonClick={() => setUserInfoID(message.authorID)}\n\t\t\t>\n\t\t\t\t{getMemberName(message.authorID, archive)}\n\t\t\t</div>\n\t\t\t<RepliedContent text={message.content} hasAttachments={hasAttachments} messageID={message.id} />\n\t\t\t{hasAttachments ?\n\t\t\t\t<div className={style['replied-attachments-icon']} /> :\n\t\t\t\tnull}\n\t\t</div>\n\t);\n});\n\nconst MessageList = props => {\n\tconst messageComponents = [];\n\n\tconst {messages, message, start, end} = props;\n\n\tlet firstMessage;\n\tif (messages) {\n\t\tif (messages.length === 0) return null;\n\t\tfor (let i = start; i < end; i++) {\n\t\t\tmessageComponents.push(<MessageContents message={messages[i]} />);\n\t\t}\n\t\tfirstMessage = messages[start];\n\t} else {\n\t\tmessageComponents.push(<MessageContents message={message} />);\n\t\tfirstMessage = message;\n\t}\n\n\treturn (\n\t\t<div className={style['message-list']}>\n\t\t\t{firstMessage.referencedMessage ? <RepliedMessage message={firstMessage.referencedMessage} /> : null}\n\t\t\t<div className={style['message-inner']}>\n\t\t\t\t<div className={style['message-avatar']}>\n\t\t\t\t\t<Avatar\n\t\t\t\t\t\tuser={props.archive.users.get(firstMessage.authorID)}\n\t\t\t\t\t\tsize={32}\n\t\t\t\t\t\tuserID={firstMessage.authorID}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className={style['message-right']}>\n\t\t\t\t\t<div className={style['message-header']}>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={style['message-poster']}\n\t\t\t\t\t\t\tstyle={`color: ${getMemberColor(firstMessage.authorID, props.archive)}`}\n\t\t\t\t\t\t\tonClick={() => props.setUserInfoID(firstMessage.authorID)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{getMemberName(firstMessage.authorID, props.archive)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={style['message-timestamp']}>\n\t\t\t\t\t\t\t{formatTimestamp(firstMessage.createdTimestamp)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={style['message-bodies']}>\n\t\t\t\t\t\t{messageComponents}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\n\t\t</div>\n\t);\n};\n\nexport default connect(['archive'], {setUserInfoID})(memo(MessageList));\n","import style from './style';\n\nimport MessageList from '../MessageList/MessageList';\nimport JumpableMessageHOC from './JumpableMessageHOC';\n\nconst JumpableMessage = JumpableMessageHOC(props => {\n\tconst {message, channelID, jumpToMessage} = props;\n\treturn (\n\t\t<div\n\t\t\tclassName={style['jumpable-message']}\n\t\t\tonClick={jumpToMessage.bind(this, message.id, channelID)}\n\t\t>\n\t\t\t<MessageList message={message}/>\n\t\t\t<div className={style['jump']}>\n\t\t\t\tJump\n\t\t\t</div>\n\t\t</div>\n\t);\n});\n\n\nexport {JumpableMessageHOC};\n\nexport default JumpableMessage;\n","import style from './style';\n\nimport {Component} from 'preact';\nimport {connect} from 'unistore/preact';\n\nimport classNames from '../../util/class-names';\n\nimport toggleSidebar from '../../actions/toggle-sidebar';\n\nimport JumpableMessage from '../JumpableMessage/JumpableMessage';\n\nclass Header extends Component {\n\tconstructor (props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tshowPinnedMessages: false\n\t\t};\n\n\t\tthis.toggleShowPinnedMessages = this.toggleShowPinnedMessages.bind(this);\n\t}\n\n\ttoggleShowPinnedMessages () {\n\t\tthis.setState(prevState => ({\n\t\t\tshowPinnedMessages: !prevState.showPinnedMessages\n\t\t}));\n\t}\n\n\trender () {\n\t\tconst {channel} = this.props;\n\t\treturn (\n\t\t\t<div className={style['header']}>\n\t\t\t\t<div className={style['channel-info']}>\n\t\t\t\t\t{channel ? <>\n\t\t\t\t\t\t<div className={style['channel-name']}>{channel.name}</div>\n\t\t\t\t\t\t<div className={style['channel-topic']}>{channel.topic}</div>\n\t\t\t\t\t</> : null}\n\t\t\t\t</div>\n\t\t\t\t<div className={style['buttons']}>\n\t\t\t\t\t{channel && channel.pinnedMessages ?\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tonClick={this.toggleShowPinnedMessages}\n\t\t\t\t\t\t\tclassName={classNames({\n\t\t\t\t\t\t\t\t[style['button']]: true,\n\t\t\t\t\t\t\t\t[style['icon-pinned-messages']]: true,\n\t\t\t\t\t\t\t\t[style['active']]: this.state.showPinnedMessages\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\ttitle=\"Pinned messages\"\n\t\t\t\t\t\t></div> :\n\t\t\t\t\t\tnull\n\t\t\t\t\t}\n\t\t\t\t\t<div\n\t\t\t\t\t\tonClick={this.props.toggleSidebar}\n\t\t\t\t\t\tclassName={classNames({\n\t\t\t\t\t\t\t[style['button']]: true,\n\t\t\t\t\t\t\t[style['sidebar-open']]: !this.props.showSidebar,\n\t\t\t\t\t\t\t[style['sidebar-close']]: this.props.showSidebar\n\t\t\t\t\t\t})}\n\t\t\t\t\t\ttitle=\"Toggle sidebar\"\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t\t{this.state.showPinnedMessages ?\n\t\t\t\t\t<div className={style['pinned-messages']}>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchannel.pinnedMessages.map((message, i) =>\n\t\t\t\t\t\t\t\t<JumpableMessage\n\t\t\t\t\t\t\t\t\tkey={channel.pinnedMessages[i].id}\n\t\t\t\t\t\t\t\t\tmessage={channel.pinnedMessages[i]}\n\t\t\t\t\t\t\t\t\tchannelID={channel.id}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t</div> :\n\t\t\t\t\tnull\n\t\t\t\t}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default connect('showSidebar', {toggleSidebar})(Header);\n","export default state => {\n\treturn {showSidebar: !state.showSidebar};\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"messages-container\":\"style_messages-container_3MmvW\",\"messages\":\"style_messages_3ilye\",\"scrollbar\":\"style_scrollbar_xvuj6\",\"scrollbar-indicator\":\"style_scrollbar-indicator_bMP-G\",\"scrollbar-indicator-wrapper\":\"style_scrollbar-indicator-wrapper_IwaQJ\",\"scrollbar-range-wrapper\":\"style_scrollbar-range-wrapper_1uBe-\",\"scrollbar-range-top-wrapper\":\"style_scrollbar-range-top-wrapper_3JoNf\",\"scrollbar-range-bottom-wrapper\":\"style_scrollbar-range-bottom-wrapper_1K54D\",\"scrollbar-range-indicator\":\"style_scrollbar-range-indicator_2Y7Hm\",\"scrollbar-range-top\":\"style_scrollbar-range-top_OE9DP\",\"scrollbar-range-bottom\":\"style_scrollbar-range-bottom_3tbw_\",\"scrollbar-range-input\":\"style_scrollbar-range-input_2uLOb\"};","import style from './style';\n\nimport {Component, createRef} from 'preact';\n\n/**\n * React ****s up text inputs by making onChange fire on *every* input. We only want it to fire when the user confirms\n * their input, either by unfocusing/blurring the input or by pressing the enter key.\n */\nclass BetterTextInput extends Component {\n\tconstructor (props) {\n\t\tsuper(props);\n\t\tthis.handleKeyPress = this.handleKeyPress.bind(this);\n\t}\n\n\thandleKeyPress (event) {\n\t\tif (event.code === 'Enter' || event.code === 'NumpadEnter') {\n\t\t\tthis.props.onChange(event);\n\t\t}\n\t}\n\n\trender () {\n\t\treturn (\n\t\t\t<input\n\t\t\t\tclassName={this.props.className}\n\t\t\t\ttype=\"text\"\n\t\t\t\tvalue={this.props.value}\n\t\t\t\tonBlur={this.props.onChange}\n\t\t\t\tonKeyPress={this.handleKeyPress}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nclass MessageViewScrollbar extends Component {\n\tconstructor (props) {\n\t\tsuper(props);\n\n\t\tthis.rangeElem = createRef();\n\n\t\tthis.handleSetStart = this.handleSetStart.bind(this);\n\t\tthis.handleSetEnd = this.handleSetEnd.bind(this);\n\t}\n\n\thandleSetStart (e) {\n\t\tconst {value} = e.target;\n\t\tconst numVal = parseInt(value);\n\t\tif (!Number.isInteger(numVal)) return;\n\t\tthis.props.setNewStart(numVal);\n\t}\n\n\thandleSetEnd (e) {\n\t\tconst {value} = e.target;\n\t\tconst numVal = parseInt(value);\n\t\tif (!Number.isInteger(numVal)) return;\n\t\tthis.props.setNewEnd(numVal);\n\t}\n\n\trender () {\n\t\treturn (\n\t\t\t<div className={style['scrollbar']}>\n\t\t\t\t<div className={style['scrollbar-range-wrapper']}>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={style['scrollbar-range-top-wrapper']}\n\t\t\t\t\t\tstyle={`top: ${(this.props.start / this.props.totalMessages) * 100}%;`}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className={`${style['scrollbar-range-top']} ${style['scrollbar-range-indicator']}`}>\n\t\t\t\t\t\t\t<BetterTextInput\n\t\t\t\t\t\t\t\tclassName={style['scrollbar-range-input']}\n\t\t\t\t\t\t\t\tvalue={this.props.start}\n\t\t\t\t\t\t\t\tonChange={this.handleSetStart}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={style['scrollbar-range-bottom-wrapper']}\n\t\t\t\t\t\tstyle={`top: ${(this.props.end / this.props.totalMessages) * 100}%;`}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className={`${style['scrollbar-range-bottom']} ${style['scrollbar-range-indicator']}`}>\n\t\t\t\t\t\t\t<BetterTextInput\n\t\t\t\t\t\t\t\tclassName={style['scrollbar-range-input']}\n\t\t\t\t\t\t\t\tvalue={this.props.end}\n\t\t\t\t\t\t\t\tonChange={this.handleSetEnd}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div className={style['scrollbar-indicator-wrapper']}>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={style['scrollbar-indicator']}\n\t\t\t\t\t\tref={this.rangeElem}\n\t\t\t\t\t\tstyle={`top: ${(this.props.start / this.props.totalMessages) * 100}%;\n\t\t\t\t\t\t\theight: ${((this.props.end - this.props.start) / this.props.totalMessages) * 100}%;`}\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default MessageViewScrollbar;\n","import style from './style';\n\nimport {Component, createRef} from 'preact';\nimport {connect} from 'unistore/preact';\n\nimport MessageList from '../MessageList/MessageList';\nimport MessageViewScrollbar from './MessageViewScrollbar';\n\nimport setChannelScrollState from '../../actions/set-channel-scroll-state';\n\nimport shouldSplitMessages from '../../util/should-split-messages';\nimport {fixupMessageStart, fixupMessageEnd} from '../../util/fixup-message-boundaries';\n\nconst CHUNK_SIZE = 50;\nconst MAX_MESSAGES = 200;\nconst SLACK_SPACE = 100;\n\n// eslint-disable-next-line no-unused-vars\nconst timer = ms => new Promise(resolve => {\n\tsetTimeout(resolve, ms);\n});\n\nclass MessageView extends Component {\n\tconstructor (props) {\n\t\tsuper(props);\n\n\t\tthis.viewElem = createRef();\n\n\t\tthis.loadMoreFromTop = this.loadMoreFromTop.bind(this);\n\t\tthis.loadMoreFromBottom = this.loadMoreFromBottom.bind(this);\n\t\tthis.handleScroll = this.handleScroll.bind(this);\n\t\tthis.setNewStart = this.setNewStart.bind(this);\n\t\tthis.setNewEnd = this.setNewEnd.bind(this);\n\t}\n\n\thandleScroll (e) {\n\t\tconst currentView = this.viewElem.current;\n\t\tconst atBottom =\n\t\t\t(currentView.scrollHeight - currentView.clientHeight) - currentView.scrollTop < SLACK_SPACE;\n\t\tconst atTop = currentView.scrollTop < SLACK_SPACE;\n\n\t\tif (atTop && this.props.start > 0) {\n\t\t\tthis.loadMoreFromTop();\n\t\t} else if (atBottom && this.props.end < (this.props.messages.length - 1)) {\n\t\t\tthis.loadMoreFromBottom();\n\t\t\te.preventDefault();\n\t\t}\n\t}\n\n\tloadMoreFromTop () {\n\t\t// We don't adjust the end position here because that would mess up the scrolling adjustment.\n\t\t// Messages are removed from the bottom in componentDidUpdate after the scroll has been adjusted.\n\t\tconst {props} = this;\n\t\tprops.setChannelScrollState(\n\t\t\tprops.currentChannel,\n\t\t\tfixupMessageStart(props.start - CHUNK_SIZE, props.messages),\n\t\t\tprops.end\n\t\t);\n\t}\n\n\tloadMoreFromBottom () {\n\t\tconst {props} = this;\n\t\tprops.setChannelScrollState(\n\t\t\tprops.currentChannel,\n\t\t\tprops.start,\n\t\t\tfixupMessageEnd(props.end + CHUNK_SIZE, props.messages)\n\t\t);\n\t}\n\n\tsetNewStart (start) {\n\t\tconst {props} = this;\n\t\tprops.setChannelScrollState(\n\t\t\tprops.currentChannel,\n\t\t\tfixupMessageStart(start, props.messages),\n\t\t\tfixupMessageEnd(start + CHUNK_SIZE, props.messages)\n\t\t);\n\t}\n\n\tsetNewEnd (end) {\n\t\tconst {props} = this;\n\t\tprops.setChannelScrollState(\n\t\t\tprops.currentChannel,\n\t\t\tfixupMessageStart(end - CHUNK_SIZE, props.messages),\n\t\t\tfixupMessageEnd(end, props.messages)\n\t\t);\n\t}\n\n\tgetSnapshotBeforeUpdate (prevProps) {\n\t\t// When adding messages at the top, maintain scroll position.\n\t\tif (this.props.start !== prevProps.start) {\n\t\t\tconst list = this.viewElem.current;\n\t\t\treturn list.scrollHeight - list.scrollTop;\n\t\t}\n\t\treturn null;\n\t}\n\n\tcomponentDidUpdate (prevProps, prevState, snapshot) {\n\t\tconst {props} = this;\n\t\tif (snapshot !== null) {\n\t\t\tconst list = this.viewElem.current;\n\t\t\tlist.scrollTop = list.scrollHeight - snapshot;\n\n\t\t\t// Now that we've properly positioned the top of the message list according to its bottom, we can trim old\n\t\t\t// messages of the bottom of the list.\n\t\t\tprops.setChannelScrollState(\n\t\t\t\tprops.currentChannel,\n\t\t\t\tprops.start,\n\t\t\t\tfixupMessageEnd(Math.min(props.end, props.start + MAX_MESSAGES), props.messages)\n\t\t\t);\n\t\t} else if (prevProps.end !== props.end) {\n\t\t\tprops.setChannelScrollState(\n\t\t\t\tprops.currentChannel,\n\t\t\t\tfixupMessageStart(Math.max(props.start, props.end - MAX_MESSAGES), props.messages),\n\t\t\t\tprops.end\n\t\t\t);\n\t\t}\n\t}\n\n\trender () {\n\t\tconst {props} = this;\n\n\t\tconst {start, end} = this.props;\n\t\tconst atStart = start === 0;\n\t\tconst atEnd = end === props.messages.length - 1;\n\n\t\tconst chunks = [];\n\n\t\tif (props.messages.length > 0) {\n\t\t\t// there is probably at least one off-by-one error in here\n\t\t\tlet currentChunkStart;\n\t\t\tlet i = start;\n\t\t\twhile (i <= end) {\n\t\t\t\tcurrentChunkStart = i;\n\n\t\t\t\twhile (i < end && (!shouldSplitMessages(props.messages[i], props.messages[i + 1]))) {\n\t\t\t\t\ti++;\n\t\t\t\t}\n\n\t\t\t\ti++;\n\n\t\t\t\tchunks.push(\n\t\t\t\t\t<MessageList\n\t\t\t\t\t\tkey={props.messages[currentChunkStart].id}\n\t\t\t\t\t\tmessages={props.messages}\n\t\t\t\t\t\tstart={currentChunkStart}\n\t\t\t\t\t\tend={i}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\treturn (\n\t\t\t<div className={style['messages-container']}>\n\t\t\t\t<div className={style.messages} ref={this.viewElem} onScroll={this.handleScroll}>\n\t\t\t\t\t{atStart ?\n\t\t\t\t\t\tnull :\n\t\t\t\t\t\t<div className=\"load-more\"><button onClick={this.loadMoreFromTop}>Load more</button></div>}\n\t\t\t\t\t{chunks}\n\t\t\t\t\t{atEnd ?\n\t\t\t\t\t\tnull :\n\t\t\t\t\t\t<div className=\"load-more\"><button onClick={this.loadMoreFromBottom}>Load more</button></div>}\n\t\t\t\t</div>\n\t\t\t\t<MessageViewScrollbar\n\t\t\t\t\ttotalMessages={this.props.messages.length}\n\t\t\t\t\tstart={start}\n\t\t\t\t\tend={end}\n\t\t\t\t\tsetNewStart={this.setNewStart}\n\t\t\t\t\tsetNewEnd={this.setNewEnd}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default connect(state => {\n\tconst {currentChannel} = state;\n\tconst {start, end} = state.channelScrollState[currentChannel];\n\treturn {currentChannel, start, end};\n}, {\n\tsetChannelScrollState\n})(MessageView);\n","import style from './style';\n\nimport {Component} from 'preact';\n\nimport Header from '../Header/Header';\nimport MessageView from '../MessageView/MessageView';\n\nexport default class ChannelView extends Component {\n\trender () {\n\t\tconst channel = this.props.channel;\n\t\treturn (\n\t\t\t<div className={style['channel-view']}>\n\t\t\t\t<Header channel={channel} />\n\t\t\t\t{\n\t\t\t\t\tchannel ?\n\t\t\t\t\t\t<MessageView key={channel.id} messages={channel.messages} /> :\n\t\t\t\t\t\tnull\n\t\t\t\t}\n\t\t\t</div>\n\t\t);\n\t}\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"sidebar\":\"style_sidebar_3Abiu\",\"collapsed\":\"style_collapsed_9fOr0\",\"sidebar-toggle\":\"style_sidebar-toggle_xNrxz\",\"tabs\":\"style_tabs_zwqzB\",\"tab\":\"style_tab_ed0f1\",\"selected\":\"style_selected_rA6my\",\"icon\":\"style_icon_1tc1R\",\"icon-find\":\"style_icon-find_cu6-I\",\"icon-users\":\"style_icon-users_1xt78\",\"panel\":\"style_panel_2biBc\"};","// extracted by mini-css-extract-plugin\nexport default {\"find-inner\":\"style_find-inner_1s_Jq\",\"find-controls\":\"style_find-controls_1FJRp\",\"form-row\":\"style_form-row_gW3xp\",\"form-label\":\"style_form-label_1X74A\",\"found-messages\":\"style_found-messages_22yuz\",\"paginator\":\"style_paginator_2gIo7\",\"page-button\":\"style_page-button_oV5pd\",\"active\":\"style_active_3A-9-\",\"disabled\":\"style_disabled_2XXCW\",\"prev\":\"style_prev_2RL7g\",\"next\":\"style_next_3T9NK\"};","// extracted by mini-css-extract-plugin\nexport default {\"hidden-checkbox\":\"style_hidden-checkbox_1VAKv\",\"toggle\":\"style_toggle_1TxiF\",\"checked\":\"style_checked_1eHQ1\",\"slider\":\"style_slider_2Ui3P\"};","import style from './style.scss';\n\nimport classNames from '../../util/class-names';\n\nconst Toggle = ({checked, ...props}) => (\n\t<>\n\t\t<input type=\"checkbox\" className={style['hidden-checkbox']} checked={checked} {...props} />\n\t\t<div className={classNames({[style['toggle']]: true, [style['checked']]: checked})}>\n\t\t\t<div className={style['slider']} />\n\t\t</div>\n\t</>\n);\n\nexport default Toggle;\n","import style from './style';\n\nimport {Component} from 'preact';\nimport {connect} from 'unistore/preact';\n\nimport JumpableMessage from '../../JumpableMessage/JumpableMessage';\nimport Toggle from '../../Toggle/Toggle';\n\nimport classNames from '../../../util/class-names';\n\nconst makeCheckboxSetter = (prop, target) => {\n\treturn event => {\n\t\ttarget.setState({[prop]: event.target.checked});\n\t};\n};\n\nconst makeInputSetter = (prop, target) => {\n\treturn event => {\n\t\ttarget.setState({[prop]: event.target.value});\n\t};\n};\n\nconst MESSAGES_PER_PAGE = 100;\n\nclass FindPanel extends Component {\n\tconstructor (props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tcollapsed: true,\n\t\t\tfilterByUser: false,\n\t\t\tfilterByText: false,\n\t\t\tfilterByChannel: false,\n\t\t\tfilterUser: null,\n\t\t\tfilterText: null,\n\t\t\tfilterChannel: null,\n\n\t\t\tfoundMessages: [],\n\t\t\tfoundMessageChannels: null,\n\t\t\tpageNumber: -1,\n\t\t\tnumPages: 0\n\t\t};\n\n\t\tthis.toggleFindPanel = this.toggleFindPanel.bind(this);\n\t\tthis.searchMessages = this.searchMessages.bind(this);\n\n\t\tthis.setFilterByText = makeCheckboxSetter('filterByText', this);\n\t\tthis.setFilterText = makeInputSetter('filterText', this);\n\n\t\tthis.setFilterByUser = makeCheckboxSetter('filterByUser', this);\n\t\tthis.setFilterUser = makeInputSetter('filterUser', this);\n\n\t\tthis.setFilterByChannel = makeCheckboxSetter('filterByChannel', this);\n\t\tthis.setFilterChannel = makeInputSetter('filterChannel', this);\n\n\t\tthis.prevPage = this.prevPage.bind(this);\n\t\tthis.nextPage = this.nextPage.bind(this);\n\t}\n\n\ttoggleFindPanel () {\n\t\tthis.setState(state => {\n\t\t\treturn {collapsed: !state.collapsed};\n\t\t});\n\t}\n\n\tprevPage () {\n\t\tthis.setState(state => {\n\t\t\tif (state.pageNumber < 1) return {};\n\t\t\treturn {\n\t\t\t\tpageNumber: state.pageNumber - 1\n\t\t\t};\n\t\t});\n\t}\n\n\tnextPage () {\n\t\tthis.setState(state => {\n\t\t\tif (state.pageNumber >= state.numPages - 1) return {};\n\t\t\treturn {\n\t\t\t\tpageNumber: state.pageNumber + 1\n\t\t\t};\n\t\t});\n\t}\n\n\tsearchMessages () {\n\t\tif (!this.props.archive) return;\n\n\t\tconst allMessages = [];\n\n\t\t// When we jump to a message we need to know what channel it belongs to. Since we search over all channels here,\n\t\t// we may as well cache which channel each message belongs to so we don't have to loop over them all again.\n\t\tconst messageChannels = new Map();\n\n\t\tconst {channels} = this.props.archive;\n\t\tfor (const channel of channels.values()) {\n\t\t\tif (\n\t\t\t\t(!channel.messages) ||\n\t\t\t\t(this.state.filterByChannel && this.state.filterChannel !== channel.id)\n\t\t\t) continue;\n\n\t\t\tlet messages = channel.messages;\n\n\t\t\tif (this.state.filterByText) {\n\t\t\t\tconst matchText = this.state.filterText.toLowerCase();\n\t\t\t\tmessages = messages.filter(message => message.content.toLowerCase().includes(matchText));\n\t\t\t}\n\n\t\t\tif (this.state.filterByUser) {\n\t\t\t\tconst userFilter = this.state.filterUser.toLowerCase();\n\t\t\t\tconst {users} = this.props.archive;\n\t\t\t\tmessages = messages.filter(message => {\n\t\t\t\t\tif (message.authorID === userFilter) return true;\n\n\t\t\t\t\tif (!users.has(message.authorID)) return false;\n\t\t\t\t\tconst memberUser = users.get(message.authorID);\n\n\t\t\t\t\tif (typeof memberUser === 'undefined') return false;\n\t\t\t\t\treturn (\n\t\t\t\t\t\tusers.has(message.authorID) &&\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tmemberUser.username.toLowerCase() === userFilter ||\n\t\t\t\t\t\t\tmemberUser.tag.toLowerCase() === userFilter\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < messages.length; i++) {\n\t\t\t\tallMessages.push(messages[i]);\n\t\t\t\tmessageChannels.set(messages[i].id, channel.id);\n\t\t\t}\n\t\t}\n\n\t\tthis.setState({\n\t\t\tfoundMessages: allMessages.sort((a, b) => a.createdTimestamp - b.createdTimestamp),\n\t\t\tfoundMessageChannels: messageChannels,\n\t\t\tpageNumber: 0,\n\t\t\tnumPages: Math.ceil(allMessages.length / MESSAGES_PER_PAGE)\n\t\t});\n\t}\n\n\trender () {\n\t\tconst listID = Math.random().toString(36);\n\n\t\tconst userTagOptions = [];\n\t\tconst archiveChannelOptions = [];\n\t\tif (this.props.archive) {\n\t\t\tfor (const user of this.props.archive.users.values()) {\n\t\t\t\tuserTagOptions.push(\n\t\t\t\t\t<option key={user.id} value={user.tag} />\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tfor (const channel of this.props.archive.channels.values()) {\n\t\t\t\tif (channel.type !== 'text') continue;\n\t\t\t\tarchiveChannelOptions.push(\n\t\t\t\t\t<option key={channel.id} value={channel.id}>{channel.name}</option>\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tconst start = this.state.pageNumber * MESSAGES_PER_PAGE;\n\t\tconst end = start + MESSAGES_PER_PAGE;\n\n\t\treturn (\n\t\t\t<div className={style['find-inner']}>\n\t\t\t\t<div className={style['find-controls']}>\n\t\t\t\t\t<div className={style['form-row']}>\n\t\t\t\t\t\t<label className={style['form-label']}>\n\t\t\t\t\t\t\t<Toggle\n\t\t\t\t\t\t\t\tonChange={this.setFilterByText}\n\t\t\t\t\t\t\t\tchecked={this.state.filterByText}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<span> Contains text: </span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input type=\"text\" onChange={this.setFilterText}></input>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={style['form-row']}>\n\t\t\t\t\t\t<label className={style['form-label']}>\n\t\t\t\t\t\t\t<Toggle\n\t\t\t\t\t\t\t\tonChange={this.setFilterByUser}\n\t\t\t\t\t\t\t\tchecked={this.state.filterByUser}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<span> From user (name or ID): </span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input type=\"text\" onChange={this.setFilterUser} list={listID}></input>\n\t\t\t\t\t\t<datalist id={listID}>\n\t\t\t\t\t\t\t{userTagOptions}\n\t\t\t\t\t\t</datalist>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={style['form-row']}>\n\t\t\t\t\t\t<label className={style['form-label']}>\n\t\t\t\t\t\t\t<Toggle\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tonChange={this.setFilterByChannel}\n\t\t\t\t\t\t\t\tchecked={this.state.filterByChannel}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<span> In channel: </span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<select type=\"text\" onChange={this.setFilterChannel}>\n\t\t\t\t\t\t\t{archiveChannelOptions}\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<button onClick={this.searchMessages}>Find</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className={style['found-messages']}>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.state.foundMessages.slice(start, end).map(message =>\n\t\t\t\t\t\t\t<JumpableMessage\n\t\t\t\t\t\t\t\tkey={message.id}\n\t\t\t\t\t\t\t\tmessage={message}\n\t\t\t\t\t\t\t\tchannelID={this.state.foundMessageChannels.get(message.id)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t\t<div className={style['paginator']}>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={classNames({\n\t\t\t\t\t\t\t[style['page-button']]: true,\n\t\t\t\t\t\t\t[style['prev']]: true,\n\t\t\t\t\t\t\t[style['disabled']]: this.state.pageNumber < 1\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tonClick={this.prevPage}\n\t\t\t\t\t></div>\n\t\t\t\t\t<div className={style['page-num']}>Page {this.state.pageNumber + 1} of {this.state.numPages}</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={classNames({\n\t\t\t\t\t\t\t[style['page-button']]: true,\n\t\t\t\t\t\t\t[style['next']]: true,\n\t\t\t\t\t\t\t[style['disabled']]: this.state.pageNumber >= this.state.numPages - 1\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tonClick={this.nextPage}\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default connect(['archive', 'currentChannel'])(FindPanel);\n","// extracted by mini-css-extract-plugin\nexport default {\"users-list\":\"style_users-list_2BZP5\",\"user\":\"style_user_ezzR0\",\"user-avatar\":\"style_user-avatar_konq_\",\"role-group\":\"style_role-group_2lxdf\",\"role-header\":\"style_role-header_2l1hT\",\"icon-owner\":\"style_icon-owner_1aO-t\"};","import style from './style';\n\nimport {Component} from 'preact';\nimport {connect} from 'unistore/preact';\n\nimport Avatar from '../../Avatar/Avatar';\n\nimport setUserInfoID from '../../../actions/set-user-info-id';\n\nimport getMemberName from '../../../util/get-member-name';\nimport getMemberColor from '../../../util/member-role-color';\n\nconst UserListing = connect([], {setUserInfoID})(props => {\n\tconst {memberID, archive, isOwner} = props;\n\treturn (\n\t\t<div\n\t\t\tclassName={style['user']}\n\t\t\tonClick={() => props.setUserInfoID(memberID)}\n\t\t>\n\t\t\t<div className={style['user-avatar']}>\n\t\t\t\t<Avatar user={archive.users.get(memberID)} size={32}/>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclassName={style['username']}\n\t\t\t\tstyle={`color: ${getMemberColor(memberID, archive)}`}\n\t\t\t>\n\t\t\t\t{getMemberName(memberID, archive)}\n\t\t\t</div>\n\t\t\t{isOwner ?\n\t\t\t\t<div className={style['icon-owner']} /> :\n\t\t\t\tnull}\n\t\t</div>\n\t);\n});\n\nclass UsersPanel extends Component {\n\tconstructor (props) {\n\t\tsuper(props);\n\t}\n\n\trender () {\n\t\tconst {archive} = this.props;\n\n\t\tif (archive === null) return null;\n\n\t\tlet panelInner;\n\t\tif (archive.type === 'server') {\n\t\t\tconst server = archive.data;\n\n\t\t\tconst roleGroups = [];\n\t\t\tconst roleMap = new Map();\n\t\n\t\t\tfor (const member of server.members.values()) {\n\t\t\t\tconst highestRole = member.roles.reduce((prevRole, curRole) =>\n\t\t\t\t\tprevRole && (prevRole.position > curRole.position) ? prevRole : curRole, null);\n\t\n\t\t\t\tif (roleMap.has(highestRole)) {\n\t\t\t\t\troleMap.get(highestRole).push(member);\n\t\t\t\t} else {\n\t\t\t\t\troleMap.set(highestRole, [member]);\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfor (const [role, members] of roleMap) {\n\t\t\t\tmembers.sort((a, b) => a.name < b.name ? 1 : -1);\n\t\t\t\troleGroups.push({role, members});\n\t\t\t}\n\t\n\t\t\troleGroups.sort((a, b) => b.role.position - a.role.position);\n\t\n\t\t\tconst nonMembers = [];\n\t\n\t\t\tfor (const user of archive.users.values()) {\n\t\t\t\tif (server.members.has(user.id)) continue;\n\t\t\t\tnonMembers.push(user);\n\t\t\t}\n\t\n\t\t\tconst roleGroupsElems = roleGroups.map(({role, members}) => (\n\t\t\t\t<div className={style['role-group']} key={role ? role.id : null}>\n\t\t\t\t\t{role ? <div className={style['role-header']}>{role.name}</div> : null}\n\t\t\t\t\t<div className={style['role-members']}>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmembers.map(member => (\n\t\t\t\t\t\t\t\t<UserListing\n\t\t\t\t\t\t\t\t\tmemberID={member.id}\n\t\t\t\t\t\t\t\t\tarchive={archive}\n\t\t\t\t\t\t\t\t\tkey={member.id}\n\t\t\t\t\t\t\t\t\tisOwner={server.owner === member.id}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t))\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t));\n\t\n\t\t\tpanelInner = nonMembers.length > 0 ? (\n\t\t\t\t<>\n\t\t\t\t\t<section>\n\t\t\t\t\t\t<header>Current members</header>\n\t\t\t\t\t\t<div>{roleGroupsElems}</div>\n\t\t\t\t\t</section>\n\t\t\t\t\t<section>\n\t\t\t\t\t\t<header>Past users</header>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tnonMembers.map(user => (\n\t\t\t\t\t\t\t\t\t<UserListing\n\t\t\t\t\t\t\t\t\t\tmemberID={user.id}\n\t\t\t\t\t\t\t\t\t\tarchive={archive}\n\t\t\t\t\t\t\t\t\t\tkey={user.id}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</section>\n\t\t\t\t</>\n\t\t\t) : roleGroupsElems;\n\t\t} else {\n\t\t\tconst channel = archive.data;\n\t\t\tif (!channel.recipients) return null;\n\t\t\tpanelInner = (\n\t\t\t\t<div>\n\t\t\t\t\t{channel.recipients.map(id => (\n\t\t\t\t\t\t<UserListing\n\t\t\t\t\t\t\tmemberID={id}\n\t\t\t\t\t\t\tarchive={archive}\n\t\t\t\t\t\t\tkey={id}\n\t\t\t\t\t\t\tisOwner={channel.owner === id}\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<div className={style['users-list']}>\n\t\t\t\t{panelInner}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default connect('archive')(UsersPanel);\n","import style from './style';\n\nimport {Component} from 'preact';\nimport {connect} from 'unistore/preact';\n\nimport FindPanel from './FindPanel/FindPanel';\nimport UsersPanel from './UsersPanel/UsersPanel';\n\nimport classNames from '../../util/class-names';\n\nclass Sidebar extends Component {\n\tconstructor (props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tactiveTab: 'users'\n\t\t};\n\n\t\tthis.getActivePanel = this.getActivePanel.bind(this);\n\t\tthis.setUsersTab = this.setActiveTab.bind(this, 'users');\n\t\tthis.setFindTab = this.setActiveTab.bind(this, 'find');\n\t}\n\n\tgetActivePanel () {\n\t\tswitch (this.state.activeTab) {\n\t\t\tcase 'users': return <UsersPanel />;\n\t\t\tcase 'find': return <FindPanel />;\n\t\t\tdefault: return null;\n\t\t}\n\t}\n\n\tsetActiveTab (tab) {\n\t\tthis.setState({activeTab: tab});\n\t}\n\n\trender () {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={classNames({\n\t\t\t\t\t[style['sidebar']]: true,\n\t\t\t\t\t[style['collapsed']]: !this.props.showSidebar\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t<div className={style['tabs']}>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={classNames({\n\t\t\t\t\t\t\t[style['tab']]: true,\n\t\t\t\t\t\t\t[style['selected']]: this.state.activeTab === 'users'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tonClick={this.setUsersTab}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className={`${style['icon']} ${style['icon-users']}`}></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={classNames({\n\t\t\t\t\t\t\t[style['tab']]: true,\n\t\t\t\t\t\t\t[style['selected']]: this.state.activeTab === 'find'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tonClick={this.setFindTab}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className={`${style['icon']} ${style['icon-find']}`}></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className={style['panel']}>\n\t\t\t\t\t{this.getActivePanel()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default connect('showSidebar')(Sidebar);\n","// extracted by mini-css-extract-plugin\nexport default {\"modal-bg\":\"style_modal-bg_2cJDI\",\"fade\":\"style_fade_1w0KX\",\"modal-positioner\":\"style_modal-positioner_F8P48\",\"modal\":\"style_modal_LYvZS\",\"popup\":\"style_popup_1XomI\"};","import style from './style.scss';\n\nimport {Component} from 'preact';\n\nclass Modal extends Component {\n\tconstructor (props) {\n\t\tsuper(props);\n\t}\n\n\trender () {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div\n\t\t\t\t\tclassName={style['modal-bg']}\n\t\t\t\t\tonClick={this.props.onClose}\n\t\t\t\t/>\n\t\t\t\t<div className={style['modal-positioner']}>\n\t\t\t\t\t<div className={style['modal']}>\n\t\t\t\t\t\t{this.props.children}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default Modal;\n","// extracted by mini-css-extract-plugin\nexport default {\"user-infobox\":\"style_user-infobox_3u14T\",\"avatar\":\"style_avatar_16X10\",\"user-discriminator\":\"style_user-discriminator_1JjQG\",\"user-nickname\":\"style_user-nickname_28T4k\",\"user-id\":\"style_user-id_2hhl9\",\"user-joined-timestamp\":\"style_user-joined-timestamp_1trJL\",\"role\":\"style_role_1YXSJ\",\"role-color\":\"style_role-color_3lHMB\",\"role-name\":\"style_role-name_1tDhO\"};","import style from './style.scss';\n\nimport {connect} from 'unistore/preact';\n\nimport Avatar from '../Avatar/Avatar';\n\nimport formatTimestamp from '../../util/format-timestamp';\n\nconst UserInfo = props => {\n\tconst user = props.archive.users.get(props.userID);\n\tconst member = props.archive.type === 'server' && props.archive.data.members.get(props.userID);\n\treturn (\n\t\t<div className={style['user-infobox']}>\n\t\t\t<div className={style['avatar']}>\n\t\t\t\t<Avatar user={user} userID={props.userID} size={128}/>\n\t\t\t</div>\n\t\t\t<div className={style['details']}>\n\t\t\t\t<section>\n\t\t\t\t\t<div className={style['user-tag']}>\n\t\t\t\t\t\t<span className={style['user-name']}>{user ? user.username : 'Unknown user'}</span>\n\t\t\t\t\t\t<span className={style['user-discriminator']}>#{user ? user.discriminator : '0000'}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={style['user-id']}>{props.userID}</div>\n\t\t\t\t</section>\n\t\t\t\t{\n\t\t\t\t\tmember ?\n\t\t\t\t\t\t<section>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmember.nickname === null ?\n\t\t\t\t\t\t\t\t\tnull :\n\t\t\t\t\t\t\t\t\t<div className={style['user-nickname']}>{member.nickname}</div>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmember.joinedTimestamp === null ?\n\t\t\t\t\t\t\t\t\tnull :\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName={style['user-joined-timestamp']}\n\t\t\t\t\t\t\t\t\t>Joined this server {formatTimestamp(member.joinedTimestamp)}</div>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmember.roles.filter(role => role.name !== '@everyone').map(role => (\n\t\t\t\t\t\t\t\t\t<div className={style['role']} key={role.id} style={role.color === '#000000' ? null : `border-color: ${role.color}`}>\n\t\t\t\t\t\t\t\t\t\t<span className={style['role-color']} style={role.color === '#000000' ? null : `background-color: ${role.color}`}></span>\n\t\t\t\t\t\t\t\t\t\t<span className={style['role-name']}>{role.name}</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</section> :\n\t\t\t\t\t\tnull\n\t\t\t\t}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default connect('archive')(UserInfo);\n","// extracted by mini-css-extract-plugin\nexport default {\"reaction-info\":\"style_reaction-info_kZjUx\",\"reactions\":\"style_reactions_1F-5T\",\"reaction\":\"style_reaction_PUcYj\",\"selected\":\"style_selected_1RHX6\",\"count\":\"style_count_3RD36\",\"reaction-users\":\"style_reaction-users_mft_4\",\"reaction-user\":\"style_reaction-user_1zDAM\",\"user-nickname\":\"style_user-nickname_2YFc3\",\"username\":\"style_username_3Q85t\"};","import style from './style.scss';\n\nimport {connect} from 'unistore/preact';\n\nimport Avatar from '../Avatar/Avatar';\nimport {ReactionEmoji} from '../Emoji/Emoji';\n\nimport setReactionInfoIndex from '../../actions/set-reaction-info-index';\n\nimport classNames from '../../util/class-names';\nimport getMemberName from '../../util/get-member-name';\n\nconst ReactionInfo = connect(['reactionsToShow', 'showReactionIndex', 'archive'], {setReactionInfoIndex})(props => {\n\tconst {archive, reactionsToShow, showReactionIndex, setReactionInfoIndex} = props;\n\tconst reaction = reactionsToShow[showReactionIndex];\n\treturn (\n\t\t<div className={style['reaction-info']}>\n\t\t\t<div className={style['reactions']}>\n\t\t\t\t{reactionsToShow.map((reaction, index) =>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={classNames({\n\t\t\t\t\t\t\t[style['reaction']]: true,\n\t\t\t\t\t\t\t[style['selected']]: index === showReactionIndex\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tkey={reaction.emoji}\n\t\t\t\t\t\tonClick={() => setReactionInfoIndex(index)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<ReactionEmoji emoji={reaction.emojiIsCustom ?\n\t\t\t\t\t\t\tarchive.emojis.get(reaction.emoji) :\n\t\t\t\t\t\t\treaction.emoji} />\n\t\t\t\t\t\t<span className={style['count']}>{reaction.count}</span>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t<div className={style['reaction-users']}>\n\t\t\t\t{reaction.users.map(userID => {\n\t\t\t\t\tconst user = archive.users.get(userID);\n\t\t\t\t\t// There's one archive where I forgot to save users that only exist through reactions\n\t\t\t\t\tif (!user) return null;\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={style['reaction-user']}\n\t\t\t\t\t\t\tkey={userID}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className={style['user-avatar']}>\n\t\t\t\t\t\t\t\t<Avatar user={user} size={32}/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className={style['user-nickname']}>\n\t\t\t\t\t\t\t\t{getMemberName(userID, archive)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className={style['username']}>\n\t\t\t\t\t\t\t\t{user.username}#{user.discriminator}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t</div>\n\t);\n});\n\nexport default ReactionInfo;\n","export default (state, idx) => {\n\treturn {\n\t\tshowReactionIndex: idx\n\t};\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"crash-wrapper\":\"style_crash-wrapper_2tIN8\",\"crash-header\":\"style_crash-header_3Ca9S\",\"error\":\"style_error_aHCrq\",\"stack\":\"style_stack_1ZqZo\"};","import style from './style.scss';\n\nimport {Component} from 'preact';\n\nclass ErrorBoundary extends Component {\n\tconstructor (props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\thasError: false,\n\t\t\terror: null\n\t\t};\n\t}\n\n\tcomponentDidCatch (error) {\n\t\tthis.setState({\n\t\t\thasError: true,\n\t\t\terror\n\t\t});\n\t}\n\n\trender () {\n\t\tif (!this.state.hasError) return this.props.children;\n\n\n\t\treturn (\n\t\t\t<div className={style['crash-wrapper']}>\n\t\t\t\t<header className={style['crash-header']}>Oopsie Woopsie UwU</header>\n\t\t\t\t<div className={style['error']}>{this.state.error.message}</div>\n\t\t\t\t<div className={style['stack']}>{this.state.error.stack}</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nconst ErrorBoundaryHOC = WrappedComponent => (\n\tprops => (\n\t\t<ErrorBoundary>\n\t\t\t<WrappedComponent {...props} />\n\t\t</ErrorBoundary>\n\t)\n);\n\nexport {ErrorBoundaryHOC};\nexport default ErrorBoundary;\n","import style from './style.scss';\nimport '../../../vendor/normalize.css';\nimport {Component} from 'preact';\nimport createStore from 'unistore';\nimport {Provider, connect} from 'unistore/preact';\n\nimport deserializeArchiveFile from '../../deserialization/deserialization';\n\nimport ChannelList from '../ChannelList/ChannelList';\nimport ChannelView from '../ChannelView/ChannelView';\nimport Sidebar from '../Sidebar/Sidebar';\nimport Modal from '../Modal/Modal';\nimport UserInfo from '../UserInfo/UserInfo';\nimport ReactionInfo from '../ReactionInfo/ReactionInfo';\nimport {ErrorBoundaryHOC} from '../ErrorBoundary/ErrorBoundary';\n\nimport setArchive from '../../actions/set-archive';\nimport setUserInfoID from '../../actions/set-user-info-id';\nimport setReactionInfo from '../../actions/set-reaction-info';\nimport setCurrentChannel from '../../actions/set-current-channel';\n\nconst store = createStore({\n\tarchive: null,\n\tcurrentChannel: null,\n\tshowInfoOfUserID: null,\n\treactionsToShow: null,\n\tshowReactionIndex: null,\n\tchannelScrollState: {},\n\tshowSidebar: true\n});\n\nclass _App extends Component {\n\tconstructor (props) {\n\t\tsuper(props);\n\n\t\tthis.handleUpload = this.handleUpload.bind(this);\n\t\tthis.hideUserInfo = this.hideUserInfo.bind(this);\n\t\tthis.hideReactionInfo = this.hideReactionInfo.bind(this);\n\t}\n\n\thandleUpload (event) {\n\t\tconst file = event.target.files[0];\n\t\tif (!file) return;\n\n\t\tdeserializeArchiveFile(file)\n\t\t\t.then(archive => {\n\t\t\t\t// TODO: race condition from disposing new archive before old one is set?\n\t\t\t\tif (this.props.archive) this.props.archive.dispose();\n\t\t\t\tthis.props.setArchive(archive);\n\t\t\t\tthis.props.setCurrentChannel(archive.channels.size === 1 ?\n\t\t\t\t\tarchive.channels.values().next().value.id :\n\t\t\t\t\tnull);\n\t\t\t});\n\t}\n\n\thideUserInfo () {\n\t\tthis.props.setUserInfoID(null);\n\t}\n\n\thideReactionInfo () {\n\t\tthis.props.setReactionInfo(null, null);\n\t}\n\n\trender () {\n\t\treturn (\n\t\t\t<div id={style.app}>\n\t\t\t\t{this.props.archive ?\n\t\t\t\t\t<div className={style['channels-and-messages']}>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.props.archive.type === 'server' ?\n\t\t\t\t\t\t\t\t<div className={style['channel-list-panel']}>\n\t\t\t\t\t\t\t\t\t<ChannelList channels={this.props.archive ? this.props.archive.channels : null} />\n\t\t\t\t\t\t\t\t</div> :\n\t\t\t\t\t\t\t\tnull\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<ChannelView channel={this.props.archive ?\n\t\t\t\t\t\t\tthis.props.archive.channels.get(this.props.currentChannel) :\n\t\t\t\t\t\t\tnull\n\t\t\t\t\t\t}/>\n\t\t\t\t\t\t<Sidebar />\n\t\t\t\t\t</div> :\n\t\t\t\t\tnull\n\t\t\t\t}\n\n\n\t\t\t\t<div className={style['json-file-upload-form']}>\n\t\t\t\t\t<span>.json or .zip log file: </span>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\tonChange={this.handleUpload}\n\t\t\t\t\t></input>\n\t\t\t\t</div>\n\n\t\t\t\t{this.props.showInfoOfUserID ?\n\t\t\t\t\t<Modal onClose={this.hideUserInfo}>\n\t\t\t\t\t\t<UserInfo userID={this.props.showInfoOfUserID}/>\n\t\t\t\t\t</Modal> :\n\t\t\t\t\tnull}\n\n\t\t\t\t{this.props.reactionsToShow ?\n\t\t\t\t\t<Modal onClose={this.hideReactionInfo}>\n\t\t\t\t\t\t<ReactionInfo />\n\t\t\t\t\t</Modal> :\n\t\t\t\t\tnull}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nconst App = ErrorBoundaryHOC(\n\tconnect(\n\t\t['archive', 'currentChannel', 'showInfoOfUserID', 'reactionsToShow'],\n\t\t{setUserInfoID, setReactionInfo, setArchive, setCurrentChannel}\n\t)(_App)\n);\n\nexport default class Main extends Component {\n\trender () {\n\t\treturn (\n\t\t\t<Provider store={store}>\n\t\t\t\t<App />\n\t\t\t</Provider>\n\t\t);\n\t}\n}\n","export default (state, archive) => {\n\treturn {archive};\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.hmd = (module) => {\n\tmodule = Object.create(module);\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'exports', {\n\t\tenumerable: true,\n\t\tset: () => {\n\t\t\tthrow new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\n\t\t}\n\t});\n\treturn module;\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n// This entry module doesn't tell about it's top-level declarations so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(391);\n"],"sourceRoot":""}